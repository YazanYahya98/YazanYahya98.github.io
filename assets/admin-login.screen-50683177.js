import{r as a,a as v,j as e,F as p}from"./index-34fadefe.js";import{U as w}from"./user.context-b23dde3e.js";const y="/assets/rise-logo-png-4d157727.png",C={email:"",password:""};function E(L){const{currentUser:r,setCurrentUser:g}=a.useContext(w),h=v(),[o,f]=a.useState(C),{email:i,password:l}=o,[c,d]=a.useState(""),[x,u]=a.useState(!1),m=n=>{const{name:t,value:s}=n.target;f({...o,[t]:s})},j=async n=>{n.preventDefault(),d("");try{u(!0);let t={email:i,password:l},s;try{s=await fetch("https://localhost:7245/api/Login",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch{if(s==null)throw"Login failed, please contact support center."}if(s.status==200){const b=await s.text();g(b)}else throw s.status==400?"Email or password is not correct":"Login failed, please contact support center."}catch(t){d(t)}finally{u(!1)}};return a.useEffect(()=>{r!==null&&h("/admin")},[r]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"admin-login-bg"}),e.jsxs("div",{className:"admin-login",children:[e.jsx("div",{className:"logo",children:e.jsx("img",{src:y,alt:""})}),e.jsx("h3",{children:"Admin Login"}),e.jsxs("form",{onSubmit:j,children:[e.jsx(p,{label:"Email",required:!0,type:"email",value:i,name:"email",onChange:m}),e.jsx(p,{label:"Password",required:!0,type:"password",value:l,name:"password",onChange:m}),c!==""&&e.jsx("div",{className:"error-message",children:e.jsx("p",{className:"error-text",children:c})}),e.jsx("button",{type:"submit",disabled:x,children:"Login"})]})]})]})}export{E as default};
