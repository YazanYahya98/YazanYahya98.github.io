import{r as a,j as e}from"./react-bd395152.js";import{F as u}from"./index-84d8b43f.js";import{U as v}from"./user.context-159b786a.js";import{a as w}from"./react-router-53cec659.js";import"./lodash.throttle-0b3a1717.js";import"./react-dom-8cbe9ec5.js";import"./scheduler-765c72db.js";import"./react-router-dom-98c6d843.js";import"./@remix-run-89049d58.js";import"./@fortawesome-0254cf4c.js";import"./prop-types-0f864fce.js";const y="/assets/rise-logo-png-4d157727.png",C={email:"",password:""};function M(L){const{currentUser:o,setCurrentUser:g}=a.useContext(v),f=w(),[n,h]=a.useState(C),{email:i,password:l}=n,[c,m]=a.useState(""),[x,d]=a.useState(!1),p=r=>{const{name:t,value:s}=r.target;h({...n,[t]:s})},j=async r=>{r.preventDefault(),m("");try{d(!0);let t={email:i,password:l},s;try{s=await fetch("https://localhost:7245/api/Login",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch{if(s==null)throw"Login failed, please contact support center."}if(s.status==200){const b=await s.text();g(b)}else throw s.status==400?"Email or password is not correct":"Login failed, please contact support center."}catch(t){m(t)}finally{d(!1)}};return a.useEffect(()=>{o!==null&&f("/admin")},[o]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"admin-login-bg"}),e.jsxs("div",{className:"admin-login",children:[e.jsx("div",{className:"logo",children:e.jsx("img",{src:y,alt:""})}),e.jsx("h3",{children:"Admin Login"}),e.jsxs("form",{onSubmit:j,children:[e.jsx(u,{label:"Email",required:!0,type:"email",value:i,name:"email",onChange:p}),e.jsx(u,{label:"Password",required:!0,type:"password",value:l,name:"password",onChange:p}),c!==""&&e.jsx("div",{className:"error-message",children:e.jsx("p",{className:"error-text",children:c})}),e.jsx("button",{type:"submit",disabled:x,children:"Login"})]})]})]})}export{M as default};
