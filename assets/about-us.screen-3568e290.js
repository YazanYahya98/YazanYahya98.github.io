import{r as te,c as qi,E as $i,j as ae,p as Qi,b as Ki}from"./index-6ca7514a.js";import{n as Ae}from"./App-03eb10fe.js";import{S as lr,G as Zi,k as Ji,l as en,H as tn,m as rn}from"./value-item.anim-247496a1.js";var nn=Object.defineProperty,on=(s,h)=>{for(var f in h)nn(s,f,{get:h[f],enumerable:!0})},sn={};on(sn,{assign:()=>un,colors:()=>si,createStringInterpolator:()=>ni,skipAnimation:()=>ai,to:()=>oi,willAdvance:()=>hi});var cr=ut(),ue=s=>ht(s,cr),dr=ut();ue.write=s=>ht(s,dr);var Pt=ut();ue.onStart=s=>ht(s,Pt);var pr=ut();ue.onFrame=s=>ht(s,pr);var fr=ut();ue.onFinish=s=>ht(s,fr);var ze=[];ue.setTimeout=(s,h)=>{const f=ue.now()+h,y=()=>{const u=ze.findIndex(a=>a.cancel==y);~u&&ze.splice(u,1),Pe-=~u?1:0},e={time:f,handler:s,cancel:y};return ze.splice(Jr(f),0,e),Pe+=1,ei(),e};var Jr=s=>~(~ze.findIndex(h=>h.time>s)||~ze.length);ue.cancel=s=>{Pt.delete(s),pr.delete(s),fr.delete(s),cr.delete(s),dr.delete(s)};ue.sync=s=>{Vt=!0,ue.batchedUpdates(s),Vt=!1};ue.throttle=s=>{let h;function f(){try{s(...h)}finally{h=null}}function y(...e){h=e,ue.onStart(f)}return y.handler=s,y.cancel=()=>{Pt.delete(f),h=null},y};var vr=typeof window<"u"?window.requestAnimationFrame:()=>{};ue.use=s=>vr=s;ue.now=typeof performance<"u"?()=>performance.now():Date.now;ue.batchedUpdates=s=>s();ue.catch=console.error;ue.frameLoop="always";ue.advance=()=>{ue.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):ri()};var Me=-1,Pe=0,Vt=!1;function ht(s,h){Vt?(h.delete(s),s(0)):(h.add(s),ei())}function ei(){Me<0&&(Me=0,ue.frameLoop!=="demand"&&vr(ti))}function an(){Me=-1}function ti(){~Me&&(vr(ti),ue.batchedUpdates(ri))}function ri(){const s=Me;Me=ue.now();const h=Jr(Me);if(h&&(ii(ze.splice(0,h),f=>f.handler()),Pe-=h),!Pe){an();return}Pt.flush(),cr.flush(s?Math.min(64,Me-s):16.667),pr.flush(),dr.flush(),fr.flush()}function ut(){let s=new Set,h=s;return{add(f){Pe+=h==s&&!s.has(f)?1:0,s.add(f)},delete(f){return Pe-=h==s&&s.has(f)?1:0,s.delete(f)},flush(f){h.size&&(s=new Set,Pe-=h.size,ii(h,y=>y(f)&&s.add(y)),Pe+=s.size,h=s)}}}function ii(s,h){s.forEach(f=>{try{h(f)}catch(y){ue.catch(y)}})}function hn(){}var ni,oi,si=null,ai=!1,hi=hn,un=s=>{s.to&&(oi=s.to),s.now&&(ue.now=s.now),s.colors!==void 0&&(si=s.colors),s.skipAnimation!=null&&(ai=s.skipAnimation),s.createStringInterpolator&&(ni=s.createStringInterpolator),s.requestAnimationFrame&&ue.use(s.requestAnimationFrame),s.batchedUpdates&&(ue.batchedUpdates=s.batchedUpdates),s.willAdvance&&(hi=s.willAdvance),s.frameLoop&&(ue.frameLoop=s.frameLoop)},xe="[-+]?\\d*\\.?\\d+",wt=xe+"%";function Ot(...s){return"\\(\\s*("+s.join(")\\s*,\\s*(")+")\\s*\\)"}new RegExp("rgb"+Ot(xe,xe,xe));new RegExp("rgba"+Ot(xe,xe,xe,xe));new RegExp("hsl"+Ot(xe,wt,wt));new RegExp("hsla"+Ot(xe,wt,wt,xe));var ln="react-spring: ",ui=s=>{const h=s;let f=!1;if(typeof h!="function")throw new TypeError(`${ln}once requires a function parameter`);return(...y)=>{f||(h(...y),f=!0)}};ui(console.warn);ui(console.warn);function qt(s,h){const[f]=te.useState(()=>({inputs:h,result:s()})),y=te.useRef(),e=y.current;let u=e;return u?h&&u.inputs&&cn(h,u.inputs)||(u={inputs:h,result:s()}):u=f,te.useEffect(()=>{y.current=u,e==f&&(f.inputs=f.result=void 0)},[u]),u.result}function cn(s,h){if(s.length!==h.length)return!1;for(let f=0;f<s.length;f++)if(s[f]!==h[f])return!1;return!0}var $t=s=>te.useEffect(s,dn),dn=[],pn=Object.defineProperty,fn=(s,h)=>{for(var f in h)pn(s,f,{get:h[f],enumerable:!0})},_e={};fn(_e,{assign:()=>mn,colors:()=>De,createStringInterpolator:()=>Tr,skipAnimation:()=>gi,to:()=>vi,willAdvance:()=>Er});var gr=ct(),ne=s=>lt(s,gr),mr=ct();ne.write=s=>lt(s,mr);var Ft=ct();ne.onStart=s=>lt(s,Ft);var yr=ct();ne.onFrame=s=>lt(s,yr);var xr=ct();ne.onFinish=s=>lt(s,xr);var Xe=[];ne.setTimeout=(s,h)=>{const f=ne.now()+h,y=()=>{const u=Xe.findIndex(a=>a.cancel==y);~u&&Xe.splice(u,1),Fe-=~u?1:0},e={time:f,handler:s,cancel:y};return Xe.splice(li(f),0,e),Fe+=1,ci(),e};var li=s=>~(~Xe.findIndex(h=>h.time>s)||~Xe.length);ne.cancel=s=>{Ft.delete(s),yr.delete(s),xr.delete(s),gr.delete(s),mr.delete(s)};ne.sync=s=>{Qt=!0,ne.batchedUpdates(s),Qt=!1};ne.throttle=s=>{let h;function f(){try{s(...h)}finally{h=null}}function y(...e){h=e,ne.onStart(f)}return y.handler=s,y.cancel=()=>{Ft.delete(f),h=null},y};var br=typeof window<"u"?window.requestAnimationFrame:()=>{};ne.use=s=>br=s;ne.now=typeof performance<"u"?()=>performance.now():Date.now;ne.batchedUpdates=s=>s();ne.catch=console.error;ne.frameLoop="always";ne.advance=()=>{ne.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):pi()};var Oe=-1,Fe=0,Qt=!1;function lt(s,h){Qt?(h.delete(s),s(0)):(h.add(s),ci())}function ci(){Oe<0&&(Oe=0,ne.frameLoop!=="demand"&&br(di))}function vn(){Oe=-1}function di(){~Oe&&(br(di),ne.batchedUpdates(pi))}function pi(){const s=Oe;Oe=ne.now();const h=li(Oe);if(h&&(fi(Xe.splice(0,h),f=>f.handler()),Fe-=h),!Fe){vn();return}Ft.flush(),gr.flush(s?Math.min(64,Oe-s):16.667),yr.flush(),mr.flush(),xr.flush()}function ct(){let s=new Set,h=s;return{add(f){Fe+=h==s&&!s.has(f)?1:0,s.add(f)},delete(f){return Fe-=h==s&&s.has(f)?1:0,s.delete(f)},flush(f){h.size&&(s=new Set,Fe-=h.size,fi(h,y=>y(f)&&s.add(y)),Fe+=s.size,h=s)}}}function fi(s,h){s.forEach(f=>{try{h(f)}catch(y){ne.catch(y)}})}function Kt(){}var gn=(s,h,f)=>Object.defineProperty(s,h,{value:f,writable:!0,configurable:!0}),K={arr:Array.isArray,obj:s=>!!s&&s.constructor.name==="Object",fun:s=>typeof s=="function",str:s=>typeof s=="string",num:s=>typeof s=="number",und:s=>s===void 0};function Ee(s,h){if(K.arr(s)){if(!K.arr(h)||s.length!==h.length)return!1;for(let f=0;f<s.length;f++)if(s[f]!==h[f])return!1;return!0}return s===h}var ce=(s,h)=>s.forEach(h);function Se(s,h,f){if(K.arr(s)){for(let y=0;y<s.length;y++)h.call(f,s[y],`${y}`);return}for(const y in s)s.hasOwnProperty(y)&&h.call(f,s[y],y)}var me=s=>K.und(s)?[]:K.arr(s)?s:[s];function Qe(s,h){if(s.size){const f=Array.from(s);s.clear(),ce(f,h)}}var $e=(s,...h)=>Qe(s,f=>f(...h)),_r=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Tr,vi,De=null,gi=!1,Er=Kt,mn=s=>{s.to&&(vi=s.to),s.now&&(ne.now=s.now),s.colors!==void 0&&(De=s.colors),s.skipAnimation!=null&&(gi=s.skipAnimation),s.createStringInterpolator&&(Tr=s.createStringInterpolator),s.requestAnimationFrame&&ne.use(s.requestAnimationFrame),s.batchedUpdates&&(ne.batchedUpdates=s.batchedUpdates),s.willAdvance&&(Er=s.willAdvance),s.frameLoop&&(ne.frameLoop=s.frameLoop)},Ke=new Set,ge=[],jt=[],St=0,Dt={get idle(){return!Ke.size&&!ge.length},start(s){St>s.priority?(Ke.add(s),ne.onStart(yn)):(mi(s),ne(Zt))},advance:Zt,sort(s){if(St)ne.onFrame(()=>Dt.sort(s));else{const h=ge.indexOf(s);~h&&(ge.splice(h,1),yi(s))}},clear(){ge=[],Ke.clear()}};function yn(){Ke.forEach(mi),Ke.clear(),ne(Zt)}function mi(s){ge.includes(s)||yi(s)}function yi(s){ge.splice(xn(ge,h=>h.priority>s.priority),0,s)}function Zt(s){const h=jt;for(let f=0;f<ge.length;f++){const y=ge[f];St=y.priority,y.idle||(Er(y),y.advance(s),y.idle||h.push(y))}return St=0,jt=ge,jt.length=0,ge=h,ge.length>0}function xn(s,h){const f=s.findIndex(h);return f<0?s.length:f}var bn=(s,h,f)=>Math.min(Math.max(f,s),h),_n={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},be="[-+]?\\d*\\.?\\d+",At=be+"%";function Bt(...s){return"\\(\\s*("+s.join(")\\s*,\\s*(")+")\\s*\\)"}var Tn=new RegExp("rgb"+Bt(be,be,be)),En=new RegExp("rgba"+Bt(be,be,be,be)),wn=new RegExp("hsl"+Bt(be,At,At)),Sn=new RegExp("hsla"+Bt(be,At,At,be)),An=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Cn=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Rn=/^#([0-9a-fA-F]{6})$/,Mn=/^#([0-9a-fA-F]{8})$/;function Pn(s){let h;return typeof s=="number"?s>>>0===s&&s>=0&&s<=4294967295?s:null:(h=Rn.exec(s))?parseInt(h[1]+"ff",16)>>>0:De&&De[s]!==void 0?De[s]:(h=Tn.exec(s))?(je(h[1])<<24|je(h[2])<<16|je(h[3])<<8|255)>>>0:(h=En.exec(s))?(je(h[1])<<24|je(h[2])<<16|je(h[3])<<8|Or(h[4]))>>>0:(h=An.exec(s))?parseInt(h[1]+h[1]+h[2]+h[2]+h[3]+h[3]+"ff",16)>>>0:(h=Mn.exec(s))?parseInt(h[1],16)>>>0:(h=Cn.exec(s))?parseInt(h[1]+h[1]+h[2]+h[2]+h[3]+h[3]+h[4]+h[4],16)>>>0:(h=wn.exec(s))?(Mr(Pr(h[1]),mt(h[2]),mt(h[3]))|255)>>>0:(h=Sn.exec(s))?(Mr(Pr(h[1]),mt(h[2]),mt(h[3]))|Or(h[4]))>>>0:null}function zt(s,h,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?s+(h-s)*6*f:f<1/2?h:f<2/3?s+(h-s)*(2/3-f)*6:s}function Mr(s,h,f){const y=f<.5?f*(1+h):f+h-f*h,e=2*f-y,u=zt(e,y,s+1/3),a=zt(e,y,s),n=zt(e,y,s-1/3);return Math.round(u*255)<<24|Math.round(a*255)<<16|Math.round(n*255)<<8}function je(s){const h=parseInt(s,10);return h<0?0:h>255?255:h}function Pr(s){return(parseFloat(s)%360+360)%360/360}function Or(s){const h=parseFloat(s);return h<0?0:h>1?255:Math.round(h*255)}function mt(s){const h=parseFloat(s);return h<0?0:h>100?1:h/100}function Fr(s){let h=Pn(s);if(h===null)return s;h=h||0;const f=(h&4278190080)>>>24,y=(h&16711680)>>>16,e=(h&65280)>>>8,u=(h&255)/255;return`rgba(${f}, ${y}, ${e}, ${u})`}var et=(s,h,f)=>{if(K.fun(s))return s;if(K.arr(s))return et({range:s,output:h,extrapolate:f});if(K.str(s.output[0]))return Tr(s);const y=s,e=y.output,u=y.range||[0,1],a=y.extrapolateLeft||y.extrapolate||"extend",n=y.extrapolateRight||y.extrapolate||"extend",t=y.easing||(i=>i);return i=>{const r=Fn(i,u);return On(i,u[r],u[r+1],e[r],e[r+1],t,a,n,y.map)}};function On(s,h,f,y,e,u,a,n,t){let i=t?t(s):s;if(i<h){if(a==="identity")return i;a==="clamp"&&(i=h)}if(i>f){if(n==="identity")return i;n==="clamp"&&(i=f)}return y===e?y:h===f?s<=h?y:e:(h===-1/0?i=-i:f===1/0?i=i-h:i=(i-h)/(f-h),i=u(i),y===-1/0?i=-i:e===1/0?i=i+y:i=i*(e-y)+y,i)}function Fn(s,h){for(var f=1;f<h.length-1&&!(h[f]>=s);++f);return f-1}var Dn=(s,h="end")=>f=>{f=h==="end"?Math.min(f,.999):Math.max(f,.001);const y=f*s,e=h==="end"?Math.floor(y):Math.ceil(y);return bn(0,1,e/s)},Ct=1.70158,yt=Ct*1.525,Dr=Ct+1,Br=2*Math.PI/3,Lr=2*Math.PI/4.5,xt=s=>s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375,Bn={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>1-(1-s)*(1-s),easeInOutQuad:s=>s<.5?2*s*s:1-Math.pow(-2*s+2,2)/2,easeInCubic:s=>s*s*s,easeOutCubic:s=>1-Math.pow(1-s,3),easeInOutCubic:s=>s<.5?4*s*s*s:1-Math.pow(-2*s+2,3)/2,easeInQuart:s=>s*s*s*s,easeOutQuart:s=>1-Math.pow(1-s,4),easeInOutQuart:s=>s<.5?8*s*s*s*s:1-Math.pow(-2*s+2,4)/2,easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>1-Math.pow(1-s,5),easeInOutQuint:s=>s<.5?16*s*s*s*s*s:1-Math.pow(-2*s+2,5)/2,easeInSine:s=>1-Math.cos(s*Math.PI/2),easeOutSine:s=>Math.sin(s*Math.PI/2),easeInOutSine:s=>-(Math.cos(Math.PI*s)-1)/2,easeInExpo:s=>s===0?0:Math.pow(2,10*s-10),easeOutExpo:s=>s===1?1:1-Math.pow(2,-10*s),easeInOutExpo:s=>s===0?0:s===1?1:s<.5?Math.pow(2,20*s-10)/2:(2-Math.pow(2,-20*s+10))/2,easeInCirc:s=>1-Math.sqrt(1-Math.pow(s,2)),easeOutCirc:s=>Math.sqrt(1-Math.pow(s-1,2)),easeInOutCirc:s=>s<.5?(1-Math.sqrt(1-Math.pow(2*s,2)))/2:(Math.sqrt(1-Math.pow(-2*s+2,2))+1)/2,easeInBack:s=>Dr*s*s*s-Ct*s*s,easeOutBack:s=>1+Dr*Math.pow(s-1,3)+Ct*Math.pow(s-1,2),easeInOutBack:s=>s<.5?Math.pow(2*s,2)*((yt+1)*2*s-yt)/2:(Math.pow(2*s-2,2)*((yt+1)*(s*2-2)+yt)+2)/2,easeInElastic:s=>s===0?0:s===1?1:-Math.pow(2,10*s-10)*Math.sin((s*10-10.75)*Br),easeOutElastic:s=>s===0?0:s===1?1:Math.pow(2,-10*s)*Math.sin((s*10-.75)*Br)+1,easeInOutElastic:s=>s===0?0:s===1?1:s<.5?-(Math.pow(2,20*s-10)*Math.sin((20*s-11.125)*Lr))/2:Math.pow(2,-20*s+10)*Math.sin((20*s-11.125)*Lr)/2+1,easeInBounce:s=>1-xt(1-s),easeOutBounce:xt,easeInOutBounce:s=>s<.5?(1-xt(1-2*s))/2:(1+xt(2*s-1))/2,steps:Dn},tt=Symbol.for("FluidValue.get"),We=Symbol.for("FluidValue.observers"),ve=s=>!!(s&&s[tt]),pe=s=>s&&s[tt]?s[tt]():s,Ir=s=>s[We]||null;function Ln(s,h){s.eventObserved?s.eventObserved(h):s(h)}function rt(s,h){const f=s[We];f&&f.forEach(y=>{Ln(y,h)})}var xi=class{constructor(s){if(!s&&!(s=this.get))throw Error("Unknown getter");In(this,s)}},In=(s,h)=>bi(s,tt,h);function dt(s,h){if(s[tt]){let f=s[We];f||bi(s,We,f=new Set),f.has(h)||(f.add(h),s.observerAdded&&s.observerAdded(f.size,h))}return h}function it(s,h){const f=s[We];if(f&&f.has(h)){const y=f.size-1;y?f.delete(h):s[We]=null,s.observerRemoved&&s.observerRemoved(y,h)}}var bi=(s,h,f)=>Object.defineProperty(s,h,{value:f,writable:!0,configurable:!0}),_t=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Nn=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Nr=new RegExp(`(${_t.source})(%|[a-z]+)`,"i"),kn=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Lt=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,_i=s=>{const[h,f]=Un(s);if(!h||_r())return s;const y=window.getComputedStyle(document.documentElement).getPropertyValue(h);if(y)return y.trim();if(f&&f.startsWith("--")){const e=window.getComputedStyle(document.documentElement).getPropertyValue(f);return e||s}else{if(f&&Lt.test(f))return _i(f);if(f)return f}return s},Un=s=>{const h=Lt.exec(s);if(!h)return[,];const[,f,y]=h;return[f,y]},Xt,jn=(s,h,f,y,e)=>`rgba(${Math.round(h)}, ${Math.round(f)}, ${Math.round(y)}, ${e})`,Ti=s=>{Xt||(Xt=De?new RegExp(`(${Object.keys(De).join("|")})(?!\\w)`,"g"):/^\b$/);const h=s.output.map(u=>pe(u).replace(Lt,_i).replace(Nn,Fr).replace(Xt,Fr)),f=h.map(u=>u.match(_t).map(Number)),e=f[0].map((u,a)=>f.map(n=>{if(!(a in n))throw Error('The arity of each "output" value must be equal');return n[a]})).map(u=>et({...s,output:u}));return u=>{var t;const a=!Nr.test(h[0])&&((t=h.find(i=>Nr.test(i)))==null?void 0:t.replace(_t,""));let n=0;return h[0].replace(_t,()=>`${e[n++](u)}${a||""}`).replace(kn,jn)}},Ei="react-spring: ",wi=s=>{const h=s;let f=!1;if(typeof h!="function")throw new TypeError(`${Ei}once requires a function parameter`);return(...y)=>{f||(h(...y),f=!0)}},zn=wi(console.warn);function Xn(){zn(`${Ei}The "interpolate" function is deprecated in v9 (use "to" instead)`)}wi(console.warn);function It(s){return K.str(s)&&(s[0]=="#"||/\d/.test(s)||!_r()&&Lt.test(s)||s in(De||{}))}var Si=_r()?te.useEffect:te.useLayoutEffect,Gn=()=>{const s=te.useRef(!1);return Si(()=>(s.current=!0,()=>{s.current=!1}),[]),s};function Yn(){const s=te.useState()[1],h=Gn();return()=>{h.current&&s(Math.random())}}function Wn(s,h){const[f]=te.useState(()=>({inputs:h,result:s()})),y=te.useRef(),e=y.current;let u=e;return u?h&&u.inputs&&Hn(h,u.inputs)||(u={inputs:h,result:s()}):u=f,te.useEffect(()=>{y.current=u,e==f&&(f.inputs=f.result=void 0)},[u]),u.result}function Hn(s,h){if(s.length!==h.length)return!1;for(let f=0;f<s.length;f++)if(s[f]!==h[f])return!1;return!0}var Vn=s=>te.useEffect(s,qn),qn=[],nt=Symbol.for("Animated:node"),$n=s=>!!s&&s[nt]===s,Te=s=>s&&s[nt],wr=(s,h)=>gn(s,nt,h),Nt=s=>s&&s[nt]&&s[nt].getPayload(),Ai=class{constructor(){wr(this,this)}getPayload(){return this.payload||[]}},pt=class extends Ai{constructor(s){super(),this._value=s,this.done=!0,this.durationProgress=0,K.num(this._value)&&(this.lastPosition=this._value)}static create(s){return new pt(s)}getPayload(){return[this]}getValue(){return this._value}setValue(s,h){return K.num(s)&&(this.lastPosition=s,h&&(s=Math.round(s/h)*h,this.done&&(this.lastPosition=s))),this._value===s?!1:(this._value=s,!0)}reset(){const{done:s}=this;this.done=!1,K.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,s&&(this.lastVelocity=null),this.v0=null)}},ot=class extends pt{constructor(s){super(0),this._string=null,this._toString=et({output:[s,s]})}static create(s){return new ot(s)}getValue(){const s=this._string;return s??(this._string=this._toString(this._value))}setValue(s){if(K.str(s)){if(s==this._string)return!1;this._string=s,this._value=1}else if(super.setValue(s))this._string=null;else return!1;return!0}reset(s){s&&(this._toString=et({output:[this.getValue(),s]})),this._value=0,super.reset()}},Rt={dependencies:null},kt=class extends Ai{constructor(s){super(),this.source=s,this.setValue(s)}getValue(s){const h={};return Se(this.source,(f,y)=>{$n(f)?h[y]=f.getValue(s):ve(f)?h[y]=pe(f):s||(h[y]=f)}),h}setValue(s){this.source=s,this.payload=this._makePayload(s)}reset(){this.payload&&ce(this.payload,s=>s.reset())}_makePayload(s){if(s){const h=new Set;return Se(s,this._addToPayload,h),Array.from(h)}}_addToPayload(s){Rt.dependencies&&ve(s)&&Rt.dependencies.add(s);const h=Nt(s);h&&ce(h,f=>this.add(f))}},Ci=class extends kt{constructor(s){super(s)}static create(s){return new Ci(s)}getValue(){return this.source.map(s=>s.getValue())}setValue(s){const h=this.getPayload();return s.length==h.length?h.map((f,y)=>f.setValue(s[y])).some(Boolean):(super.setValue(s.map(Qn)),!0)}};function Qn(s){return(It(s)?ot:pt).create(s)}function Jt(s){const h=Te(s);return h?h.constructor:K.arr(s)?Ci:It(s)?ot:pt}var kr=(s,h)=>{const f=!K.fun(s)||s.prototype&&s.prototype.isReactComponent;return te.forwardRef((y,e)=>{const u=te.useRef(null),a=f&&te.useCallback(l=>{u.current=Jn(e,l)},[e]),[n,t]=Zn(y,h),i=Yn(),r=()=>{const l=u.current;if(f&&!l)return;(l?h.applyAnimatedValues(l,n.getValue(!0)):!1)===!1&&i()},o=new Kn(r,t),c=te.useRef();Si(()=>(c.current=o,ce(t,l=>dt(l,o)),()=>{c.current&&(ce(c.current.deps,l=>it(l,c.current)),ne.cancel(c.current.update))})),te.useEffect(r,[]),Vn(()=>()=>{const l=c.current;ce(l.deps,p=>it(p,l))});const d=h.getComponentProps(n.getValue());return te.createElement(s,{...d,ref:a})})},Kn=class{constructor(s,h){this.update=s,this.deps=h}eventObserved(s){s.type=="change"&&ne.write(this.update)}};function Zn(s,h){const f=new Set;return Rt.dependencies=f,s.style&&(s={...s,style:h.createAnimatedStyle(s.style)}),s=new kt(s),Rt.dependencies=null,[s,f]}function Jn(s,h){return s&&(K.fun(s)?s(h):s.current=h),h}var Ur=Symbol.for("AnimatedComponent"),eo=(s,{applyAnimatedValues:h=()=>!1,createAnimatedStyle:f=e=>new kt(e),getComponentProps:y=e=>e}={})=>{const e={applyAnimatedValues:h,createAnimatedStyle:f,getComponentProps:y},u=a=>{const n=jr(a)||"Anonymous";return K.str(a)?a=u[a]||(u[a]=kr(a,e)):a=a[Ur]||(a[Ur]=kr(a,e)),a.displayName=`Animated(${n})`,a};return Se(s,(a,n)=>{K.arr(s)&&(n=jr(a)),u[n]=u(a)}),{animated:u}},jr=s=>K.str(s)?s:s&&K.str(s.displayName)?s.displayName:K.fun(s)&&s.name||null;function Ne(s,...h){return K.fun(s)?s(...h):s}var Ze=(s,h)=>s===!0||!!(h&&s&&(K.fun(s)?s(h):me(s).includes(h))),Ri=(s,h)=>K.obj(s)?h&&s[h]:s,Mi=(s,h)=>s.default===!0?s[h]:s.default?s.default[h]:void 0,to=s=>s,Pi=(s,h=to)=>{let f=ro;s.default&&s.default!==!0&&(s=s.default,f=Object.keys(s));const y={};for(const e of f){const u=h(s[e],e);K.und(u)||(y[e]=u)}return y},ro=["config","onProps","onStart","onChange","onPause","onResume","onRest"],io={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function no(s){const h={};let f=0;if(Se(s,(y,e)=>{io[e]||(h[e]=y,f++)}),f)return h}function Oi(s){const h=no(s);if(h){const f={to:h};return Se(s,(y,e)=>e in h||(f[e]=y)),f}return{...s}}function st(s){return s=pe(s),K.arr(s)?s.map(st):It(s)?_e.createStringInterpolator({range:[0,1],output:[s,s]})(1):s}function er(s){return K.fun(s)||K.arr(s)&&K.obj(s[0])}var Fi={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},tr={...Fi.default,mass:1,damping:1,easing:Bn.linear,clamp:!1},oo=class{constructor(){this.velocity=0,Object.assign(this,tr)}};function so(s,h,f){f&&(f={...f},zr(f,h),h={...f,...h}),zr(s,h),Object.assign(s,h);for(const a in tr)s[a]==null&&(s[a]=tr[a]);let{frequency:y,damping:e}=s;const{mass:u}=s;return K.und(y)||(y<.01&&(y=.01),e<0&&(e=0),s.tension=Math.pow(2*Math.PI/y,2)*u,s.friction=4*Math.PI*e*u/y),s}function zr(s,h){if(!K.und(h.decay))s.duration=void 0;else{const f=!K.und(h.tension)||!K.und(h.friction);(f||!K.und(h.frequency)||!K.und(h.damping)||!K.und(h.mass))&&(s.duration=void 0,s.decay=void 0),f&&(s.frequency=void 0)}}var Xr=[],ao=class{constructor(){this.changed=!1,this.values=Xr,this.toValues=null,this.fromValues=Xr,this.config=new oo,this.immediate=!1}};function Di(s,{key:h,props:f,defaultProps:y,state:e,actions:u}){return new Promise((a,n)=>{let t,i,r=Ze(f.cancel??(y==null?void 0:y.cancel),h);if(r)d();else{K.und(f.pause)||(e.paused=Ze(f.pause,h));let l=y==null?void 0:y.pause;l!==!0&&(l=e.paused||Ze(l,h)),t=Ne(f.delay||0,h),l?(e.resumeQueue.add(c),u.pause()):(u.resume(),c())}function o(){e.resumeQueue.add(c),e.timeouts.delete(i),i.cancel(),t=i.time-ne.now()}function c(){t>0&&!_e.skipAnimation?(e.delayed=!0,i=ne.setTimeout(d,t),e.pauseQueue.add(o),e.timeouts.add(i)):d()}function d(){e.delayed&&(e.delayed=!1),e.pauseQueue.delete(o),e.timeouts.delete(i),s<=(e.cancelId||0)&&(r=!0);try{u.start({...f,callId:s,cancel:r},a)}catch(l){n(l)}}})}var Sr=(s,h)=>h.length==1?h[0]:h.some(f=>f.cancelled)?Ge(s.get()):h.every(f=>f.noop)?Bi(s.get()):ye(s.get(),h.every(f=>f.finished)),Bi=s=>({value:s,noop:!0,finished:!0,cancelled:!1}),ye=(s,h,f=!1)=>({value:s,finished:h,cancelled:f}),Ge=s=>({value:s,cancelled:!0,finished:!1});function Li(s,h,f,y){const{callId:e,parentId:u,onRest:a}=h,{asyncTo:n,promise:t}=f;return!u&&s===n&&!h.reset?t:f.promise=(async()=>{f.asyncId=e,f.asyncTo=s;const i=Pi(h,(v,g)=>g==="onRest"?void 0:v);let r,o;const c=new Promise((v,g)=>(r=v,o=g)),d=v=>{const g=e<=(f.cancelId||0)&&Ge(y)||e!==f.asyncId&&ye(y,!1);if(g)throw v.result=g,o(v),v},l=(v,g)=>{const m=new Gr,T=new Yr;return(async()=>{if(_e.skipAnimation)throw at(f),T.result=ye(y,!1),o(T),T;d(m);const A=K.obj(v)?{...v}:{...g,to:v};A.parentId=e,Se(i,(F,k)=>{K.und(A[k])&&(A[k]=F)});const P=await y.start(A);return d(m),f.paused&&await new Promise(F=>{f.resumeQueue.add(F)}),P})()};let p;if(_e.skipAnimation)return at(f),ye(y,!1);try{let v;K.arr(s)?v=(async g=>{for(const m of g)await l(m)})(s):v=Promise.resolve(s(l,y.stop.bind(y))),await Promise.all([v.then(r),c]),p=ye(y.get(),!0,!1)}catch(v){if(v instanceof Gr)p=v.result;else if(v instanceof Yr)p=v.result;else throw v}finally{e==f.asyncId&&(f.asyncId=u,f.asyncTo=u?n:void 0,f.promise=u?t:void 0)}return K.fun(a)&&ne.batchedUpdates(()=>{a(p,y,y.item)}),p})()}function at(s,h){Qe(s.timeouts,f=>f.cancel()),s.pauseQueue.clear(),s.resumeQueue.clear(),s.asyncId=s.asyncTo=s.promise=void 0,h&&(s.cancelId=h)}var Gr=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Yr=class extends Error{constructor(){super("SkipAnimationSignal")}},rr=s=>s instanceof Ar,ho=1,Ar=class extends xi{constructor(){super(...arguments),this.id=ho++,this._priority=0}get priority(){return this._priority}set priority(s){this._priority!=s&&(this._priority=s,this._onPriorityChange(s))}get(){const s=Te(this);return s&&s.getValue()}to(...s){return _e.to(this,s)}interpolate(...s){return Xn(),_e.to(this,s)}toJSON(){return this.get()}observerAdded(s){s==1&&this._attach()}observerRemoved(s){s==0&&this._detach()}_attach(){}_detach(){}_onChange(s,h=!1){rt(this,{type:"change",parent:this,value:s,idle:h})}_onPriorityChange(s){this.idle||Dt.sort(this),rt(this,{type:"priority",parent:this,priority:s})}},Ue=Symbol.for("SpringPhase"),Ii=1,ir=2,nr=4,Gt=s=>(s[Ue]&Ii)>0,Re=s=>(s[Ue]&ir)>0,He=s=>(s[Ue]&nr)>0,Wr=(s,h)=>h?s[Ue]|=ir|Ii:s[Ue]&=~ir,Hr=(s,h)=>h?s[Ue]|=nr:s[Ue]&=~nr,uo=class extends Ar{constructor(s,h){if(super(),this.animation=new ao,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!K.und(s)||!K.und(h)){const f=K.obj(s)?{...s}:{...h,from:s};K.und(f.default)&&(f.default=!0),this.start(f)}}get idle(){return!(Re(this)||this._state.asyncTo)||He(this)}get goal(){return pe(this.animation.to)}get velocity(){const s=Te(this);return s instanceof pt?s.lastVelocity||0:s.getPayload().map(h=>h.lastVelocity||0)}get hasAnimated(){return Gt(this)}get isAnimating(){return Re(this)}get isPaused(){return He(this)}get isDelayed(){return this._state.delayed}advance(s){let h=!0,f=!1;const y=this.animation;let{toValues:e}=y;const{config:u}=y,a=Nt(y.to);!a&&ve(y.to)&&(e=me(pe(y.to))),y.values.forEach((i,r)=>{if(i.done)return;const o=i.constructor==ot?1:a?a[r].lastPosition:e[r];let c=y.immediate,d=o;if(!c){if(d=i.lastPosition,u.tension<=0){i.done=!0;return}let l=i.elapsedTime+=s;const p=y.fromValues[r],v=i.v0!=null?i.v0:i.v0=K.arr(u.velocity)?u.velocity[r]:u.velocity;let g;const m=u.precision||(p==o?.005:Math.min(1,Math.abs(o-p)*.001));if(K.und(u.duration))if(u.decay){const T=u.decay===!0?.998:u.decay,A=Math.exp(-(1-T)*l);d=p+v/(1-T)*(1-A),c=Math.abs(i.lastPosition-d)<=m,g=v*A}else{g=i.lastVelocity==null?v:i.lastVelocity;const T=u.restVelocity||m/10,A=u.clamp?0:u.bounce,P=!K.und(A),F=p==o?i.v0>0:p<o;let k,I=!1;const U=1,X=Math.ceil(s/U);for(let z=0;z<X&&(k=Math.abs(g)>T,!(!k&&(c=Math.abs(o-d)<=m,c)));++z){P&&(I=d==o||d>o==F,I&&(g=-g*A,d=o));const x=-u.tension*1e-6*(d-o),w=-u.friction*.001*g,_=(x+w)/u.mass;g=g+_*U,d=d+g*U}}else{let T=1;u.duration>0&&(this._memoizedDuration!==u.duration&&(this._memoizedDuration=u.duration,i.durationProgress>0&&(i.elapsedTime=u.duration*i.durationProgress,l=i.elapsedTime+=s)),T=(u.progress||0)+l/this._memoizedDuration,T=T>1?1:T<0?0:T,i.durationProgress=T),d=p+u.easing(T)*(o-p),g=(d-i.lastPosition)/s,c=T==1}i.lastVelocity=g,Number.isNaN(d)&&(console.warn("Got NaN while animating:",this),c=!0)}a&&!a[r].done&&(c=!1),c?i.done=!0:h=!1,i.setValue(d,u.round)&&(f=!0)});const n=Te(this),t=n.getValue();if(h){const i=pe(y.to);(t!==i||f)&&!u.decay?(n.setValue(i),this._onChange(i)):f&&u.decay&&this._onChange(t),this._stop()}else f&&this._onChange(t)}set(s){return ne.batchedUpdates(()=>{this._stop(),this._focus(s),this._set(s)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Re(this)){const{to:s,config:h}=this.animation;ne.batchedUpdates(()=>{this._onStart(),h.decay||this._set(s,!1),this._stop()})}return this}update(s){return(this.queue||(this.queue=[])).push(s),this}start(s,h){let f;return K.und(s)?(f=this.queue||[],this.queue=[]):f=[K.obj(s)?s:{...h,to:s}],Promise.all(f.map(y=>this._update(y))).then(y=>Sr(this,y))}stop(s){const{to:h}=this.animation;return this._focus(this.get()),at(this._state,s&&this._lastCallId),ne.batchedUpdates(()=>this._stop(h,s)),this}reset(){this._update({reset:!0})}eventObserved(s){s.type=="change"?this._start():s.type=="priority"&&(this.priority=s.priority+1)}_prepareNode(s){const h=this.key||"";let{to:f,from:y}=s;f=K.obj(f)?f[h]:f,(f==null||er(f))&&(f=void 0),y=K.obj(y)?y[h]:y,y==null&&(y=void 0);const e={to:f,from:y};return Gt(this)||(s.reverse&&([f,y]=[y,f]),y=pe(y),K.und(y)?Te(this)||this._set(f):this._set(y)),e}_update({...s},h){const{key:f,defaultProps:y}=this;s.default&&Object.assign(y,Pi(s,(a,n)=>/^on/.test(n)?Ri(a,f):a)),qr(this,s,"onProps"),qe(this,"onProps",s,this);const e=this._prepareNode(s);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const u=this._state;return Di(++this._lastCallId,{key:f,props:s,defaultProps:y,state:u,actions:{pause:()=>{He(this)||(Hr(this,!0),$e(u.pauseQueue),qe(this,"onPause",ye(this,Ve(this,this.animation.to)),this))},resume:()=>{He(this)&&(Hr(this,!1),Re(this)&&this._resume(),$e(u.resumeQueue),qe(this,"onResume",ye(this,Ve(this,this.animation.to)),this))},start:this._merge.bind(this,e)}}).then(a=>{if(s.loop&&a.finished&&!(h&&a.noop)){const n=Ni(s);if(n)return this._update(n,!0)}return a})}_merge(s,h,f){if(h.cancel)return this.stop(!0),f(Ge(this));const y=!K.und(s.to),e=!K.und(s.from);if(y||e)if(h.callId>this._lastToId)this._lastToId=h.callId;else return f(Ge(this));const{key:u,defaultProps:a,animation:n}=this,{to:t,from:i}=n;let{to:r=t,from:o=i}=s;e&&!y&&(!h.default||K.und(r))&&(r=o),h.reverse&&([r,o]=[o,r]);const c=!Ee(o,i);c&&(n.from=o),o=pe(o);const d=!Ee(r,t);d&&this._focus(r);const l=er(h.to),{config:p}=n,{decay:v,velocity:g}=p;(y||e)&&(p.velocity=0),h.config&&!l&&so(p,Ne(h.config,u),h.config!==a.config?Ne(a.config,u):void 0);let m=Te(this);if(!m||K.und(r))return f(ye(this,!0));const T=K.und(h.reset)?e&&!h.default:!K.und(o)&&Ze(h.reset,u),A=T?o:this.get(),P=st(r),F=K.num(P)||K.arr(P)||It(P),k=!l&&(!F||Ze(a.immediate||h.immediate,u));if(d){const z=Jt(r);if(z!==m.constructor)if(k)m=this._set(P);else throw Error(`Cannot animate between ${m.constructor.name} and ${z.name}, as the "to" prop suggests`)}const I=m.constructor;let U=ve(r),X=!1;if(!U){const z=T||!Gt(this)&&c;(d||z)&&(X=Ee(st(A),P),U=!X),(!Ee(n.immediate,k)&&!k||!Ee(p.decay,v)||!Ee(p.velocity,g))&&(U=!0)}if(X&&Re(this)&&(n.changed&&!T?U=!0:U||this._stop(t)),!l&&((U||ve(t))&&(n.values=m.getPayload(),n.toValues=ve(r)?null:I==ot?[1]:me(P)),n.immediate!=k&&(n.immediate=k,!k&&!T&&this._set(t)),U)){const{onRest:z}=n;ce(lo,w=>qr(this,h,w));const x=ye(this,Ve(this,t));$e(this._pendingCalls,x),this._pendingCalls.add(f),n.changed&&ne.batchedUpdates(()=>{var w;n.changed=!T,z==null||z(x,this),T?Ne(a.onRest,x):(w=n.onStart)==null||w.call(n,x,this)})}T&&this._set(A),l?f(Li(h.to,h,this._state,this)):U?this._start():Re(this)&&!d?this._pendingCalls.add(f):f(Bi(A))}_focus(s){const h=this.animation;s!==h.to&&(Ir(this)&&this._detach(),h.to=s,Ir(this)&&this._attach())}_attach(){let s=0;const{to:h}=this.animation;ve(h)&&(dt(h,this),rr(h)&&(s=h.priority+1)),this.priority=s}_detach(){const{to:s}=this.animation;ve(s)&&it(s,this)}_set(s,h=!0){const f=pe(s);if(!K.und(f)){const y=Te(this);if(!y||!Ee(f,y.getValue())){const e=Jt(f);!y||y.constructor!=e?wr(this,e.create(f)):y.setValue(f),y&&ne.batchedUpdates(()=>{this._onChange(f,h)})}}return Te(this)}_onStart(){const s=this.animation;s.changed||(s.changed=!0,qe(this,"onStart",ye(this,Ve(this,s.to)),this))}_onChange(s,h){h||(this._onStart(),Ne(this.animation.onChange,s,this)),Ne(this.defaultProps.onChange,s,this),super._onChange(s,h)}_start(){const s=this.animation;Te(this).reset(pe(s.to)),s.immediate||(s.fromValues=s.values.map(h=>h.lastPosition)),Re(this)||(Wr(this,!0),He(this)||this._resume())}_resume(){_e.skipAnimation?this.finish():Dt.start(this)}_stop(s,h){if(Re(this)){Wr(this,!1);const f=this.animation;ce(f.values,e=>{e.done=!0}),f.toValues&&(f.onChange=f.onPause=f.onResume=void 0),rt(this,{type:"idle",parent:this});const y=h?Ge(this.get()):ye(this.get(),Ve(this,s??f.to));$e(this._pendingCalls,y),f.changed&&(f.changed=!1,qe(this,"onRest",y,this))}}};function Ve(s,h){const f=st(h),y=st(s.get());return Ee(y,f)}function Ni(s,h=s.loop,f=s.to){const y=Ne(h);if(y){const e=y!==!0&&Oi(y),u=(e||s).reverse,a=!e||e.reset;return or({...s,loop:h,default:!1,pause:void 0,to:!u||er(f)?f:void 0,from:a?s.from:void 0,reset:a,...e})}}function or(s){const{to:h,from:f}=s=Oi(s),y=new Set;return K.obj(h)&&Vr(h,y),K.obj(f)&&Vr(f,y),s.keys=y.size?Array.from(y):null,s}function Vr(s,h){Se(s,(f,y)=>f!=null&&h.add(y))}var lo=["onStart","onRest","onChange","onPause","onResume"];function qr(s,h,f){s.animation[f]=h[f]!==Mi(h,f)?Ri(h[f],s.key):void 0}function qe(s,h,...f){var y,e,u,a;(e=(y=s.animation)[h])==null||e.call(y,...f),(a=(u=s.defaultProps)[h])==null||a.call(u,...f)}var co=["onStart","onChange","onRest"],po=1,ki=class{constructor(s,h){this.id=po++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),h&&(this._flush=h),s&&this.start({default:!0,...s})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(s=>s.idle&&!s.isDelayed&&!s.isPaused)}get item(){return this._item}set item(s){this._item=s}get(){const s={};return this.each((h,f)=>s[f]=h.get()),s}set(s){for(const h in s){const f=s[h];K.und(f)||this.springs[h].set(f)}}update(s){return s&&this.queue.push(or(s)),this}start(s){let{queue:h}=this;return s?h=me(s).map(or):this.queue=[],this._flush?this._flush(this,h):(ji(this,h),fo(this,h))}stop(s,h){if(s!==!!s&&(h=s),h){const f=this.springs;ce(me(h),y=>f[y].stop(!!s))}else at(this._state,this._lastAsyncId),this.each(f=>f.stop(!!s));return this}pause(s){if(K.und(s))this.start({pause:!0});else{const h=this.springs;ce(me(s),f=>h[f].pause())}return this}resume(s){if(K.und(s))this.start({pause:!1});else{const h=this.springs;ce(me(s),f=>h[f].resume())}return this}each(s){Se(this.springs,s)}_onFrame(){const{onStart:s,onChange:h,onRest:f}=this._events,y=this._active.size>0,e=this._changed.size>0;(y&&!this._started||e&&!this._started)&&(this._started=!0,Qe(s,([n,t])=>{t.value=this.get(),n(t,this,this._item)}));const u=!y&&this._started,a=e||u&&f.size?this.get():null;e&&h.size&&Qe(h,([n,t])=>{t.value=a,n(t,this,this._item)}),u&&(this._started=!1,Qe(f,([n,t])=>{t.value=a,n(t,this,this._item)}))}eventObserved(s){if(s.type=="change")this._changed.add(s.parent),s.idle||this._active.add(s.parent);else if(s.type=="idle")this._active.delete(s.parent);else return;ne.onFrame(this._onFrame)}};function fo(s,h){return Promise.all(h.map(f=>Ui(s,f))).then(f=>Sr(s,f))}async function Ui(s,h,f){const{keys:y,to:e,from:u,loop:a,onRest:n,onResolve:t}=h,i=K.obj(h.default)&&h.default;a&&(h.loop=!1),e===!1&&(h.to=null),u===!1&&(h.from=null);const r=K.arr(e)||K.fun(e)?e:void 0;r?(h.to=void 0,h.onRest=void 0,i&&(i.onRest=void 0)):ce(co,p=>{const v=h[p];if(K.fun(v)){const g=s._events[p];h[p]=({finished:m,cancelled:T})=>{const A=g.get(v);A?(m||(A.finished=!1),T&&(A.cancelled=!0)):g.set(v,{value:null,finished:m||!1,cancelled:T||!1})},i&&(i[p]=h[p])}});const o=s._state;h.pause===!o.paused?(o.paused=h.pause,$e(h.pause?o.pauseQueue:o.resumeQueue)):o.paused&&(h.pause=!0);const c=(y||Object.keys(s.springs)).map(p=>s.springs[p].start(h)),d=h.cancel===!0||Mi(h,"cancel")===!0;(r||d&&o.asyncId)&&c.push(Di(++s._lastAsyncId,{props:h,state:o,actions:{pause:Kt,resume:Kt,start(p,v){d?(at(o,s._lastAsyncId),v(Ge(s))):(p.onRest=n,v(Li(r,p,o,s)))}}})),o.paused&&await new Promise(p=>{o.resumeQueue.add(p)});const l=Sr(s,await Promise.all(c));if(a&&l.finished&&!(f&&l.noop)){const p=Ni(h,a,e);if(p)return ji(s,[p]),Ui(s,p,!0)}return t&&ne.batchedUpdates(()=>t(l,s,s.item)),l}function vo(s,h){const f=new uo;return f.key=s,h&&dt(f,h),f}function go(s,h,f){h.keys&&ce(h.keys,y=>{(s[y]||(s[y]=f(y)))._prepareNode(h)})}function ji(s,h){ce(h,f=>{go(s.springs,f,y=>vo(y,s))})}var Cr=({children:s,...h})=>{const f=te.useContext(Mt),y=h.pause||!!f.pause,e=h.immediate||!!f.immediate;h=Wn(()=>({pause:y,immediate:e}),[y,e]);const{Provider:u}=Mt;return te.createElement(u,{value:h},s)},Mt=mo(Cr,{});Cr.Provider=Mt.Provider;Cr.Consumer=Mt.Consumer;function mo(s,h){return Object.assign(s,te.createContext(h)),s.Provider._context=s,s.Consumer._context=s,s}var yo=class extends Ar{constructor(s,h){super(),this.source=s,this.idle=!0,this._active=new Set,this.calc=et(...h);const f=this._get(),y=Jt(f);wr(this,y.create(f))}advance(s){const h=this._get(),f=this.get();Ee(h,f)||(Te(this).setValue(h),this._onChange(h,this.idle)),!this.idle&&$r(this._active)&&Yt(this)}_get(){const s=K.arr(this.source)?this.source.map(pe):me(pe(this.source));return this.calc(...s)}_start(){this.idle&&!$r(this._active)&&(this.idle=!1,ce(Nt(this),s=>{s.done=!1}),_e.skipAnimation?(ne.batchedUpdates(()=>this.advance()),Yt(this)):Dt.start(this))}_attach(){let s=1;ce(me(this.source),h=>{ve(h)&&dt(h,this),rr(h)&&(h.idle||this._active.add(h),s=Math.max(s,h.priority+1))}),this.priority=s,this._start()}_detach(){ce(me(this.source),s=>{ve(s)&&it(s,this)}),this._active.clear(),Yt(this)}eventObserved(s){s.type=="change"?s.idle?this.advance():(this._active.add(s.parent),this._start()):s.type=="idle"?this._active.delete(s.parent):s.type=="priority"&&(this.priority=me(this.source).reduce((h,f)=>Math.max(h,(rr(f)?f.priority:0)+1),0))}};function xo(s){return s.idle!==!1}function $r(s){return!s.size||Array.from(s).every(xo)}function Yt(s){s.idle||(s.idle=!0,ce(Nt(s),h=>{h.done=!0}),rt(s,{type:"idle",parent:s}))}_e.assign({createStringInterpolator:Ti,to:(s,h)=>new yo(s,h)});var zi=/^--/;function bo(s,h){return h==null||typeof h=="boolean"||h===""?"":typeof h=="number"&&h!==0&&!zi.test(s)&&!(Je.hasOwnProperty(s)&&Je[s])?h+"px":(""+h).trim()}var Qr={};function _o(s,h){if(!s.nodeType||!s.setAttribute)return!1;const f=s.nodeName==="filter"||s.parentNode&&s.parentNode.nodeName==="filter",{style:y,children:e,scrollTop:u,scrollLeft:a,viewBox:n,...t}=h,i=Object.values(t),r=Object.keys(t).map(o=>f||s.hasAttribute(o)?o:Qr[o]||(Qr[o]=o.replace(/([A-Z])/g,c=>"-"+c.toLowerCase())));e!==void 0&&(s.textContent=e);for(const o in y)if(y.hasOwnProperty(o)){const c=bo(o,y[o]);zi.test(o)?s.style.setProperty(o,c):s.style[o]=c}r.forEach((o,c)=>{s.setAttribute(o,i[c])}),u!==void 0&&(s.scrollTop=u),a!==void 0&&(s.scrollLeft=a),n!==void 0&&s.setAttribute("viewBox",n)}var Je={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},To=(s,h)=>s+h.charAt(0).toUpperCase()+h.substring(1),Eo=["Webkit","Ms","Moz","O"];Je=Object.keys(Je).reduce((s,h)=>(Eo.forEach(f=>s[To(f,h)]=s[h]),s),Je);var wo=/^(matrix|translate|scale|rotate|skew)/,So=/^(translate)/,Ao=/^(rotate|skew)/,Wt=(s,h)=>K.num(s)&&s!==0?s+h:s,Tt=(s,h)=>K.arr(s)?s.every(f=>Tt(f,h)):K.num(s)?s===h:parseFloat(s)===h,Co=class extends kt{constructor({x:s,y:h,z:f,...y}){const e=[],u=[];(s||h||f)&&(e.push([s||0,h||0,f||0]),u.push(a=>[`translate3d(${a.map(n=>Wt(n,"px")).join(",")})`,Tt(a,0)])),Se(y,(a,n)=>{if(n==="transform")e.push([a||""]),u.push(t=>[t,t===""]);else if(wo.test(n)){if(delete y[n],K.und(a))return;const t=So.test(n)?"px":Ao.test(n)?"deg":"";e.push(me(a)),u.push(n==="rotate3d"?([i,r,o,c])=>[`rotate3d(${i},${r},${o},${Wt(c,t)})`,Tt(c,0)]:i=>[`${n}(${i.map(r=>Wt(r,t)).join(",")})`,Tt(i,n.startsWith("scale")?1:0)])}}),e.length&&(y.transform=new Ro(e,u)),super(y)}},Ro=class extends xi{constructor(s,h){super(),this.inputs=s,this.transforms=h,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let s="",h=!0;return ce(this.inputs,(f,y)=>{const e=pe(f[0]),[u,a]=this.transforms[y](K.arr(e)?e:f.map(pe));s+=" "+u,h=h&&a}),h?"none":s}observerAdded(s){s==1&&ce(this.inputs,h=>ce(h,f=>ve(f)&&dt(f,this)))}observerRemoved(s){s==0&&ce(this.inputs,h=>ce(h,f=>ve(f)&&it(f,this)))}eventObserved(s){s.type=="change"&&(this._value=null),rt(this,s)}},Mo=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];_e.assign({batchedUpdates:qi.unstable_batchedUpdates,createStringInterpolator:Ti,colors:_n});var Po=eo(Mo,{applyAnimatedValues:_o,createAnimatedStyle:s=>new Co(s),getComponentProps:({scrollTop:s,scrollLeft:h,...f})=>f}),sr=Po.animated,ar=te.createContext(null);function Ht(s){return s?"scrollLeft":"scrollTop"}function hr(s,h){const f=y=>y.type?y.type===te.Fragment:y===te.Fragment;return te.Children.map(s,y=>f(y)?hr(y.props.children,h):h(y))}var Kr="translate3d(0px,0px,0px)",bt="translate(0px,0px)",we=te.memo(te.forwardRef(({horizontal:s,factor:h=1,offset:f=0,speed:y=0,sticky:e,...u},a)=>{const n=te.useContext(ar),t=qt(()=>{let d;if(e)d=(e.start||0)*n.space;else{const l=Math.floor(f)*n.space,p=n.space*f+l*y;d=-(n.current*y)+p}return new ki({space:e?n.space:n.space*h,translate:d})},[]),i=qt(()=>({horizontal:s===void 0||e?n.horizontal:s,sticky:void 0,isSticky:!1,setPosition(d,l,p=!1){if(e)o(d,l);else{const v=Math.floor(f)*d,g=d*f+v*y;t.start({translate:-(l*y)+g,config:n.config,immediate:p})}},setHeight(d,l=!1){t.start({space:e?d:d*h,config:n.config,immediate:l})}}),[]);$t(()=>{if(e){const d=e.start||0,l=e.end||d+1;i.sticky={start:d,end:l}}}),te.useImperativeHandle(a,()=>i);const r=te.useRef(),o=(d,l)=>{const p=i.sticky.start*d,v=i.sticky.end*d,g=l>=p&&l<=v;if(g===i.isSticky)return;i.isSticky=g;const m=r.current;m.style.position=g?"sticky":"absolute",t.set({translate:g?0:l<p?p:v})};$t(()=>{if(n)return n.layers.add(i),n.update(),()=>{n.layers.delete(i),n.update()}});const c=t.springs.translate.to(i.horizontal?d=>`translate3d(${d}px,0,0)`:d=>`translate3d(0,${d}px,0)`);return te.createElement(sr.div,{...u,ref:r,style:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundSize:"auto",backgroundRepeat:"no-repeat",willChange:"transform",[i.horizontal?"height":"width"]:"100%",[i.horizontal?"width":"height"]:t.springs.space,WebkitTransform:c,msTransform:c,transform:c,...u.style}})})),Oo=te.memo(te.forwardRef((s,h)=>{const[f,y]=te.useState(!1),{pages:e,innerStyle:u,config:a=Fi.slow,enabled:n=!0,horizontal:t=!1,children:i,...r}=s,o=te.useRef(),c=te.useRef(),d=qt(()=>({config:a,horizontal:t,busy:!1,space:0,current:0,offset:0,controller:new ki({scroll:0}),layers:new Set,container:o,content:c,update:()=>l(),scrollTo:m=>p(m),stop:()=>d.controller.stop()}),[]);te.useEffect(()=>{d.config=a},[a]),te.useImperativeHandle(h,()=>d);const l=()=>{const m=o.current;if(!m)return;const T=t?"clientWidth":"clientHeight";d.space=m[T];const A=Ht(t);n?d.current=m[A]:m[A]=d.current=d.offset*d.space;const P=c.current;if(P){const F=t?"width":"height";P.style[F]=`${d.space*e}px`}d.layers.forEach(F=>{F.setHeight(d.space,!0),F.setPosition(d.space,d.current,!0)})},p=m=>{const T=o.current,A=Ht(t);d.offset=m,d.controller.set({scroll:d.current}),d.controller.stop().start({scroll:m*d.space,config:a,onChange({value:{scroll:P}}){T[A]=P}})},v=m=>{d.busy||(d.busy=!0,d.current=m.target[Ht(t)],ue.onStart(()=>{d.layers.forEach(T=>T.setPosition(d.space,d.current)),d.busy=!1}))};te.useEffect(()=>d.update()),$t(()=>{y(!0);const m=()=>{const T=()=>d.update();ue.onFrame(T),setTimeout(T,150)};return window.addEventListener("resize",m,!1),()=>window.removeEventListener("resize",m,!1)});const g=n?{overflowY:t?"hidden":"scroll",overflowX:t?"scroll":"hidden"}:{overflowY:"hidden",overflowX:"hidden"};return te.createElement(sr.div,{...r,ref:o,onScroll:v,onWheel:n?d.stop:void 0,onTouchStart:n?d.stop:void 0,style:{position:"absolute",width:"100%",height:"100%",...g,WebkitOverflowScrolling:"touch",WebkitTransform:bt,msTransform:bt,transform:Kr,...r.style}},f&&te.createElement(te.Fragment,null,te.createElement(sr.div,{ref:c,style:{overflow:"hidden",position:"absolute",[t?"height":"width"]:"100%",[t?"width":"height"]:d.space*e,WebkitTransform:bt,msTransform:bt,transform:Kr,...s.innerStyle}},te.createElement(ar.Provider,{value:d},hr(i,m=>!m.props.sticky&&m))),te.createElement(ar.Provider,{value:d},hr(i,m=>m.props.sticky&&m))))}));const Fo=Ae(lr)`
    width:100%
`;Ae(lr)`
height:100%;
width:100%;
`;const Do=Ae(Zi)`
    height:100%;
    fill:${$i}40;
    mix-blend-mode: difference;

    #center-orbit{
        filter: drop-shadow(0px 0px 10px rgb(61 90 241 / 1));
        visibility: ${s=>s.showOrbits?"visible":"hidden"};
    }

    #sun-group{
        visibility: ${s=>s.showSun?"visible":"hidden"};
    }
    #moon-group,#sun-group-base{
        visibility: ${s=>s.showMoon?"visible":"hidden"};
    }

    #center-group{
        visibility: ${s=>s.showCenter?"visible":"hidden"};
    }

    #solar-mask{
        visibility: ${s=>s.showCenter?"visible":"hidden"};
    }
    


    #moon-phase-1{
        visibility: ${s=>s.phase&&s.phase===1&&s.showMoon?"visible":"hidden"};
    }

    #moon-phase-2{
        visibility: ${s=>s.phase&&s.phase===2&&s.showMoon?"visible":"hidden"};
    }
    #moon-phase-3{
        visibility: ${s=>s.phase&&s.phase===3&&s.showMoon?"visible":"hidden"};
    }
    #moon-phase-4{  
        visibility: ${s=>s.phase&&s.phase===4&&s.showMoon?"visible":"hidden"};
    }
    
    #sun-beam,#sun-base-beam{
        opacity:${s=>s.phase&&s.phase!==1?Ji(1,4,s.phase):"0"};
    }
  
`.withComponent(en),Bo=Ae.div`
    svg{
        height:100%;
    }
`;function Lo(){return ae.jsx(Fo,{id:"about-us-stack",children:ae.jsx(Bo,{children:ae.jsx(Do,{showMoon:!0,phase:4})})})}function Io(s){return ae.jsx(ae.Fragment,{children:ae.jsx(we,{offset:s.offset,speed:2,children:ae.jsx(tn,{label:"Who we are",type:"h2"})})})}const No=Ae(lr)`
    height: 100dvh;
    
    background-color:${Qi};
    .parallax{
        -ms-overflow-style: none;  /* Internet Explorer 10+ */
        scrollbar-width: none;  /* Firefox */
        ::-webkit-scrollbar { 
          display: none;  /* Safari and Chrome */
      }
    }
`;Ae.div`
    position: fixed;
    top: 0;
    right:0;
    z-index:-11;
    width:100%;
    height:100%; 
`;Ae.div`
    position:absolute;
    z-index:-1;
    width:100%;
    height:100%;
    
`;const ko="/assets/mountain-1-0e1fbca3.png",Uo="/assets/mountain-2-000a1ddd.png",jo="/assets/rock-3-f16f8642.png",zo="/assets/mountain-4-e8310e3c.png",Xo="/assets/mountain-5-27061e06.png",Go="/assets/rock-6-63630435.png";function Yo(){return ae.jsxs(ae.Fragment,{children:[ae.jsx(we,{speed:.2,children:ae.jsx("img",{src:ko,alt:"",style:{zIndex:10,width:"100%"}})}),ae.jsx(we,{speed:.5,children:ae.jsx("img",{src:Uo,alt:"",style:{zIndex:10,width:"100%"}})}),ae.jsx(we,{speed:.6,children:ae.jsx("img",{src:jo,alt:"",style:{zIndex:10,width:"100%"}})}),ae.jsx(we,{speed:.8,children:ae.jsx("img",{src:zo,alt:"",style:{zIndex:10,width:"100%"}})}),ae.jsx(we,{speed:1,children:ae.jsx("img",{src:Xo,alt:"",style:{zIndex:10,width:"100%"}})}),ae.jsx(we,{speed:1,children:ae.jsx("img",{src:Go,alt:"",style:{zIndex:10,width:"100%"}})})]})}(function(s){if(typeof exports=="object"&&typeof module<"u")module.exports=s();else if(typeof define=="function"&&define.amd)define([],s);else{var h;h=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this,h.PIXI=s()}})(function(){var s;return function h(f,y,e){function u(t,i){if(!y[t]){if(!f[t]){var r=typeof require=="function"&&require;if(!i&&r)return r(t,!0);if(a)return a(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var c=y[t]={exports:{}};f[t][0].call(c.exports,function(d){var l=f[t][1][d];return u(l||d)},c,c.exports,h,f,y,e)}return y[t].exports}for(var a=typeof require=="function"&&require,n=0;n<e.length;n++)u(e[n]);return u}({1:[function(h,f,y){(function(e,u){(function(){function a(){}function n(B){return B}function t(B){return!!B}function i(B){return!B}function r(B){return function(){if(B===null)throw new Error("Callback was already called.");B.apply(this,arguments),B=null}}function o(B){return function(){B!==null&&(B.apply(this,arguments),B=null)}}function c(B){return Z(B)||typeof B.length=="number"&&B.length>=0&&B.length%1===0}function d(B,L){for(var N=-1,j=B.length;++N<j;)L(B[N],N,B)}function l(B,L){for(var N=-1,j=B.length,Y=Array(j);++N<j;)Y[N]=L(B[N],N,B);return Y}function p(B){return l(Array(B),function(L,N){return N})}function v(B,L,N){return d(B,function(j,Y,W){N=L(N,j,Y,W)}),N}function g(B,L){d(ie(B),function(N){L(B[N],N)})}function m(B,L){for(var N=0;N<B.length;N++)if(B[N]===L)return N;return-1}function T(B){var L,N,j=-1;return c(B)?(L=B.length,function(){return j++,L>j?j:null}):(N=ie(B),L=N.length,function(){return j++,L>j?N[j]:null})}function A(B,L){return L=L==null?B.length-1:+L,function(){for(var N=Math.max(arguments.length-L,0),j=Array(N),Y=0;N>Y;Y++)j[Y]=arguments[Y+L];switch(L){case 0:return B.call(this,j);case 1:return B.call(this,arguments[0],j)}}}function P(B){return function(L,N,j){return B(L,j)}}function F(B){return function(L,N,j){j=o(j||a),L=L||[];var Y=T(L);if(0>=B)return j(null);var W=!1,V=0,q=!1;(function $(){if(W&&0>=V)return j(null);for(;B>V&&!q;){var re=Y();if(re===null)return W=!0,void(0>=V&&j(null));V+=1,N(L[re],re,r(function(he){V-=1,he?(j(he),q=!0):$()}))}})()}}function k(B){return function(L,N,j){return B(R.eachOf,L,N,j)}}function I(B){return function(L,N,j,Y){return B(F(N),L,j,Y)}}function U(B){return function(L,N,j){return B(R.eachOfSeries,L,N,j)}}function X(B,L,N,j){j=o(j||a),L=L||[];var Y=c(L)?[]:{};B(L,function(W,V,q){N(W,function($,re){Y[V]=re,q($)})},function(W){j(W,Y)})}function z(B,L,N,j){var Y=[];B(L,function(W,V,q){N(W,function($){$&&Y.push({index:V,value:W}),q()})},function(){j(l(Y.sort(function(W,V){return W.index-V.index}),function(W){return W.value}))})}function x(B,L,N,j){z(B,L,function(Y,W){N(Y,function(V){W(!V)})},j)}function w(B,L,N){return function(j,Y,W,V){function q(){V&&V(N(!1,void 0))}function $(re,he,oe){return V?void W(re,function(le){V&&L(le)&&(V(N(!0,re)),V=W=!1),oe()}):oe()}arguments.length>3?B(j,Y,$,q):(V=W,W=Y,B(j,$,q))}}function _(B,L){return L}function M(B,L,N){N=N||a;var j=c(L)?[]:{};B(L,function(Y,W,V){Y(A(function(q,$){$.length<=1&&($=$[0]),j[W]=$,V(q)}))},function(Y){N(Y,j)})}function b(B,L,N,j){var Y=[];B(L,function(W,V,q){N(W,function($,re){Y=Y.concat(re||[]),q($)})},function(W){j(W,Y)})}function E(B,L,N){function j($,re,he,oe){if(oe!=null&&typeof oe!="function")throw new Error("task callback must be a function");return $.started=!0,Z(re)||(re=[re]),re.length===0&&$.idle()?R.setImmediate(function(){$.drain()}):(d(re,function(le){var fe={data:le,callback:oe||a};he?$.tasks.unshift(fe):$.tasks.push(fe),$.tasks.length===$.concurrency&&$.saturated()}),void R.setImmediate($.process))}function Y($,re){return function(){W-=1;var he=!1,oe=arguments;d(re,function(le){d(V,function(fe,Be){fe!==le||he||(V.splice(Be,1),he=!0)}),le.callback.apply(le,oe)}),$.tasks.length+W===0&&$.drain(),$.process()}}if(L==null)L=1;else if(L===0)throw new Error("Concurrency must not be zero");var W=0,V=[],q={tasks:[],concurrency:L,payload:N,saturated:a,empty:a,drain:a,started:!1,paused:!1,push:function($,re){j(q,$,!1,re)},kill:function(){q.drain=a,q.tasks=[]},unshift:function($,re){j(q,$,!0,re)},process:function(){for(;!q.paused&&W<q.concurrency&&q.tasks.length;){var $=q.payload?q.tasks.splice(0,q.payload):q.tasks.splice(0,q.tasks.length),re=l($,function(oe){return oe.data});q.tasks.length===0&&q.empty(),W+=1,V.push($[0]);var he=r(Y(q,$));B(re,he)}},length:function(){return q.tasks.length},running:function(){return W},workersList:function(){return V},idle:function(){return q.tasks.length+W===0},pause:function(){q.paused=!0},resume:function(){if(q.paused!==!1){q.paused=!1;for(var $=Math.min(q.concurrency,q.tasks.length),re=1;$>=re;re++)R.setImmediate(q.process)}}};return q}function S(B){return A(function(L,N){L.apply(null,N.concat([A(function(j,Y){typeof console=="object"&&(j?console.error&&console.error(j):console[B]&&d(Y,function(W){console[B](W)}))})]))})}function C(B){return function(L,N,j){B(p(L),N,j)}}function D(B){return A(function(L,N){var j=A(function(Y){var W=this,V=Y.pop();return B(L,function(q,$,re){q.apply(W,Y.concat([re]))},V)});return N.length?j.apply(this,N):j})}function O(B){return A(function(L){var N=L.pop();L.push(function(){var Y=arguments;j?R.setImmediate(function(){N.apply(null,Y)}):N.apply(null,Y)});var j=!0;B.apply(this,L),j=!1})}var G,R={},H=typeof self=="object"&&self.self===self&&self||typeof u=="object"&&u.global===u&&u||this;H!=null&&(G=H.async),R.noConflict=function(){return H.async=G,R};var Q=Object.prototype.toString,Z=Array.isArray||function(B){return Q.call(B)==="[object Array]"},ee=function(B){var L=typeof B;return L==="function"||L==="object"&&!!B},ie=Object.keys||function(B){var L=[];for(var N in B)B.hasOwnProperty(N)&&L.push(N);return L},J=typeof setImmediate=="function"&&setImmediate,se=J?function(B){J(B)}:function(B){setTimeout(B,0)};typeof e=="object"&&typeof e.nextTick=="function"?R.nextTick=e.nextTick:R.nextTick=se,R.setImmediate=J?se:R.nextTick,R.forEach=R.each=function(B,L,N){return R.eachOf(B,P(L),N)},R.forEachSeries=R.eachSeries=function(B,L,N){return R.eachOfSeries(B,P(L),N)},R.forEachLimit=R.eachLimit=function(B,L,N,j){return F(L)(B,P(N),j)},R.forEachOf=R.eachOf=function(B,L,N){function j(q){V--,q?N(q):Y===null&&0>=V&&N(null)}N=o(N||a),B=B||[];for(var Y,W=T(B),V=0;(Y=W())!=null;)V+=1,L(B[Y],Y,r(j));V===0&&N(null)},R.forEachOfSeries=R.eachOfSeries=function(B,L,N){function j(){var V=!0;return W===null?N(null):(L(B[W],W,r(function(q){if(q)N(q);else{if(W=Y(),W===null)return N(null);V?R.setImmediate(j):j()}})),void(V=!1))}N=o(N||a),B=B||[];var Y=T(B),W=Y();j()},R.forEachOfLimit=R.eachOfLimit=function(B,L,N,j){F(L)(B,N,j)},R.map=k(X),R.mapSeries=U(X),R.mapLimit=I(X),R.inject=R.foldl=R.reduce=function(B,L,N,j){R.eachOfSeries(B,function(Y,W,V){N(L,Y,function(q,$){L=$,V(q)})},function(Y){j(Y,L)})},R.foldr=R.reduceRight=function(B,L,N,j){var Y=l(B,n).reverse();R.reduce(Y,L,N,j)},R.transform=function(B,L,N,j){arguments.length===3&&(j=N,N=L,L=Z(B)?[]:{}),R.eachOf(B,function(Y,W,V){N(L,Y,W,V)},function(Y){j(Y,L)})},R.select=R.filter=k(z),R.selectLimit=R.filterLimit=I(z),R.selectSeries=R.filterSeries=U(z),R.reject=k(x),R.rejectLimit=I(x),R.rejectSeries=U(x),R.any=R.some=w(R.eachOf,t,n),R.someLimit=w(R.eachOfLimit,t,n),R.all=R.every=w(R.eachOf,i,i),R.everyLimit=w(R.eachOfLimit,i,i),R.detect=w(R.eachOf,n,_),R.detectSeries=w(R.eachOfSeries,n,_),R.detectLimit=w(R.eachOfLimit,n,_),R.sortBy=function(B,L,N){function j(Y,W){var V=Y.criteria,q=W.criteria;return q>V?-1:V>q?1:0}R.map(B,function(Y,W){L(Y,function(V,q){V?W(V):W(null,{value:Y,criteria:q})})},function(Y,W){return Y?N(Y):void N(null,l(W.sort(j),function(V){return V.value}))})},R.auto=function(B,L,N){function j(le){oe.unshift(le)}function Y(le){var fe=m(oe,le);fe>=0&&oe.splice(fe,1)}function W(){q--,d(oe.slice(0),function(le){le()})}typeof arguments[1]=="function"&&(N=L,L=null),N=o(N||a);var V=ie(B),q=V.length;if(!q)return N(null);L||(L=q);var $={},re=0,he=!1,oe=[];j(function(){q||N(null,$)}),d(V,function(le){function fe(){return L>re&&v(Le,function(gt,Ie){return gt&&$.hasOwnProperty(Ie)},!0)&&!$.hasOwnProperty(le)}function Be(){fe()&&(re++,Y(Be),de[de.length-1](ft,$))}if(!he){for(var Ce,de=Z(B[le])?B[le]:[B[le]],ft=A(function(gt,Ie){if(re--,Ie.length<=1&&(Ie=Ie[0]),gt){var Ut={};g($,function(Hi,Vi){Ut[Vi]=Hi}),Ut[le]=Ie,he=!0,N(gt,Ut)}else $[le]=Ie,R.setImmediate(W)}),Le=de.slice(0,de.length-1),vt=Le.length;vt--;){if(!(Ce=B[Le[vt]]))throw new Error("Has nonexistent dependency in "+Le.join(", "));if(Z(Ce)&&m(Ce,le)>=0)throw new Error("Has cyclic dependencies")}fe()?(re++,de[de.length-1](ft,$)):j(Be)}})},R.retry=function(B,L,N){function j(he,oe){if(typeof oe=="number")he.times=parseInt(oe,10)||W;else{if(typeof oe!="object")throw new Error("Unsupported argument type for 'times': "+typeof oe);he.times=parseInt(oe.times,10)||W,he.interval=parseInt(oe.interval,10)||V}}function Y(he,oe){function le(Ce,de){return function(ft){Ce(function(Le,vt){ft(!Le||de,{err:Le,result:vt})},oe)}}function fe(Ce){return function(de){setTimeout(function(){de(null)},Ce)}}for(;$.times;){var Be=!($.times-=1);q.push(le($.task,Be)),!Be&&$.interval>0&&q.push(fe($.interval))}R.series(q,function(Ce,de){de=de[de.length-1],(he||$.callback)(de.err,de.result)})}var W=5,V=0,q=[],$={times:W,interval:V},re=arguments.length;if(1>re||re>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=re&&typeof B=="function"&&(N=L,L=B),typeof B!="function"&&j($,B),$.callback=N,$.task=L,$.callback?Y():Y},R.waterfall=function(B,L){function N(Y){return A(function(W,V){if(W)L.apply(null,[W].concat(V));else{var q=Y.next();q?V.push(N(q)):V.push(L),O(Y).apply(null,V)}})}if(L=o(L||a),!Z(B)){var j=new Error("First argument to waterfall must be an array of functions");return L(j)}return B.length?void N(R.iterator(B))():L()},R.parallel=function(B,L){M(R.eachOf,B,L)},R.parallelLimit=function(B,L,N){M(F(L),B,N)},R.series=function(B,L){M(R.eachOfSeries,B,L)},R.iterator=function(B){function L(N){function j(){return B.length&&B[N].apply(null,arguments),j.next()}return j.next=function(){return N<B.length-1?L(N+1):null},j}return L(0)},R.apply=A(function(B,L){return A(function(N){return B.apply(null,L.concat(N))})}),R.concat=k(b),R.concatSeries=U(b),R.whilst=function(B,L,N){if(N=N||a,B()){var j=A(function(Y,W){Y?N(Y):B.apply(this,W)?L(j):N.apply(null,[null].concat(W))});L(j)}else N(null)},R.doWhilst=function(B,L,N){var j=0;return R.whilst(function(){return++j<=1||L.apply(this,arguments)},B,N)},R.until=function(B,L,N){return R.whilst(function(){return!B.apply(this,arguments)},L,N)},R.doUntil=function(B,L,N){return R.doWhilst(B,function(){return!L.apply(this,arguments)},N)},R.during=function(B,L,N){N=N||a;var j=A(function(W,V){W?N(W):(V.push(Y),B.apply(this,V))}),Y=function(W,V){W?N(W):V?L(j):N(null)};B(Y)},R.doDuring=function(B,L,N){var j=0;R.during(function(Y){j++<1?Y(null,!0):L.apply(this,arguments)},B,N)},R.queue=function(B,L){var N=E(function(j,Y){B(j[0],Y)},L,1);return N},R.priorityQueue=function(B,L){function N(V,q){return V.priority-q.priority}function j(V,q,$){for(var re=-1,he=V.length-1;he>re;){var oe=re+(he-re+1>>>1);$(q,V[oe])>=0?re=oe:he=oe-1}return re}function Y(V,q,$,re){if(re!=null&&typeof re!="function")throw new Error("task callback must be a function");return V.started=!0,Z(q)||(q=[q]),q.length===0?R.setImmediate(function(){V.drain()}):void d(q,function(he){var oe={data:he,priority:$,callback:typeof re=="function"?re:a};V.tasks.splice(j(V.tasks,oe,N)+1,0,oe),V.tasks.length===V.concurrency&&V.saturated(),R.setImmediate(V.process)})}var W=R.queue(B,L);return W.push=function(V,q,$){Y(W,V,q,$)},delete W.unshift,W},R.cargo=function(B,L){return E(B,1,L)},R.log=S("log"),R.dir=S("dir"),R.memoize=function(B,L){var N={},j={},Y=Object.prototype.hasOwnProperty;L=L||n;var W=A(function(V){var q=V.pop(),$=L.apply(null,V);Y.call(N,$)?R.setImmediate(function(){q.apply(null,N[$])}):Y.call(j,$)?j[$].push(q):(j[$]=[q],B.apply(null,V.concat([A(function(re){N[$]=re;var he=j[$];delete j[$];for(var oe=0,le=he.length;le>oe;oe++)he[oe].apply(null,re)})])))});return W.memo=N,W.unmemoized=B,W},R.unmemoize=function(B){return function(){return(B.unmemoized||B).apply(null,arguments)}},R.times=C(R.map),R.timesSeries=C(R.mapSeries),R.timesLimit=function(B,L,N,j){return R.mapLimit(p(B),L,N,j)},R.seq=function(){var B=arguments;return A(function(L){var N=this,j=L[L.length-1];typeof j=="function"?L.pop():j=a,R.reduce(B,L,function(Y,W,V){W.apply(N,Y.concat([A(function(q,$){V(q,$)})]))},function(Y,W){j.apply(N,[Y].concat(W))})})},R.compose=function(){return R.seq.apply(null,Array.prototype.reverse.call(arguments))},R.applyEach=D(R.eachOf),R.applyEachSeries=D(R.eachOfSeries),R.forever=function(B,L){function N(W){return W?j(W):void Y(N)}var j=r(L||a),Y=O(B);N()},R.ensureAsync=O,R.constant=A(function(B){var L=[null].concat(B);return function(N){return N.apply(this,L)}}),R.wrapSync=R.asyncify=function(B){return A(function(L){var N,j=L.pop();try{N=B.apply(this,L)}catch(Y){return j(Y)}ee(N)&&typeof N.then=="function"?N.then(function(Y){j(null,Y)}).catch(function(Y){j(Y.message?Y:new Error(Y))}):j(null,N)})},typeof f=="object"&&f.exports?f.exports=R:H.async=R})()}).call(this,h("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:3}],2:[function(h,f,y){(function(e){function u(r,o){for(var c=0,d=r.length-1;d>=0;d--){var l=r[d];l==="."?r.splice(d,1):l===".."?(r.splice(d,1),c++):c&&(r.splice(d,1),c--)}if(o)for(;c--;c)r.unshift("..");return r}function a(r,o){if(r.filter)return r.filter(o);for(var c=[],d=0;d<r.length;d++)o(r[d],d,r)&&c.push(r[d]);return c}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,t=function(r){return n.exec(r).slice(1)};y.resolve=function(){for(var r="",o=!1,c=arguments.length-1;c>=-1&&!o;c--){var d=c>=0?arguments[c]:e.cwd();if(typeof d!="string")throw new TypeError("Arguments to path.resolve must be strings");d&&(r=d+"/"+r,o=d.charAt(0)==="/")}return r=u(a(r.split("/"),function(l){return!!l}),!o).join("/"),(o?"/":"")+r||"."},y.normalize=function(r){var o=y.isAbsolute(r),c=i(r,-1)==="/";return r=u(a(r.split("/"),function(d){return!!d}),!o).join("/"),r||o||(r="."),r&&c&&(r+="/"),(o?"/":"")+r},y.isAbsolute=function(r){return r.charAt(0)==="/"},y.join=function(){var r=Array.prototype.slice.call(arguments,0);return y.normalize(a(r,function(o,c){if(typeof o!="string")throw new TypeError("Arguments to path.join must be strings");return o}).join("/"))},y.relative=function(r,o){function c(T){for(var A=0;A<T.length&&T[A]==="";A++);for(var P=T.length-1;P>=0&&T[P]==="";P--);return A>P?[]:T.slice(A,P-A+1)}r=y.resolve(r).substr(1),o=y.resolve(o).substr(1);for(var d=c(r.split("/")),l=c(o.split("/")),p=Math.min(d.length,l.length),v=p,g=0;p>g;g++)if(d[g]!==l[g]){v=g;break}for(var m=[],g=v;g<d.length;g++)m.push("..");return m=m.concat(l.slice(v)),m.join("/")},y.sep="/",y.delimiter=":",y.dirname=function(r){var o=t(r),c=o[0],d=o[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},y.basename=function(r,o){var c=t(r)[2];return o&&c.substr(-1*o.length)===o&&(c=c.substr(0,c.length-o.length)),c},y.extname=function(r){return t(r)[3]};var i="ab".substr(-1)==="b"?function(r,o,c){return r.substr(o,c)}:function(r,o,c){return 0>o&&(o=r.length+o),r.substr(o,c)}}).call(this,h("_process"))},{_process:3}],3:[function(h,f,y){function e(){o=!1,t.length?r=t.concat(r):c=-1,r.length&&u()}function u(){if(!o){var d=setTimeout(e);o=!0;for(var l=r.length;l;){for(t=r,r=[];++c<l;)t&&t[c].run();c=-1,l=r.length}t=null,o=!1,clearTimeout(d)}}function a(d,l){this.fun=d,this.array=l}function n(){}var t,i=f.exports={},r=[],o=!1,c=-1;i.nextTick=function(d){var l=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)l[p-1]=arguments[p];r.push(new a(d,l)),r.length!==1||o||setTimeout(u,0)},a.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(d){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(d){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],4:[function(h,f,y){(function(e){(function(u){function a(R){throw new RangeError(C[R])}function n(R,H){for(var Q=R.length,Z=[];Q--;)Z[Q]=H(R[Q]);return Z}function t(R,H){var Q=R.split("@"),Z="";Q.length>1&&(Z=Q[0]+"@",R=Q[1]),R=R.replace(S,".");var ee=R.split("."),ie=n(ee,H).join(".");return Z+ie}function i(R){for(var H,Q,Z=[],ee=0,ie=R.length;ie>ee;)H=R.charCodeAt(ee++),H>=55296&&56319>=H&&ie>ee?(Q=R.charCodeAt(ee++),(64512&Q)==56320?Z.push(((1023&H)<<10)+(1023&Q)+65536):(Z.push(H),ee--)):Z.push(H);return Z}function r(R){return n(R,function(H){var Q="";return H>65535&&(H-=65536,Q+=G(H>>>10&1023|55296),H=56320|1023&H),Q+=G(H)}).join("")}function o(R){return 10>R-48?R-22:26>R-65?R-65:26>R-97?R-97:I}function c(R,H){return R+22+75*(26>R)-((H!=0)<<5)}function d(R,H,Q){var Z=0;for(R=Q?O(R/x):R>>1,R+=O(R/H);R>D*X>>1;Z+=I)R=O(R/D);return O(Z+(D+1)*R/(R+z))}function l(R){var H,Q,Z,ee,ie,J,se,B,L,N,j=[],Y=R.length,W=0,V=_,q=w;for(Q=R.lastIndexOf(M),0>Q&&(Q=0),Z=0;Q>Z;++Z)R.charCodeAt(Z)>=128&&a("not-basic"),j.push(R.charCodeAt(Z));for(ee=Q>0?Q+1:0;Y>ee;){for(ie=W,J=1,se=I;ee>=Y&&a("invalid-input"),B=o(R.charCodeAt(ee++)),(B>=I||B>O((k-W)/J))&&a("overflow"),W+=B*J,L=q>=se?U:se>=q+X?X:se-q,!(L>B);se+=I)N=I-L,J>O(k/N)&&a("overflow"),J*=N;H=j.length+1,q=d(W-ie,H,ie==0),O(W/H)>k-V&&a("overflow"),V+=O(W/H),W%=H,j.splice(W++,0,V)}return r(j)}function p(R){var H,Q,Z,ee,ie,J,se,B,L,N,j,Y,W,V,q,$=[];for(R=i(R),Y=R.length,H=_,Q=0,ie=w,J=0;Y>J;++J)j=R[J],128>j&&$.push(G(j));for(Z=ee=$.length,ee&&$.push(M);Y>Z;){for(se=k,J=0;Y>J;++J)j=R[J],j>=H&&se>j&&(se=j);for(W=Z+1,se-H>O((k-Q)/W)&&a("overflow"),Q+=(se-H)*W,H=se,J=0;Y>J;++J)if(j=R[J],H>j&&++Q>k&&a("overflow"),j==H){for(B=Q,L=I;N=ie>=L?U:L>=ie+X?X:L-ie,!(N>B);L+=I)q=B-N,V=I-N,$.push(G(c(N+q%V,0))),B=O(q/V);$.push(G(c(B,0))),ie=d(Q,W,Z==ee),Q=0,++Z}++Q,++H}return $.join("")}function v(R){return t(R,function(H){return b.test(H)?l(H.slice(4).toLowerCase()):H})}function g(R){return t(R,function(H){return E.test(H)?"xn--"+p(H):H})}var m=typeof y=="object"&&y&&!y.nodeType&&y,T=typeof f=="object"&&f&&!f.nodeType&&f,A=typeof e=="object"&&e;A.global!==A&&A.window!==A&&A.self!==A||(u=A);var P,F,k=2147483647,I=36,U=1,X=26,z=38,x=700,w=72,_=128,M="-",b=/^xn--/,E=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=I-U,O=Math.floor,G=String.fromCharCode;if(P={version:"1.3.2",ucs2:{decode:i,encode:r},decode:l,encode:p,toASCII:g,toUnicode:v},typeof s!="function")if(m&&T)if(f.exports==m)T.exports=P;else for(F in P)P.hasOwnProperty(F)&&(m[F]=P[F]);else u.punycode=P})(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],5:[function(h,f,y){function e(a,n){return Object.prototype.hasOwnProperty.call(a,n)}f.exports=function(a,n,t,i){n=n||"&",t=t||"=";var r={};if(typeof a!="string"||a.length===0)return r;var o=/\+/g;a=a.split(n);var c=1e3;i&&typeof i.maxKeys=="number"&&(c=i.maxKeys);var d=a.length;c>0&&d>c&&(d=c);for(var l=0;d>l;++l){var p,v,g,m,T=a[l].replace(o,"%20"),A=T.indexOf(t);A>=0?(p=T.substr(0,A),v=T.substr(A+1)):(p=T,v=""),g=decodeURIComponent(p),m=decodeURIComponent(v),e(r,g)?u(r[g])?r[g].push(m):r[g]=[r[g],m]:r[g]=m}return r};var u=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}},{}],6:[function(h,f,y){function e(t,i){if(t.map)return t.map(i);for(var r=[],o=0;o<t.length;o++)r.push(i(t[o],o));return r}var u=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};f.exports=function(t,i,r,o){return i=i||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?e(n(t),function(c){var d=encodeURIComponent(u(c))+r;return a(t[c])?e(t[c],function(l){return d+encodeURIComponent(u(l))}).join(i):d+encodeURIComponent(u(t[c]))}).join(i):o?encodeURIComponent(u(o))+r+encodeURIComponent(u(t)):""};var a=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},n=Object.keys||function(t){var i=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&i.push(r);return i}},{}],7:[function(h,f,y){y.decode=y.parse=h("./decode"),y.encode=y.stringify=h("./encode")},{"./decode":5,"./encode":6}],8:[function(h,f,y){function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function u(x,w,_){if(x&&r(x)&&x instanceof e)return x;var M=new e;return M.parse(x,w,_),M}function a(x){return i(x)&&(x=u(x)),x instanceof e?x.format():e.prototype.format.call(x)}function n(x,w){return u(x,!1,!0).resolve(w)}function t(x,w){return x?u(x,!1,!0).resolveObject(w):w}function i(x){return typeof x=="string"}function r(x){return typeof x=="object"&&x!==null}function o(x){return x===null}function c(x){return x==null}var d=h("punycode");y.parse=u,y.resolve=n,y.resolveObject=t,y.format=a,y.Url=e;var l=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r",`
`,"	"],g=["{","}","|","\\","^","`"].concat(v),m=["'"].concat(g),T=["%","/","?",";","#"].concat(m),A=["/","?","#"],P=255,F=/^[a-z0-9A-Z_-]{0,63}$/,k=/^([a-z0-9A-Z_-]{0,63})(.*)$/,I={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},X={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},z=h("querystring");e.prototype.parse=function(x,w,_){if(!i(x))throw new TypeError("Parameter 'url' must be a string, not "+typeof x);var M=x;M=M.trim();var b=l.exec(M);if(b){b=b[0];var E=b.toLowerCase();this.protocol=E,M=M.substr(b.length)}if(_||b||M.match(/^\/\/[^@\/]+@[^@\/]+/)){var S=M.substr(0,2)==="//";!S||b&&U[b]||(M=M.substr(2),this.slashes=!0)}if(!U[b]&&(S||b&&!X[b])){for(var C=-1,D=0;D<A.length;D++){var O=M.indexOf(A[D]);O!==-1&&(C===-1||C>O)&&(C=O)}var G,R;R=C===-1?M.lastIndexOf("@"):M.lastIndexOf("@",C),R!==-1&&(G=M.slice(0,R),M=M.slice(R+1),this.auth=decodeURIComponent(G)),C=-1;for(var D=0;D<T.length;D++){var O=M.indexOf(T[D]);O!==-1&&(C===-1||C>O)&&(C=O)}C===-1&&(C=M.length),this.host=M.slice(0,C),M=M.slice(C),this.parseHost(),this.hostname=this.hostname||"";var H=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!H)for(var Q=this.hostname.split(/\./),D=0,Z=Q.length;Z>D;D++){var ee=Q[D];if(ee&&!ee.match(F)){for(var ie="",J=0,se=ee.length;se>J;J++)ie+=ee.charCodeAt(J)>127?"x":ee[J];if(!ie.match(F)){var B=Q.slice(0,D),L=Q.slice(D+1),N=ee.match(k);N&&(B.push(N[1]),L.unshift(N[2])),L.length&&(M="/"+L.join(".")+M),this.hostname=B.join(".");break}}}if(this.hostname.length>P?this.hostname="":this.hostname=this.hostname.toLowerCase(),!H){for(var j=this.hostname.split("."),Y=[],D=0;D<j.length;++D){var W=j[D];Y.push(W.match(/[^A-Za-z0-9_-]/)?"xn--"+d.encode(W):W)}this.hostname=Y.join(".")}var V=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+V,this.href+=this.host,H&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),M[0]!=="/"&&(M="/"+M))}if(!I[E])for(var D=0,Z=m.length;Z>D;D++){var $=m[D],re=encodeURIComponent($);re===$&&(re=escape($)),M=M.split($).join(re)}var he=M.indexOf("#");he!==-1&&(this.hash=M.substr(he),M=M.slice(0,he));var oe=M.indexOf("?");if(oe!==-1?(this.search=M.substr(oe),this.query=M.substr(oe+1),w&&(this.query=z.parse(this.query)),M=M.slice(0,oe)):w&&(this.search="",this.query={}),M&&(this.pathname=M),X[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var V=this.pathname||"",W=this.search||"";this.path=V+W}return this.href=this.format(),this},e.prototype.format=function(){var x=this.auth||"";x&&(x=encodeURIComponent(x),x=x.replace(/%3A/i,":"),x+="@");var w=this.protocol||"",_=this.pathname||"",M=this.hash||"",b=!1,E="";this.host?b=x+this.host:this.hostname&&(b=x+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(b+=":"+this.port)),this.query&&r(this.query)&&Object.keys(this.query).length&&(E=z.stringify(this.query));var S=this.search||E&&"?"+E||"";return w&&w.substr(-1)!==":"&&(w+=":"),this.slashes||(!w||X[w])&&b!==!1?(b="//"+(b||""),_&&_.charAt(0)!=="/"&&(_="/"+_)):b||(b=""),M&&M.charAt(0)!=="#"&&(M="#"+M),S&&S.charAt(0)!=="?"&&(S="?"+S),_=_.replace(/[?#]/g,function(C){return encodeURIComponent(C)}),S=S.replace("#","%23"),w+b+_+S+M},e.prototype.resolve=function(x){return this.resolveObject(u(x,!1,!0)).format()},e.prototype.resolveObject=function(x){if(i(x)){var w=new e;w.parse(x,!1,!0),x=w}var _=new e;if(Object.keys(this).forEach(function(se){_[se]=this[se]},this),_.hash=x.hash,x.href==="")return _.href=_.format(),_;if(x.slashes&&!x.protocol)return Object.keys(x).forEach(function(se){se!=="protocol"&&(_[se]=x[se])}),X[_.protocol]&&_.hostname&&!_.pathname&&(_.path=_.pathname="/"),_.href=_.format(),_;if(x.protocol&&x.protocol!==_.protocol){if(!X[x.protocol])return Object.keys(x).forEach(function(se){_[se]=x[se]}),_.href=_.format(),_;if(_.protocol=x.protocol,x.host||U[x.protocol])_.pathname=x.pathname;else{for(var G=(x.pathname||"").split("/");G.length&&!(x.host=G.shift()););x.host||(x.host=""),x.hostname||(x.hostname=""),G[0]!==""&&G.unshift(""),G.length<2&&G.unshift(""),_.pathname=G.join("/")}if(_.search=x.search,_.query=x.query,_.host=x.host||"",_.auth=x.auth,_.hostname=x.hostname||x.host,_.port=x.port,_.pathname||_.search){var M=_.pathname||"",b=_.search||"";_.path=M+b}return _.slashes=_.slashes||x.slashes,_.href=_.format(),_}var E=_.pathname&&_.pathname.charAt(0)==="/",S=x.host||x.pathname&&x.pathname.charAt(0)==="/",C=S||E||_.host&&x.pathname,D=C,O=_.pathname&&_.pathname.split("/")||[],G=x.pathname&&x.pathname.split("/")||[],R=_.protocol&&!X[_.protocol];if(R&&(_.hostname="",_.port=null,_.host&&(O[0]===""?O[0]=_.host:O.unshift(_.host)),_.host="",x.protocol&&(x.hostname=null,x.port=null,x.host&&(G[0]===""?G[0]=x.host:G.unshift(x.host)),x.host=null),C=C&&(G[0]===""||O[0]==="")),S)_.host=x.host||x.host===""?x.host:_.host,_.hostname=x.hostname||x.hostname===""?x.hostname:_.hostname,_.search=x.search,_.query=x.query,O=G;else if(G.length)O||(O=[]),O.pop(),O=O.concat(G),_.search=x.search,_.query=x.query;else if(!c(x.search)){if(R){_.hostname=_.host=O.shift();var H=_.host&&_.host.indexOf("@")>0?_.host.split("@"):!1;H&&(_.auth=H.shift(),_.host=_.hostname=H.shift())}return _.search=x.search,_.query=x.query,o(_.pathname)&&o(_.search)||(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.href=_.format(),_}if(!O.length)return _.pathname=null,_.search?_.path="/"+_.search:_.path=null,_.href=_.format(),_;for(var Q=O.slice(-1)[0],Z=(_.host||x.host)&&(Q==="."||Q==="..")||Q==="",ee=0,ie=O.length;ie>=0;ie--)Q=O[ie],Q=="."?O.splice(ie,1):Q===".."?(O.splice(ie,1),ee++):ee&&(O.splice(ie,1),ee--);if(!C&&!D)for(;ee--;ee)O.unshift("..");!C||O[0]===""||O[0]&&O[0].charAt(0)==="/"||O.unshift(""),Z&&O.join("/").substr(-1)!=="/"&&O.push("");var J=O[0]===""||O[0]&&O[0].charAt(0)==="/";if(R){_.hostname=_.host=J?"":O.length?O.shift():"";var H=_.host&&_.host.indexOf("@")>0?_.host.split("@"):!1;H&&(_.auth=H.shift(),_.host=_.hostname=H.shift())}return C=C||_.host&&O.length,C&&!J&&O.unshift(""),O.length?_.pathname=O.join("/"):(_.pathname=null,_.path=null),o(_.pathname)&&o(_.search)||(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.auth=x.auth||_.auth,_.slashes=_.slashes||x.slashes,_.href=_.format(),_},e.prototype.parseHost=function(){var x=this.host,w=p.exec(x);w&&(w=w[0],w!==":"&&(this.port=w.substr(1)),x=x.substr(0,x.length-w.length)),x&&(this.hostname=x)}},{punycode:4,querystring:7}],9:[function(h,f,y){function e(b,E,S){S=S||2;var C=E&&E.length,D=C?E[0]*S:b.length,O=u(b,0,D,S,!0),G=[];if(!O)return G;var R,H,Q,Z,ee,ie,J;if(C&&(O=c(b,E,O,S)),b.length>80*S){R=Q=b[0],H=Z=b[1];for(var se=S;D>se;se+=S)ee=b[se],ie=b[se+1],R>ee&&(R=ee),H>ie&&(H=ie),ee>Q&&(Q=ee),ie>Z&&(Z=ie);J=Math.max(Q-R,Z-H)}return n(O,G,S,R,H,J),G}function u(b,E,S,C,D){var O,G,R,H=0;for(O=E,G=S-C;S>O;O+=C)H+=(b[G]-b[O])*(b[O+1]+b[G+1]),G=O;if(D===H>0)for(O=E;S>O;O+=C)R=w(O,b[O],b[O+1],R);else for(O=S-C;O>=E;O-=C)R=w(O,b[O],b[O+1],R);return R}function a(b,E){if(!b)return b;E||(E=b);var S,C=b;do if(S=!1,C.steiner||!k(C,C.next)&&F(C.prev,C,C.next)!==0)C=C.next;else{if(_(C),C=E=C.prev,C===C.next)return null;S=!0}while(S||C!==E);return E}function n(b,E,S,C,D,O,G){if(b){!G&&O&&v(b,C,D,O);for(var R,H,Q=b;b.prev!==b.next;)if(R=b.prev,H=b.next,O?i(b,C,D,O):t(b))E.push(R.i/S),E.push(b.i/S),E.push(H.i/S),_(b),b=H.next,Q=H.next;else if(b=H,b===Q){G?G===1?(b=r(b,E,S),n(b,E,S,C,D,O,2)):G===2&&o(b,E,S,C,D,O):n(a(b),E,S,C,D,O,1);break}}}function t(b){var E=b.prev,S=b,C=b.next;if(F(E,S,C)>=0)return!1;for(var D=b.next.next;D!==b.prev;){if(A(E.x,E.y,S.x,S.y,C.x,C.y,D.x,D.y)&&F(D.prev,D,D.next)>=0)return!1;D=D.next}return!0}function i(b,E,S,C){var D=b.prev,O=b,G=b.next;if(F(D,O,G)>=0)return!1;for(var R=D.x<O.x?D.x<G.x?D.x:G.x:O.x<G.x?O.x:G.x,H=D.y<O.y?D.y<G.y?D.y:G.y:O.y<G.y?O.y:G.y,Q=D.x>O.x?D.x>G.x?D.x:G.x:O.x>G.x?O.x:G.x,Z=D.y>O.y?D.y>G.y?D.y:G.y:O.y>G.y?O.y:G.y,ee=m(R,H,E,S,C),ie=m(Q,Z,E,S,C),J=b.nextZ;J&&J.z<=ie;){if(J!==b.prev&&J!==b.next&&A(D.x,D.y,O.x,O.y,G.x,G.y,J.x,J.y)&&F(J.prev,J,J.next)>=0)return!1;J=J.nextZ}for(J=b.prevZ;J&&J.z>=ee;){if(J!==b.prev&&J!==b.next&&A(D.x,D.y,O.x,O.y,G.x,G.y,J.x,J.y)&&F(J.prev,J,J.next)>=0)return!1;J=J.prevZ}return!0}function r(b,E,S){var C=b;do{var D=C.prev,O=C.next.next;I(D,C,C.next,O)&&X(D,O)&&X(O,D)&&(E.push(D.i/S),E.push(C.i/S),E.push(O.i/S),_(C),_(C.next),C=b=O),C=C.next}while(C!==b);return C}function o(b,E,S,C,D,O){var G=b;do{for(var R=G.next.next;R!==G.prev;){if(G.i!==R.i&&P(G,R)){var H=x(G,R);return G=a(G,G.next),H=a(H,H.next),n(G,E,S,C,D,O),void n(H,E,S,C,D,O)}R=R.next}G=G.next}while(G!==b)}function c(b,E,S,C){var D,O,G,R,H,Q=[];for(D=0,O=E.length;O>D;D++)G=E[D]*C,R=O-1>D?E[D+1]*C:b.length,H=u(b,G,R,C,!1),H===H.next&&(H.steiner=!0),Q.push(T(H));for(Q.sort(d),D=0;D<Q.length;D++)l(Q[D],S),S=a(S,S.next);return S}function d(b,E){return b.x-E.x}function l(b,E){if(E=p(b,E)){var S=x(E,b);a(S,S.next)}}function p(b,E){var S,C=E,D=b.x,O=b.y,G=-(1/0);do{if(O<=C.y&&O>=C.next.y){var R=C.x+(O-C.y)*(C.next.x-C.x)/(C.next.y-C.y);D>=R&&R>G&&(G=R,S=C.x<C.next.x?C:C.next)}C=C.next}while(C!==E);if(!S)return null;if(b.x===S.x)return S.prev;var H,Q=S,Z=1/0;for(C=S.next;C!==Q;)D>=C.x&&C.x>=S.x&&A(O<S.y?D:G,O,S.x,S.y,O<S.y?G:D,O,C.x,C.y)&&(H=Math.abs(O-C.y)/(D-C.x),(Z>H||H===Z&&C.x>S.x)&&X(C,b)&&(S=C,Z=H)),C=C.next;return S}function v(b,E,S,C){var D=b;do D.z===null&&(D.z=m(D.x,D.y,E,S,C)),D.prevZ=D.prev,D.nextZ=D.next,D=D.next;while(D!==b);D.prevZ.nextZ=null,D.prevZ=null,g(D)}function g(b){var E,S,C,D,O,G,R,H,Q=1;do{for(S=b,b=null,O=null,G=0;S;){for(G++,C=S,R=0,E=0;Q>E&&(R++,C=C.nextZ,C);E++);for(H=Q;R>0||H>0&&C;)R===0?(D=C,C=C.nextZ,H--):H!==0&&C?S.z<=C.z?(D=S,S=S.nextZ,R--):(D=C,C=C.nextZ,H--):(D=S,S=S.nextZ,R--),O?O.nextZ=D:b=D,D.prevZ=O,O=D;S=C}O.nextZ=null,Q*=2}while(G>1);return b}function m(b,E,S,C,D){return b=32767*(b-S)/D,E=32767*(E-C)/D,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),E=16711935&(E|E<<8),E=252645135&(E|E<<4),E=858993459&(E|E<<2),E=1431655765&(E|E<<1),b|E<<1}function T(b){var E=b,S=b;do E.x<S.x&&(S=E),E=E.next;while(E!==b);return S}function A(b,E,S,C,D,O,G,R){return(D-G)*(E-R)-(b-G)*(O-R)>=0&&(b-G)*(C-R)-(S-G)*(E-R)>=0&&(S-G)*(O-R)-(D-G)*(C-R)>=0}function P(b,E){return k(b,E)||b.next.i!==E.i&&b.prev.i!==E.i&&!U(b,E)&&X(b,E)&&X(E,b)&&z(b,E)}function F(b,E,S){return(E.y-b.y)*(S.x-E.x)-(E.x-b.x)*(S.y-E.y)}function k(b,E){return b.x===E.x&&b.y===E.y}function I(b,E,S,C){return F(b,E,S)>0!=F(b,E,C)>0&&F(S,C,b)>0!=F(S,C,E)>0}function U(b,E){var S=b;do{if(S.i!==b.i&&S.next.i!==b.i&&S.i!==E.i&&S.next.i!==E.i&&I(S,S.next,b,E))return!0;S=S.next}while(S!==b);return!1}function X(b,E){return F(b.prev,b,b.next)<0?F(b,E,b.next)>=0&&F(b,b.prev,E)>=0:F(b,E,b.prev)<0||F(b,b.next,E)<0}function z(b,E){var S=b,C=!1,D=(b.x+E.x)/2,O=(b.y+E.y)/2;do S.y>O!=S.next.y>O&&D<(S.next.x-S.x)*(O-S.y)/(S.next.y-S.y)+S.x&&(C=!C),S=S.next;while(S!==b);return C}function x(b,E){var S=new M(b.i,b.x,b.y),C=new M(E.i,E.x,E.y),D=b.next,O=E.prev;return b.next=E,E.prev=b,S.next=D,D.prev=S,C.next=S,S.prev=C,O.next=C,C.prev=O,C}function w(b,E,S,C){var D=new M(b,E,S);return C?(D.next=C.next,D.prev=C,C.next.prev=D,C.next=D):(D.prev=D,D.next=D),D}function _(b){b.next.prev=b.prev,b.prev.next=b.next,b.prevZ&&(b.prevZ.nextZ=b.nextZ),b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function M(b,E,S){this.i=b,this.x=E,this.y=S,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}f.exports=e},{}],10:[function(h,f,y){function e(n,t,i){this.fn=n,this.context=t,this.once=i||!1}function u(){}var a=typeof Object.create!="function"?"~":!1;u.prototype._events=void 0,u.prototype.listeners=function(n,t){var i=a?a+n:n,r=this._events&&this._events[i];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,c=r.length,d=new Array(c);c>o;o++)d[o]=r[o].fn;return d},u.prototype.emit=function(n,t,i,r,o,c){var d=a?a+n:n;if(!this._events||!this._events[d])return!1;var l,p,v=this._events[d],g=arguments.length;if(typeof v.fn=="function"){switch(v.once&&this.removeListener(n,v.fn,void 0,!0),g){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,t),!0;case 3:return v.fn.call(v.context,t,i),!0;case 4:return v.fn.call(v.context,t,i,r),!0;case 5:return v.fn.call(v.context,t,i,r,o),!0;case 6:return v.fn.call(v.context,t,i,r,o,c),!0}for(p=1,l=new Array(g-1);g>p;p++)l[p-1]=arguments[p];v.fn.apply(v.context,l)}else{var m,T=v.length;for(p=0;T>p;p++)switch(v[p].once&&this.removeListener(n,v[p].fn,void 0,!0),g){case 1:v[p].fn.call(v[p].context);break;case 2:v[p].fn.call(v[p].context,t);break;case 3:v[p].fn.call(v[p].context,t,i);break;default:if(!l)for(m=1,l=new Array(g-1);g>m;m++)l[m-1]=arguments[m];v[p].fn.apply(v[p].context,l)}}return!0},u.prototype.on=function(n,t,i){var r=new e(t,i||this),o=a?a+n:n;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):this._events[o]=r,this},u.prototype.once=function(n,t,i){var r=new e(t,i||this,!0),o=a?a+n:n;return this._events||(this._events=a?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):this._events[o]=r,this},u.prototype.removeListener=function(n,t,i,r){var o=a?a+n:n;if(!this._events||!this._events[o])return this;var c=this._events[o],d=[];if(t)if(c.fn)(c.fn!==t||r&&!c.once||i&&c.context!==i)&&d.push(c);else for(var l=0,p=c.length;p>l;l++)(c[l].fn!==t||r&&!c[l].once||i&&c[l].context!==i)&&d.push(c[l]);return d.length?this._events[o]=d.length===1?d[0]:d:delete this._events[o],this},u.prototype.removeAllListeners=function(n){return this._events?(n?delete this._events[a?a+n:n]:this._events=a?{}:Object.create(null),this):this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prototype.setMaxListeners=function(){return this},u.prefixed=a,typeof f<"u"&&(f.exports=u)},{}],11:[function(h,f,y){function e(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}var u=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;f.exports=Object.assign||function(n,t){for(var i,r,o=e(n),c=1;c<arguments.length;c++){i=Object(arguments[c]);for(var d in i)u.call(i,d)&&(o[d]=i[d]);if(Object.getOwnPropertySymbols){r=Object.getOwnPropertySymbols(i);for(var l=0;l<r.length;l++)a.call(i,r[l])&&(o[r[l]]=i[r[l]])}}return o}},{}],12:[function(h,f,y){(function(e){(function(){function u(x){var w=!1;return function(){if(w)throw new Error("Callback was already called.");w=!0,x.apply(a,arguments)}}var a,n,t={};a=this,a!=null&&(n=a.async),t.noConflict=function(){return a.async=n,t};var i=Object.prototype.toString,r=Array.isArray||function(x){return i.call(x)==="[object Array]"},o=function(x,w){for(var _=0;_<x.length;_+=1)w(x[_],_,x)},c=function(x,w){if(x.map)return x.map(w);var _=[];return o(x,function(M,b,E){_.push(w(M,b,E))}),_},d=function(x,w,_){return x.reduce?x.reduce(w,_):(o(x,function(M,b,E){_=w(_,M,b,E)}),_)},l=function(x){if(Object.keys)return Object.keys(x);var w=[];for(var _ in x)x.hasOwnProperty(_)&&w.push(_);return w};typeof e<"u"&&e.nextTick?(t.nextTick=e.nextTick,typeof setImmediate<"u"?t.setImmediate=function(x){setImmediate(x)}:t.setImmediate=t.nextTick):typeof setImmediate=="function"?(t.nextTick=function(x){setImmediate(x)},t.setImmediate=t.nextTick):(t.nextTick=function(x){setTimeout(x,0)},t.setImmediate=t.nextTick),t.each=function(x,w,_){function M(E){E?(_(E),_=function(){}):(b+=1,b>=x.length&&_())}if(_=_||function(){},!x.length)return _();var b=0;o(x,function(E){w(E,u(M))})},t.forEach=t.each,t.eachSeries=function(x,w,_){if(_=_||function(){},!x.length)return _();var M=0,b=function(){w(x[M],function(E){E?(_(E),_=function(){}):(M+=1,M>=x.length?_():b())})};b()},t.forEachSeries=t.eachSeries,t.eachLimit=function(x,w,_,M){var b=p(w);b.apply(null,[x,_,M])},t.forEachLimit=t.eachLimit;var p=function(x){return function(w,_,M){if(M=M||function(){},!w.length||0>=x)return M();var b=0,E=0,S=0;(function C(){if(b>=w.length)return M();for(;x>S&&E<w.length;)E+=1,S+=1,_(w[E-1],function(D){D?(M(D),M=function(){}):(b+=1,S-=1,b>=w.length?M():C())})})()}},v=function(x){return function(){var w=Array.prototype.slice.call(arguments);return x.apply(null,[t.each].concat(w))}},g=function(x,w){return function(){var _=Array.prototype.slice.call(arguments);return w.apply(null,[p(x)].concat(_))}},m=function(x){return function(){var w=Array.prototype.slice.call(arguments);return x.apply(null,[t.eachSeries].concat(w))}},T=function(x,w,_,M){if(w=c(w,function(E,S){return{index:S,value:E}}),M){var b=[];x(w,function(E,S){_(E.value,function(C,D){b[E.index]=D,S(C)})},function(E){M(E,b)})}else x(w,function(E,S){_(E.value,function(C){S(C)})})};t.map=v(T),t.mapSeries=m(T),t.mapLimit=function(x,w,_,M){return A(w)(x,_,M)};var A=function(x){return g(x,T)};t.reduce=function(x,w,_,M){t.eachSeries(x,function(b,E){_(w,b,function(S,C){w=C,E(S)})},function(b){M(b,w)})},t.inject=t.reduce,t.foldl=t.reduce,t.reduceRight=function(x,w,_,M){var b=c(x,function(E){return E}).reverse();t.reduce(b,w,_,M)},t.foldr=t.reduceRight;var P=function(x,w,_,M){var b=[];w=c(w,function(E,S){return{index:S,value:E}}),x(w,function(E,S){_(E.value,function(C){C&&b.push(E),S()})},function(E){M(c(b.sort(function(S,C){return S.index-C.index}),function(S){return S.value}))})};t.filter=v(P),t.filterSeries=m(P),t.select=t.filter,t.selectSeries=t.filterSeries;var F=function(x,w,_,M){var b=[];w=c(w,function(E,S){return{index:S,value:E}}),x(w,function(E,S){_(E.value,function(C){C||b.push(E),S()})},function(E){M(c(b.sort(function(S,C){return S.index-C.index}),function(S){return S.value}))})};t.reject=v(F),t.rejectSeries=m(F);var k=function(x,w,_,M){x(w,function(b,E){_(b,function(S){S?(M(b),M=function(){}):E()})},function(b){M()})};t.detect=v(k),t.detectSeries=m(k),t.some=function(x,w,_){t.each(x,function(M,b){w(M,function(E){E&&(_(!0),_=function(){}),b()})},function(M){_(!1)})},t.any=t.some,t.every=function(x,w,_){t.each(x,function(M,b){w(M,function(E){E||(_(!1),_=function(){}),b()})},function(M){_(!0)})},t.all=t.every,t.sortBy=function(x,w,_){t.map(x,function(M,b){w(M,function(E,S){E?b(E):b(null,{value:M,criteria:S})})},function(M,b){if(M)return _(M);var E=function(S,C){var D=S.criteria,O=C.criteria;return O>D?-1:D>O?1:0};_(null,c(b.sort(E),function(S){return S.value}))})},t.auto=function(x,w){w=w||function(){};var _=l(x),M=_.length;if(!M)return w();var b={},E=[],S=function(O){E.unshift(O)},C=function(O){for(var G=0;G<E.length;G+=1)if(E[G]===O)return void E.splice(G,1)},D=function(){M--,o(E.slice(0),function(O){O()})};S(function(){if(!M){var O=w;w=function(){},O(null,b)}}),o(_,function(O){var G=r(x[O])?x[O]:[x[O]],R=function(ee){var ie=Array.prototype.slice.call(arguments,1);if(ie.length<=1&&(ie=ie[0]),ee){var J={};o(l(b),function(se){J[se]=b[se]}),J[O]=ie,w(ee,J),w=function(){}}else b[O]=ie,t.setImmediate(D)},H=G.slice(0,Math.abs(G.length-1))||[],Q=function(){return d(H,function(ee,ie){return ee&&b.hasOwnProperty(ie)},!0)&&!b.hasOwnProperty(O)};if(Q())G[G.length-1](R,b);else{var Z=function(){Q()&&(C(Z),G[G.length-1](R,b))};S(Z)}})},t.retry=function(x,w,_){var M=5,b=[];typeof x=="function"&&(_=w,w=x,x=M),x=parseInt(x,10)||M;var E=function(S,C){for(var D=function(O,G){return function(R){O(function(H,Q){R(!H||G,{err:H,result:Q})},C)}};x;)b.push(D(w,!(x-=1)));t.series(b,function(O,G){G=G[G.length-1],(S||_)(G.err,G.result)})};return _?E():E},t.waterfall=function(x,w){if(w=w||function(){},!r(x)){var _=new Error("First argument to waterfall must be an array of functions");return w(_)}if(!x.length)return w();var M=function(b){return function(E){if(E)w.apply(null,arguments),w=function(){};else{var S=Array.prototype.slice.call(arguments,1),C=b.next();C?S.push(M(C)):S.push(w),t.setImmediate(function(){b.apply(null,S)})}}};M(t.iterator(x))()};var I=function(x,w,_){if(_=_||function(){},r(w))x.map(w,function(b,E){b&&b(function(S){var C=Array.prototype.slice.call(arguments,1);C.length<=1&&(C=C[0]),E.call(null,S,C)})},_);else{var M={};x.each(l(w),function(b,E){w[b](function(S){var C=Array.prototype.slice.call(arguments,1);C.length<=1&&(C=C[0]),M[b]=C,E(S)})},function(b){_(b,M)})}};t.parallel=function(x,w){I({map:t.map,each:t.each},x,w)},t.parallelLimit=function(x,w,_){I({map:A(w),each:p(w)},x,_)},t.series=function(x,w){if(w=w||function(){},r(x))t.mapSeries(x,function(M,b){M&&M(function(E){var S=Array.prototype.slice.call(arguments,1);S.length<=1&&(S=S[0]),b.call(null,E,S)})},w);else{var _={};t.eachSeries(l(x),function(M,b){x[M](function(E){var S=Array.prototype.slice.call(arguments,1);S.length<=1&&(S=S[0]),_[M]=S,b(E)})},function(M){w(M,_)})}},t.iterator=function(x){var w=function(_){var M=function(){return x.length&&x[_].apply(null,arguments),M.next()};return M.next=function(){return _<x.length-1?w(_+1):null},M};return w(0)},t.apply=function(x){var w=Array.prototype.slice.call(arguments,1);return function(){return x.apply(null,w.concat(Array.prototype.slice.call(arguments)))}};var U=function(x,w,_,M){var b=[];x(w,function(E,S){_(E,function(C,D){b=b.concat(D||[]),S(C)})},function(E){M(E,b)})};t.concat=v(U),t.concatSeries=m(U),t.whilst=function(x,w,_){x()?w(function(M){return M?_(M):void t.whilst(x,w,_)}):_()},t.doWhilst=function(x,w,_){x(function(M){if(M)return _(M);var b=Array.prototype.slice.call(arguments,1);w.apply(null,b)?t.doWhilst(x,w,_):_()})},t.until=function(x,w,_){x()?_():w(function(M){return M?_(M):void t.until(x,w,_)})},t.doUntil=function(x,w,_){x(function(M){if(M)return _(M);var b=Array.prototype.slice.call(arguments,1);w.apply(null,b)?_():t.doUntil(x,w,_)})},t.queue=function(x,w){function _(E,S,C,D){return E.started||(E.started=!0),r(S)||(S=[S]),S.length==0?t.setImmediate(function(){E.drain&&E.drain()}):void o(S,function(O){var G={data:O,callback:typeof D=="function"?D:null};C?E.tasks.unshift(G):E.tasks.push(G),E.saturated&&E.tasks.length===E.concurrency&&E.saturated(),t.setImmediate(E.process)})}w===void 0&&(w=1);var M=0,b={tasks:[],concurrency:w,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(E,S){_(b,E,!1,S)},kill:function(){b.drain=null,b.tasks=[]},unshift:function(E,S){_(b,E,!0,S)},process:function(){if(!b.paused&&M<b.concurrency&&b.tasks.length){var E=b.tasks.shift();b.empty&&b.tasks.length===0&&b.empty(),M+=1;var S=function(){M-=1,E.callback&&E.callback.apply(E,arguments),b.drain&&b.tasks.length+M===0&&b.drain(),b.process()},C=u(S);x(E.data,C)}},length:function(){return b.tasks.length},running:function(){return M},idle:function(){return b.tasks.length+M===0},pause:function(){b.paused!==!0&&(b.paused=!0)},resume:function(){if(b.paused!==!1){b.paused=!1;for(var E=1;E<=b.concurrency;E++)t.setImmediate(b.process)}}};return b},t.priorityQueue=function(x,w){function _(S,C){return S.priority-C.priority}function M(S,C,D){for(var O=-1,G=S.length-1;G>O;){var R=O+(G-O+1>>>1);D(C,S[R])>=0?O=R:G=R-1}return O}function b(S,C,D,O){return S.started||(S.started=!0),r(C)||(C=[C]),C.length==0?t.setImmediate(function(){S.drain&&S.drain()}):void o(C,function(G){var R={data:G,priority:D,callback:typeof O=="function"?O:null};S.tasks.splice(M(S.tasks,R,_)+1,0,R),S.saturated&&S.tasks.length===S.concurrency&&S.saturated(),t.setImmediate(S.process)})}var E=t.queue(x,w);return E.push=function(S,C,D){b(E,S,C,D)},delete E.unshift,E},t.cargo=function(x,w){var _=!1,M=[],b={tasks:M,payload:w,saturated:null,empty:null,drain:null,drained:!0,push:function(E,S){r(E)||(E=[E]),o(E,function(C){M.push({data:C,callback:typeof S=="function"?S:null}),b.drained=!1,b.saturated&&M.length===w&&b.saturated()}),t.setImmediate(b.process)},process:function E(){if(!_){if(M.length===0)return b.drain&&!b.drained&&b.drain(),void(b.drained=!0);var S=typeof w=="number"?M.splice(0,w):M.splice(0,M.length),C=c(S,function(D){return D.data});b.empty&&b.empty(),_=!0,x(C,function(){_=!1;var D=arguments;o(S,function(O){O.callback&&O.callback.apply(null,D)}),E()})}},length:function(){return M.length},running:function(){return _}};return b};var X=function(x){return function(w){var _=Array.prototype.slice.call(arguments,1);w.apply(null,_.concat([function(M){var b=Array.prototype.slice.call(arguments,1);typeof console<"u"&&(M?console.error&&console.error(M):console[x]&&o(b,function(E){console[x](E)}))}]))}};t.log=X("log"),t.dir=X("dir"),t.memoize=function(x,w){var _={},M={};w=w||function(E){return E};var b=function(){var E=Array.prototype.slice.call(arguments),S=E.pop(),C=w.apply(null,E);C in _?t.nextTick(function(){S.apply(null,_[C])}):C in M?M[C].push(S):(M[C]=[S],x.apply(null,E.concat([function(){_[C]=arguments;var D=M[C];delete M[C];for(var O=0,G=D.length;G>O;O++)D[O].apply(null,arguments)}])))};return b.memo=_,b.unmemoized=x,b},t.unmemoize=function(x){return function(){return(x.unmemoized||x).apply(null,arguments)}},t.times=function(x,w,_){for(var M=[],b=0;x>b;b++)M.push(b);return t.map(M,w,_)},t.timesSeries=function(x,w,_){for(var M=[],b=0;x>b;b++)M.push(b);return t.mapSeries(M,w,_)},t.seq=function(){var x=arguments;return function(){var w=this,_=Array.prototype.slice.call(arguments),M=_.pop();t.reduce(x,_,function(b,E,S){E.apply(w,b.concat([function(){var C=arguments[0],D=Array.prototype.slice.call(arguments,1);S(C,D)}]))},function(b,E){M.apply(w,[b].concat(E))})}},t.compose=function(){return t.seq.apply(null,Array.prototype.reverse.call(arguments))};var z=function(x,w){var _=function(){var b=this,E=Array.prototype.slice.call(arguments),S=E.pop();return x(w,function(C,D){C.apply(b,E.concat([D]))},S)};if(arguments.length>2){var M=Array.prototype.slice.call(arguments,2);return _.apply(this,M)}return _};t.applyEach=v(z),t.applyEachSeries=m(z),t.forever=function(x,w){function _(M){if(M){if(w)return w(M);throw M}x(_)}_()},typeof f<"u"&&f.exports?f.exports=t:a.async=t})()}).call(this,h("_process"))},{_process:3}],13:[function(h,f,y){function e(i,r){t.call(this),r=r||10,this.baseUrl=i||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._boundOnLoad=this._onLoad.bind(this),this._buffer=[],this._numToLoad=0,this._queue=u.queue(this._boundLoadResource,r),this.resources={}}var u=h("async"),a=h("url"),n=h("./Resource"),t=h("eventemitter3");e.prototype=Object.create(t.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.add=e.prototype.enqueue=function(i,r,o,c){if(Array.isArray(i)){for(var d=0;d<i.length;++d)this.add(i[d]);return this}if(typeof i=="object"&&(c=r||i.callback||i.onComplete,o=i,r=i.url,i=i.name||i.key||i.url),typeof r!="string"&&(c=o,o=r,r=i),typeof r!="string")throw new Error("No url passed to add resource to loader.");if(typeof o=="function"&&(c=o,o=null),this.resources[i])throw new Error('Resource with name "'+i+'" already exists.');return r=this._handleBaseUrl(r),this.resources[i]=new n(i,r,o),typeof c=="function"&&this.resources[i].once("afterMiddleware",c),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[i]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[i]),this._progressChunk=100/this._buffer.length),this},e.prototype._handleBaseUrl=function(i){var r=a.parse(i);return r.protocol||r.pathname.indexOf("//")===0?i:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&i.charAt(0)!=="/"?this.baseUrl+"/"+i:this.baseUrl+i},e.prototype.before=e.prototype.pre=function(i){return this._beforeMiddleware.push(i),this},e.prototype.after=e.prototype.use=function(i){return this._afterMiddleware.push(i),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources={}},e.prototype.load=function(i){if(typeof i=="function"&&this.once("complete",i),this._queue.started)return this;this.emit("start",this);for(var r=0;r<this._buffer.length;++r)this._queue.push(this._buffer[r]);return this._buffer.length=0,this},e.prototype._loadResource=function(i,r){var o=this;i._dequeue=r,this._runMiddleware(i,this._beforeMiddleware,function(){i.load(o._boundOnLoad)})},e.prototype._onComplete=function(){this.emit("complete",this,this.resources)},e.prototype._onLoad=function(i){this.progress+=this._progressChunk,this.emit("progress",this,i),this._runMiddleware(i,this._afterMiddleware,function(){i.emit("afterMiddleware",i),this._numToLoad--,this._numToLoad===0&&(this.progress=100,this._onComplete()),i.error?this.emit("error",i.error,this,i):this.emit("load",this,i)}),i._dequeue()},e.prototype._runMiddleware=function(i,r,o){var c=this;u.eachSeries(r,function(d,l){d.call(c,i,l)},o.bind(this,i))},e.LOAD_TYPE=n.LOAD_TYPE,e.XHR_READY_STATE=n.XHR_READY_STATE,e.XHR_RESPONSE_TYPE=n.XHR_RESPONSE_TYPE},{"./Resource":14,async:12,eventemitter3:10,url:8}],14:[function(h,f,y){function e(o,c,d){if(n.call(this),d=d||{},typeof o!="string"||typeof c!="string")throw new Error("Both name and url are required for constructing a resource.");this.name=o,this.url=c,this.isDataUrl=this.url.indexOf("data:")===0,this.data=null,this.crossOrigin=d.crossOrigin===!0?"anonymous":d.crossOrigin,this.loadType=d.loadType||this._determineLoadType(),this.xhrType=d.xhrType,this.metadata=d.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function u(o){return o.toString().replace("object ","")}function a(o,c,d){c&&c.indexOf(".")===0&&(c=c.substring(1)),c&&(o[c]=d)}var n=h("eventemitter3"),t=h("url"),i=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),r=null;e.prototype=Object.create(n.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.emit("complete",this)},e.prototype.load=function(o){switch(this.emit("start",this),o&&this.once("complete",o),this.crossOrigin!==!1&&typeof this.crossOrigin=="string"||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this._loadImage();break;case e.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case e.LOAD_TYPE.VIDEO:this._loadElement("video");break;case e.LOAD_TYPE.XHR:default:i&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},e.prototype._loadElement=function(o){if(o==="audio"&&typeof Audio<"u"?this.data=new Audio:this.data=document.createElement(o),this.data===null)return this.error=new Error("Unsupported element "+o),void this.complete();if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var c=0;c<this.url.length;++c)this.data.appendChild(this._createSource(o,this.url[c]));else this.data.appendChild(this._createSource(o,this.url));this["is"+o[0].toUpperCase()+o.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},e.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var o=this.xhr=new XMLHttpRequest;o.open("GET",this.url,!0),this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?o.responseType=e.XHR_RESPONSE_TYPE.TEXT:o.responseType=this.xhrType,o.addEventListener("error",this._boundXhrOnError,!1),o.addEventListener("abort",this._boundXhrOnAbort,!1),o.addEventListener("progress",this._boundOnProgress,!1),o.addEventListener("load",this._boundXhrOnLoad,!1),o.send()},e.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var o=this.xhr=new XDomainRequest;o.timeout=5e3,o.onerror=this._boundXhrOnError,o.ontimeout=this._boundXdrOnTimeout,o.onprogress=this._boundOnProgress,o.onload=this._boundXhrOnLoad,o.open("GET",this.url,!0),setTimeout(function(){o.send()},0)},e.prototype._createSource=function(o,c,d){d||(d=o+"/"+c.substr(c.lastIndexOf(".")+1));var l=document.createElement("source");return l.src=c,l.type=d,l},e.prototype._onError=function(o){this.error=new Error("Failed to load element using "+o.target.nodeName),this.complete()},e.prototype._onProgress=function(o){o&&o.lengthComputable&&this.emit("progress",this,o.loaded/o.total)},e.prototype._xhrOnError=function(){this.error=new Error(u(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"'),this.complete()},e.prototype._xhrOnAbort=function(){this.error=new Error(u(this.xhr)+" Request was aborted by the user."),this.complete()},e.prototype._xdrOnTimeout=function(){this.error=new Error(u(this.xhr)+" Request timed out."),this.complete()},e.prototype._xhrOnLoad=function(){var o=this.xhr,c=o.status!==void 0?o.status:200;if(c===200||c===204||c===0&&o.responseText.length>0)if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=o.responseText;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(o.responseText),this.isJson=!0}catch(p){this.error=new Error("Error trying to parse loaded json:",p)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var d=new DOMParser;this.data=d.parseFromString(o.responseText,"text/xml")}else{var l=document.createElement("div");l.innerHTML=o.responseText,this.data=l}this.isXml=!0}catch(p){this.error=new Error("Error trying to parse loaded xml:",p)}else this.data=o.response||o.responseText;else this.error=new Error("["+o.status+"]"+o.statusText+":"+o.responseURL);this.complete()},e.prototype._determineCrossOrigin=function(o,c){if(o.indexOf("data:")===0)return"";c=c||window.location,r||(r=document.createElement("a")),r.href=o,o=t.parse(r.href);var d=!o.port&&c.port===""||o.port===c.port;return o.hostname===c.hostname&&d&&o.protocol===c.protocol?"":"anonymous"},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this._getExtension()]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this._getExtension()]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(){var o,c=this.url;if(this.isDataUrl){var d=c.indexOf("/");o=c.substring(d+1,c.indexOf(";",d))}else{var l=c.indexOf("?");l!==-1&&(c=c.substring(0,l)),o=c.substring(c.lastIndexOf(".")+1)}return o},e.prototype._getMimeFromXhrType=function(o){switch(o){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},e.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},e.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT},e.setExtensionLoadType=function(o,c){a(e._loadTypeMap,o,c)},e.setExtensionXhrType=function(o,c){a(e._xhrTypeMap,o,c)}},{eventemitter3:10,url:8}],15:[function(h,f,y){f.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(e){for(var u,a="",n=new Array(4),t=0,i=0,r=0;t<e.length;){for(u=new Array(3),i=0;i<u.length;i++)t<e.length?u[i]=255&e.charCodeAt(t++):u[i]=0;switch(n[0]=u[0]>>2,n[1]=(3&u[0])<<4|u[1]>>4,n[2]=(15&u[1])<<2|u[2]>>6,n[3]=63&u[2],r=t-(e.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(i=0;i<n.length;i++)a+=this._keyStr.charAt(n[i])}return a}}},{}],16:[function(h,f,y){f.exports=h("./Loader"),f.exports.Resource=h("./Resource"),f.exports.middleware={caching:{memory:h("./middlewares/caching/memory")},parsing:{blob:h("./middlewares/parsing/blob")}}},{"./Loader":13,"./Resource":14,"./middlewares/caching/memory":17,"./middlewares/parsing/blob":18}],17:[function(h,f,y){var e={};f.exports=function(){return function(u,a){e[u.url]?(u.data=e[u.url],u.complete()):u.once("complete",function(){e[this.url]=this.data}),a()}}},{}],18:[function(h,f,y){var e=h("../../Resource"),u=h("../../b64");window.URL=window.URL||window.webkitURL,f.exports=function(){return function(a,n){if(!a.data)return n();if(a.xhr&&a.xhrType===e.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&typeof a.data!="string"){if(a.data.type.indexOf("image")===0){var t=URL.createObjectURL(a.data);a.blob=a.data,a.data=new Image,a.data.src=t,a.isImage=!0,a.data.onload=function(){URL.revokeObjectURL(t),a.data.onload=null,n()}}}else{var i=a.xhr.getResponseHeader("content-type");i&&i.indexOf("image")===0&&(a.data=new Image,a.data.src="data:"+i+";base64,"+u.encodeBinary(a.xhr.responseText),a.isImage=!0,a.data.onload=function(){a.data.onload=null,n()})}else n()}}},{"../../Resource":14,"../../b64":15}],19:[function(h,f,y){function e(a){var n=document.createElement("div");n.style.width="100px",n.style.height="100px",n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.zIndex=2,this.div=n,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=a,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,window.addEventListener("keydown",this._onKeyDown,!1)}var u=h("../core");Object.assign(u.DisplayObject.prototype,h("./accessibleTarget")),e.prototype.constructor=e,f.exports=e,e.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(a){if(a.visible&&(a.accessible&&a.interactive&&(a._accessibleActive||this.addChild(a),a.renderId=this.renderId),a.interactiveChildren))for(var n=a.children,t=n.length-1;t>=0;t--)this.updateAccessibleObjects(n[t])},e.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var a=this.renderer.view.getBoundingClientRect(),n=a.width/this.renderer.width,t=a.height/this.renderer.height,i=this.div;i.style.left=a.left+"px",i.style.top=a.top+"px",i.style.width=this.renderer.width+"px",i.style.height=this.renderer.height+"px";for(var r=0;r<this.children.length;r++){var o=this.children[r];if(o.renderId!==this.renderId)o._accessibleActive=!1,u.utils.removeItems(this.children,r,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,r--,this.children.length===0&&this.deactivate();else{i=o._accessibleDiv;var c=o.hitArea,d=o.worldTransform;o.hitArea?(i.style.left=(d.tx+c.x*d.a)*n+"px",i.style.top=(d.ty+c.y*d.d)*t+"px",i.style.width=c.width*d.a*n+"px",i.style.height=c.height*d.d*t+"px"):(c=o.getBounds(),this.capHitArea(c),i.style.left=c.x*n+"px",i.style.top=c.y*t+"px",i.style.width=c.width*n+"px",i.style.height=c.height*t+"px")}}this.renderId++},e.prototype.capHitArea=function(a){a.x<0&&(a.width+=a.x,a.x=0),a.y<0&&(a.height+=a.y,a.y=0),a.x+a.width>this.renderer.width&&(a.width=this.renderer.width-a.x),a.y+a.height>this.renderer.height&&(a.height=this.renderer.height-a.y)},e.prototype.addChild=function(a){var n=this.pool.pop();n||(n=document.createElement("button"),n.style.width="100px",n.style.height="100px",n.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=2,n.style.borderStyle="none",n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.title=a.accessibleTitle||"displayObject "+this.tabIndex,a._accessibleActive=!0,a._accessibleDiv=n,n.displayObject=a,this.children.push(a),this.div.appendChild(a._accessibleDiv),a._accessibleDiv.tabIndex=a.tabIndex},e.prototype._onClick=function(a){var n=this.renderer.plugins.interaction;n.dispatchEvent(a.target.displayObject,"click",n.eventData)},e.prototype._onFocus=function(a){var n=this.renderer.plugins.interaction;n.dispatchEvent(a.target.displayObject,"mouseover",n.eventData)},e.prototype._onFocusOut=function(a){var n=this.renderer.plugins.interaction;n.dispatchEvent(a.target.displayObject,"mouseout",n.eventData)},e.prototype._onKeyDown=function(a){a.keyCode===9&&this.activate()},e.prototype._onMouseMove=function(){this.deactivate()},e.prototype.destroy=function(){this.div=null;for(var a=0;a<this.children.length;a++)this.children[a].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},u.WebGLRenderer.registerPlugin("accessibility",e),u.CanvasRenderer.registerPlugin("accessibility",e)},{"../core":29,"./accessibleTarget":20}],20:[function(h,f,y){var e={accessible:!1,accessibleTitle:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};f.exports=e},{}],21:[function(h,f,y){f.exports={accessibleTarget:h("./accessibleTarget"),AccessibilityManager:h("./AccessibilityManager")}},{"./AccessibilityManager":19,"./accessibleTarget":20}],22:[function(h,f,y){var e={VERSION:"3.0.10",PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};f.exports=e},{}],23:[function(h,f,y){function e(){n.call(this),this.children=[]}var u=h("../math"),a=h("../utils"),n=h("./DisplayObject"),t=h("../textures/RenderTexture"),i=new u.Matrix;e.prototype=Object.create(n.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var o=this.getLocalBounds().width;o!==0?this.scale.x=r/o:this.scale.x=1,this._width=r}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var o=this.getLocalBounds().height;o!==0?this.scale.y=r/o:this.scale.y=1,this._height=r}}}),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(r){var o=arguments.length;if(o>1)for(var c=0;o>c;c++)this.addChild(arguments[c]);else r.parent&&r.parent.removeChild(r),r.parent=this,this.children.push(r),this.onChildrenChange(this.children.length-1),r.emit("added",this);return r},e.prototype.addChildAt=function(r,o){if(o>=0&&o<=this.children.length)return r.parent&&r.parent.removeChild(r),r.parent=this,this.children.splice(o,0,r),this.onChildrenChange(o),r.emit("added",this),r;throw new Error(r+"addChildAt: The index "+o+" supplied is out of bounds "+this.children.length)},e.prototype.swapChildren=function(r,o){if(r!==o){var c=this.getChildIndex(r),d=this.getChildIndex(o);if(0>c||0>d)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[c]=o,this.children[d]=r,this.onChildrenChange(d>c?c:d)}},e.prototype.getChildIndex=function(r){var o=this.children.indexOf(r);if(o===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return o},e.prototype.setChildIndex=function(r,o){if(0>o||o>=this.children.length)throw new Error("The supplied index is out of bounds");var c=this.getChildIndex(r);a.removeItems(this.children,c,1),this.children.splice(o,0,r),this.onChildrenChange(o)},e.prototype.getChildAt=function(r){if(0>r||r>=this.children.length)throw new Error("getChildAt: Supplied index "+r+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[r]},e.prototype.removeChild=function(r){var o=arguments.length;if(o>1)for(var c=0;o>c;c++)this.removeChild(arguments[c]);else{var d=this.children.indexOf(r);if(d===-1)return;r.parent=null,a.removeItems(this.children,d,1),this.onChildrenChange(d),r.emit("removed",this)}return r},e.prototype.removeChildAt=function(r){var o=this.getChildAt(r);return o.parent=null,a.removeItems(this.children,r,1),this.onChildrenChange(r),o.emit("removed",this),o},e.prototype.removeChildren=function(r,o){var c,d,l=r||0,p=typeof o=="number"?o:this.children.length,v=p-l;if(v>0&&p>=v){for(c=this.children.splice(l,v),d=0;d<c.length;++d)c[d].parent=null;for(this.onChildrenChange(r),d=0;d<c.length;++d)c[d].emit("removed",this);return c}if(v===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.generateTexture=function(r,o,c){var d=this.getLocalBounds(),l=new t(r,0|d.width,0|d.height,c,o);return i.tx=-d.x,i.ty=-d.y,l.render(this,i),l},e.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var r=0,o=this.children.length;o>r;++r)this.children[r].updateTransform()}},e.prototype.containerUpdateTransform=e.prototype.updateTransform,e.prototype.getBounds=function(){if(!this._currentBounds){if(this.children.length===0)return u.Rectangle.EMPTY;for(var r,o,c,d=1/0,l=1/0,p=-(1/0),v=-(1/0),g=!1,m=0,T=this.children.length;T>m;++m){var A=this.children[m];A.visible&&(g=!0,r=this.children[m].getBounds(),d=d<r.x?d:r.x,l=l<r.y?l:r.y,o=r.width+r.x,c=r.height+r.y,p=p>o?p:o,v=v>c?v:c)}if(!g)return u.Rectangle.EMPTY;var P=this._bounds;P.x=d,P.y=l,P.width=p-d,P.height=v-l,this._currentBounds=P}return this._currentBounds},e.prototype.containerGetBounds=e.prototype.getBounds,e.prototype.getLocalBounds=function(){var r=this.worldTransform;this.worldTransform=u.Matrix.IDENTITY;for(var o=0,c=this.children.length;c>o;++o)this.children[o].updateTransform();return this.worldTransform=r,this._currentBounds=null,this.getBounds(u.Matrix.IDENTITY)},e.prototype.renderWebGL=function(r){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var o,c;if(this._mask||this._filters){for(r.currentRenderer.flush(),this._filters&&this._filters.length&&r.filterManager.pushFilter(this,this._filters),this._mask&&r.maskManager.pushMask(this,this._mask),r.currentRenderer.start(),this._renderWebGL(r),o=0,c=this.children.length;c>o;o++)this.children[o].renderWebGL(r);r.currentRenderer.flush(),this._mask&&r.maskManager.popMask(this,this._mask),this._filters&&r.filterManager.popFilter(),r.currentRenderer.start()}else for(this._renderWebGL(r),o=0,c=this.children.length;c>o;++o)this.children[o].renderWebGL(r)}},e.prototype._renderWebGL=function(r){},e.prototype._renderCanvas=function(r){},e.prototype.renderCanvas=function(r){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&r.maskManager.pushMask(this._mask,r),this._renderCanvas(r);for(var o=0,c=this.children.length;c>o;++o)this.children[o].renderCanvas(r);this._mask&&r.maskManager.popMask(r)}},e.prototype.destroy=function(r){if(n.prototype.destroy.call(this),r)for(var o=0,c=this.children.length;c>o;++o)this.children[o].destroy(r);this.removeChildren(),this.children=null}},{"../math":33,"../textures/RenderTexture":71,"../utils":77,"./DisplayObject":24}],24:[function(h,f,y){function e(){n.call(this),this.position=new u.Point,this.scale=new u.Point(1,1),this.pivot=new u.Point(0,0),this.skew=new u.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new u.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new u.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null}var u=h("../math"),a=h("../textures/RenderTexture"),n=h("eventemitter3"),t=h("../const"),i=new u.Matrix,r={worldTransform:new u.Matrix,worldAlpha:1,children:[]};e.prototype=Object.create(n.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{x:{get:function(){return this.position.x},set:function(o){this.position.x=o}},y:{get:function(){return this.position.y},set:function(o){this.position.y=o}},worldVisible:{get:function(){var o=this;do{if(!o.visible)return!1;o=o.parent}while(o);return!0}},mask:{get:function(){return this._mask},set:function(o){this._mask&&(this._mask.renderable=!0),this._mask=o,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(o){this._filters=o&&o.slice()}}}),e.prototype.updateTransform=function(){var o,c,d,l,p,v,g=this.parent.worldTransform,m=this.worldTransform;this.skew.x||this.skew.y?(i.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y),m.a=i.a*g.a+i.b*g.c,m.b=i.a*g.b+i.b*g.d,m.c=i.c*g.a+i.d*g.c,m.d=i.c*g.b+i.d*g.d,m.tx=i.tx*g.a+i.ty*g.c+g.tx,m.ty=i.tx*g.b+i.ty*g.d+g.ty):this.rotation%t.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),o=this._cr*this.scale.x,c=this._sr*this.scale.x,d=-this._sr*this.scale.y,l=this._cr*this.scale.y,p=this.position.x,v=this.position.y,(this.pivot.x||this.pivot.y)&&(p-=this.pivot.x*o+this.pivot.y*d,v-=this.pivot.x*c+this.pivot.y*l),m.a=o*g.a+c*g.c,m.b=o*g.b+c*g.d,m.c=d*g.a+l*g.c,m.d=d*g.b+l*g.d,m.tx=p*g.a+v*g.c+g.tx,m.ty=p*g.b+v*g.d+g.ty):(o=this.scale.x,l=this.scale.y,p=this.position.x-this.pivot.x*o,v=this.position.y-this.pivot.y*l,m.a=o*g.a,m.b=o*g.b,m.c=l*g.c,m.d=l*g.d,m.tx=p*g.a+v*g.c+g.tx,m.ty=p*g.b+v*g.d+g.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},e.prototype.displayObjectUpdateTransform=e.prototype.updateTransform,e.prototype.getBounds=function(o){return u.Rectangle.EMPTY},e.prototype.getLocalBounds=function(){return this.getBounds(u.Matrix.IDENTITY)},e.prototype.toGlobal=function(o){return this.parent?this.displayObjectUpdateTransform():(this.parent=r,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.apply(o)},e.prototype.toLocal=function(o,c,d){return c&&(o=c.toGlobal(o)),this.parent?this.displayObjectUpdateTransform():(this.parent=r,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.applyInverse(o,d)},e.prototype.renderWebGL=function(o){},e.prototype.renderCanvas=function(o){},e.prototype.generateTexture=function(o,c,d){var l=this.getLocalBounds(),p=new a(o,0|l.width,0|l.height,c,d);return i.tx=-l.x,i.ty=-l.y,p.render(this,i),p},e.prototype.setParent=function(o){if(!o||!o.addChild)throw new Error("setParent: Argument must be a Container");return o.addChild(this),o},e.prototype.setTransform=function(o,c,d,l,p,v,g,m,T){return this.position.x=o||0,this.position.y=c||0,this.scale.x=d||1,this.scale.y=l||1,this.rotation=p||0,this.skew.x=v||0,this.skew.y=g||0,this.pivot.x=m||0,this.pivot.y=T||0,this},e.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.skew=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{"../const":22,"../math":33,"../textures/RenderTexture":71,eventemitter3:10}],25:[function(h,f,y){function e(){u.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=o.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new r.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var u=h("../display/Container"),a=h("../textures/Texture"),n=h("../renderers/canvas/utils/CanvasBuffer"),t=h("../renderers/canvas/utils/CanvasGraphics"),i=h("./GraphicsData"),r=h("../math"),o=h("../const"),c=new r.Point;e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.clone=function(){var d=new e;d.renderable=this.renderable,d.fillAlpha=this.fillAlpha,d.lineWidth=this.lineWidth,d.lineColor=this.lineColor,d.tint=this.tint,d.blendMode=this.blendMode,d.isMask=this.isMask,d.boundsPadding=this.boundsPadding,d.dirty=!0,d.glDirty=!0,d.cachedSpriteDirty=this.cachedSpriteDirty;for(var l=0;l<this.graphicsData.length;++l)d.graphicsData.push(this.graphicsData[l].clone());return d.currentPath=d.graphicsData[d.graphicsData.length-1],d.updateLocalBounds(),d},e.prototype.lineStyle=function(d,l,p){if(this.lineWidth=d||0,this.lineColor=l||0,this.lineAlpha=p===void 0?1:p,this.currentPath)if(this.currentPath.shape.points.length){var v=new r.Polygon(this.currentPath.shape.points.slice(-2));v.closed=!1,this.drawShape(v)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(d,l){var p=new r.Polygon([d,l]);return p.closed=!1,this.drawShape(p),this},e.prototype.lineTo=function(d,l){return this.currentPath.shape.points.push(d,l),this.dirty=!0,this},e.prototype.quadraticCurveTo=function(d,l,p,v){this.currentPath?this.currentPath.shape.points.length===0&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var g,m,T=20,A=this.currentPath.shape.points;A.length===0&&this.moveTo(0,0);for(var P=A[A.length-2],F=A[A.length-1],k=0,I=1;T>=I;++I)k=I/T,g=P+(d-P)*k,m=F+(l-F)*k,A.push(g+(d+(p-d)*k-g)*k,m+(l+(v-l)*k-m)*k);return this.dirty=this.boundsDirty=!0,this},e.prototype.bezierCurveTo=function(d,l,p,v,g,m){this.currentPath?this.currentPath.shape.points.length===0&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var T,A,P,F,k,I=20,U=this.currentPath.shape.points,X=U[U.length-2],z=U[U.length-1],x=0,w=1;I>=w;++w)x=w/I,T=1-x,A=T*T,P=A*T,F=x*x,k=F*x,U.push(P*X+3*A*x*d+3*T*F*p+k*g,P*z+3*A*x*l+3*T*F*v+k*m);return this.dirty=this.boundsDirty=!0,this},e.prototype.arcTo=function(d,l,p,v,g){this.currentPath?this.currentPath.shape.points.length===0&&this.currentPath.shape.points.push(d,l):this.moveTo(d,l);var m=this.currentPath.shape.points,T=m[m.length-2],A=m[m.length-1],P=A-l,F=T-d,k=v-l,I=p-d,U=Math.abs(P*I-F*k);if(1e-8>U||g===0)m[m.length-2]===d&&m[m.length-1]===l||m.push(d,l);else{var X=P*P+F*F,z=k*k+I*I,x=P*k+F*I,w=g*Math.sqrt(X)/U,_=g*Math.sqrt(z)/U,M=w*x/X,b=_*x/z,E=w*I+_*F,S=w*k+_*P,C=F*(_+M),D=P*(_+M),O=I*(w+b),G=k*(w+b),R=Math.atan2(D-S,C-E),H=Math.atan2(G-S,O-E);this.arc(E+d,S+l,g,R,H,F*k>I*P)}return this.dirty=this.boundsDirty=!0,this},e.prototype.arc=function(d,l,p,v,g,m){if(m=m||!1,v===g)return this;!m&&v>=g?g+=2*Math.PI:m&&g>=v&&(v+=2*Math.PI);var T=m?-1*(v-g):g-v,A=40*Math.ceil(Math.abs(T)/(2*Math.PI));if(T===0)return this;var P=d+Math.cos(v)*p,F=l+Math.sin(v)*p;this.currentPath?this.currentPath.shape.points.push(P,F):this.moveTo(P,F);for(var k=this.currentPath.shape.points,I=T/(2*A),U=2*I,X=Math.cos(I),z=Math.sin(I),x=A-1,w=x%1/x,_=0;x>=_;_++){var M=_+w*_,b=I+v+U*M,E=Math.cos(b),S=-Math.sin(b);k.push((X*E+z*S)*p+d,(X*-S+z*E)*p+l)}return this.dirty=this.boundsDirty=!0,this},e.prototype.beginFill=function(d,l){return this.filling=!0,this.fillColor=d||0,this.fillAlpha=l===void 0?1:l,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(d,l,p,v){return this.drawShape(new r.Rectangle(d,l,p,v)),this},e.prototype.drawRoundedRect=function(d,l,p,v,g){return this.drawShape(new r.RoundedRectangle(d,l,p,v,g)),this},e.prototype.drawCircle=function(d,l,p){return this.drawShape(new r.Circle(d,l,p)),this},e.prototype.drawEllipse=function(d,l,p,v){return this.drawShape(new r.Ellipse(d,l,p,v)),this},e.prototype.drawPolygon=function(d){var l=d,p=!0;if(l instanceof r.Polygon&&(p=l.closed,l=l.points),!Array.isArray(l)){l=new Array(arguments.length);for(var v=0;v<l.length;++v)l[v]=arguments[v]}var g=new r.Polygon(l);return g.closed=p,this.drawShape(g),this},e.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},e.prototype.generateTexture=function(d,l,p){l=l||1;var v=this.getLocalBounds(),g=new n(v.width*l,v.height*l),m=a.fromCanvas(g.canvas,p);return m.baseTexture.resolution=l,g.context.scale(l,l),g.context.translate(-v.x,-v.y),t.renderGraphics(this,g.context),m},e.prototype._renderWebGL=function(d){this.glDirty&&(this.dirty=!0,this.glDirty=!1),d.setObjectRenderer(d.plugins.graphics),d.plugins.graphics.render(this)},e.prototype._renderCanvas=function(d){if(this.isMask!==!0){this._prevTint!==this.tint&&(this.dirty=!0);var l=d.context,p=this.worldTransform,v=d.blendModes[this.blendMode];v!==l.globalCompositeOperation&&(l.globalCompositeOperation=v);var g=d.resolution;l.setTransform(p.a*g,p.b*g,p.c*g,p.d*g,p.tx*g,p.ty*g),t.renderGraphics(this,l)}},e.prototype.getBounds=function(d){if(!this._currentBounds){if(!this.renderable)return r.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var l=this._localBounds,p=l.x,v=l.width+l.x,g=l.y,m=l.height+l.y,T=d||this.worldTransform,A=T.a,P=T.b,F=T.c,k=T.d,I=T.tx,U=T.ty,X=A*v+F*m+I,z=k*m+P*v+U,x=A*p+F*m+I,w=k*m+P*p+U,_=A*p+F*g+I,M=k*g+P*p+U,b=A*v+F*g+I,E=k*g+P*v+U,S=X,C=z,D=X,O=z;D=D>x?x:D,D=D>_?_:D,D=D>b?b:D,O=O>w?w:O,O=O>M?M:O,O=O>E?E:O,S=x>S?x:S,S=_>S?_:S,S=b>S?b:S,C=w>C?w:C,C=M>C?M:C,C=E>C?E:C,this._bounds.x=D,this._bounds.width=S-D,this._bounds.y=O,this._bounds.height=C-O,this._currentBounds=this._bounds}return this._currentBounds},e.prototype.containsPoint=function(d){this.worldTransform.applyInverse(d,c);for(var l=this.graphicsData,p=0;p<l.length;p++){var v=l[p];if(v.fill&&v.shape&&v.shape.contains(c.x,c.y))return!0}return!1},e.prototype.updateLocalBounds=function(){var d=1/0,l=-(1/0),p=1/0,v=-(1/0);if(this.graphicsData.length)for(var g,m,T,A,P,F,k=0;k<this.graphicsData.length;k++){var I=this.graphicsData[k],U=I.type,X=I.lineWidth;if(g=I.shape,U===o.SHAPES.RECT||U===o.SHAPES.RREC)T=g.x-X/2,A=g.y-X/2,P=g.width+X,F=g.height+X,d=d>T?T:d,l=T+P>l?T+P:l,p=p>A?A:p,v=A+F>v?A+F:v;else if(U===o.SHAPES.CIRC)T=g.x,A=g.y,P=g.radius+X/2,F=g.radius+X/2,d=d>T-P?T-P:d,l=T+P>l?T+P:l,p=p>A-F?A-F:p,v=A+F>v?A+F:v;else if(U===o.SHAPES.ELIP)T=g.x,A=g.y,P=g.width+X/2,F=g.height+X/2,d=d>T-P?T-P:d,l=T+P>l?T+P:l,p=p>A-F?A-F:p,v=A+F>v?A+F:v;else{m=g.points;for(var z=0;z<m.length;z+=2)T=m[z],A=m[z+1],d=d>T-X?T-X:d,l=T+X>l?T+X:l,p=p>A-X?A-X:p,v=A+X>v?A+X:v}}else d=0,l=0,p=0,v=0;var x=this.boundsPadding;this._localBounds.x=d-x,this._localBounds.width=l-d+2*x,this._localBounds.y=p-x,this._localBounds.height=v-p+2*x},e.prototype.drawShape=function(d){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var l=new i(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,d);return this.graphicsData.push(l),l.type===o.SHAPES.POLY&&(l.shape.closed=l.shape.closed||this.filling,this.currentPath=l),this.dirty=this.boundsDirty=!0,l},e.prototype.destroy=function(){u.prototype.destroy.apply(this,arguments);for(var d=0;d<this.graphicsData.length;++d)this.graphicsData[d].destroy();for(var l in this._webgl)for(var p=0;p<this._webgl[l].data.length;++p)this._webgl[l].data[p].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":22,"../display/Container":23,"../math":33,"../renderers/canvas/utils/CanvasBuffer":45,"../renderers/canvas/utils/CanvasGraphics":46,"../textures/Texture":72,"./GraphicsData":26}],26:[function(h,f,y){function e(u,a,n,t,i,r,o){this.lineWidth=u,this.lineColor=a,this.lineAlpha=n,this._lineTint=a,this.fillColor=t,this.fillAlpha=i,this._fillTint=t,this.fill=r,this.shape=o,this.type=o.type}e.prototype.constructor=e,f.exports=e,e.prototype.clone=function(){return new e(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},e.prototype.destroy=function(){this.shape=null}},{}],27:[function(h,f,y){function e(c){t.call(this,c),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var u=h("../../utils"),a=h("../../math"),n=h("../../const"),t=h("../../renderers/webgl/utils/ObjectRenderer"),i=h("../../renderers/webgl/WebGLRenderer"),r=h("./WebGLGraphicsData"),o=h("earcut");e.prototype=Object.create(t.prototype),e.prototype.constructor=e,f.exports=e,i.registerPlugin("graphics",e),e.prototype.onContextChange=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var c=0;c<this.graphicsDataPool.length;++c)this.graphicsDataPool[c].destroy();this.graphicsDataPool=null},e.prototype.render=function(c){var d,l=this.renderer,p=l.gl,v=l.shaderManager.plugins.primitiveShader;!c.dirty&&c._webGL[p.id]||this.updateGraphics(c);var g=c._webGL[p.id];l.blendModeManager.setBlendMode(c.blendMode);for(var m=0,T=g.data.length;T>m;m++)d=g.data[m],g.data[m].mode===1?(l.stencilManager.pushStencil(c,d),p.uniform1f(l.shaderManager.complexPrimitiveShader.uniforms.alpha._location,c.worldAlpha*d.alpha),p.drawElements(p.TRIANGLE_FAN,4,p.UNSIGNED_SHORT,2*(d.indices.length-4)),l.stencilManager.popStencil(c,d)):(v=l.shaderManager.primitiveShader,l.shaderManager.setShader(v),p.uniformMatrix3fv(v.uniforms.translationMatrix._location,!1,c.worldTransform.toArray(!0)),p.uniformMatrix3fv(v.uniforms.projectionMatrix._location,!1,l.currentRenderTarget.projectionMatrix.toArray(!0)),p.uniform3fv(v.uniforms.tint._location,u.hex2rgb(c.tint)),p.uniform1f(v.uniforms.alpha._location,c.worldAlpha),p.bindBuffer(p.ARRAY_BUFFER,d.buffer),p.vertexAttribPointer(v.attributes.aVertexPosition,2,p.FLOAT,!1,24,0),p.vertexAttribPointer(v.attributes.aColor,4,p.FLOAT,!1,24,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,d.indexBuffer),p.drawElements(p.TRIANGLE_STRIP,d.indices.length,p.UNSIGNED_SHORT,0)),l.drawCount++},e.prototype.updateGraphics=function(c){var d=this.renderer.gl,l=c._webGL[d.id];l||(l=c._webGL[d.id]={lastIndex:0,data:[],gl:d}),c.dirty=!1;var p;if(c.clearDirty){for(c.clearDirty=!1,p=0;p<l.data.length;p++){var v=l.data[p];v.reset(),this.graphicsDataPool.push(v)}l.data=[],l.lastIndex=0}var g;for(p=l.lastIndex;p<c.graphicsData.length;p++){var m=c.graphicsData[p];if(m.type===n.SHAPES.POLY){if(m.points=m.shape.points.slice(),m.shape.closed&&(m.points[0]===m.points[m.points.length-2]&&m.points[1]===m.points[m.points.length-1]||m.points.push(m.points[0],m.points[1])),m.fill&&m.points.length>=6)if(m.points.length<2*this.maximumSimplePolySize){g=this.switchMode(l,0);var T=this.buildPoly(m,g);T||(g=this.switchMode(l,1),this.buildComplexPoly(m,g))}else g=this.switchMode(l,1),this.buildComplexPoly(m,g);m.lineWidth>0&&(g=this.switchMode(l,0),this.buildLine(m,g))}else g=this.switchMode(l,0),m.type===n.SHAPES.RECT?this.buildRectangle(m,g):m.type===n.SHAPES.CIRC||m.type===n.SHAPES.ELIP?this.buildCircle(m,g):m.type===n.SHAPES.RREC&&this.buildRoundedRectangle(m,g);l.lastIndex++}for(p=0;p<l.data.length;p++)g=l.data[p],g.dirty&&g.upload()},e.prototype.switchMode=function(c,d){var l;return c.data.length?(l=c.data[c.data.length-1],(l.points.length>32e4||l.mode!==d||d===1)&&(l=this.graphicsDataPool.pop()||new r(c.gl),l.mode=d,c.data.push(l))):(l=this.graphicsDataPool.pop()||new r(c.gl),l.mode=d,c.data.push(l)),l.dirty=!0,l},e.prototype.buildRectangle=function(c,d){var l=c.shape,p=l.x,v=l.y,g=l.width,m=l.height;if(c.fill){var T=u.hex2rgb(c.fillColor),A=c.fillAlpha,P=T[0]*A,F=T[1]*A,k=T[2]*A,I=d.points,U=d.indices,X=I.length/6;I.push(p,v),I.push(P,F,k,A),I.push(p+g,v),I.push(P,F,k,A),I.push(p,v+m),I.push(P,F,k,A),I.push(p+g,v+m),I.push(P,F,k,A),U.push(X,X,X+1,X+2,X+3,X+3)}if(c.lineWidth){var z=c.points;c.points=[p,v,p+g,v,p+g,v+m,p,v+m,p,v],this.buildLine(c,d),c.points=z}},e.prototype.buildRoundedRectangle=function(c,d){var l=c.shape,p=l.x,v=l.y,g=l.width,m=l.height,T=l.radius,A=[];if(A.push(p,v+T),this.quadraticBezierCurve(p,v+m-T,p,v+m,p+T,v+m,A),this.quadraticBezierCurve(p+g-T,v+m,p+g,v+m,p+g,v+m-T,A),this.quadraticBezierCurve(p+g,v+T,p+g,v,p+g-T,v,A),this.quadraticBezierCurve(p+T,v,p,v,p,v+T+1e-10,A),c.fill){var P=u.hex2rgb(c.fillColor),F=c.fillAlpha,k=P[0]*F,I=P[1]*F,U=P[2]*F,X=d.points,z=d.indices,x=X.length/6,w=o(A,null,2),_=0;for(_=0;_<w.length;_+=3)z.push(w[_]+x),z.push(w[_]+x),z.push(w[_+1]+x),z.push(w[_+2]+x),z.push(w[_+2]+x);for(_=0;_<A.length;_++)X.push(A[_],A[++_],k,I,U,F)}if(c.lineWidth){var M=c.points;c.points=A,this.buildLine(c,d),c.points=M}},e.prototype.quadraticBezierCurve=function(c,d,l,p,v,g,m){function T(_,M,b){var E=M-_;return _+E*b}for(var A,P,F,k,I,U,X=20,z=m||[],x=0,w=0;X>=w;w++)x=w/X,A=T(c,l,x),P=T(d,p,x),F=T(l,v,x),k=T(p,g,x),I=T(A,F,x),U=T(P,k,x),z.push(I,U);return z},e.prototype.buildCircle=function(c,d){var l,p,v=c.shape,g=v.x,m=v.y;c.type===n.SHAPES.CIRC?(l=v.radius,p=v.radius):(l=v.width,p=v.height);var T=Math.floor(30*Math.sqrt(v.radius))||Math.floor(15*Math.sqrt(v.width+v.height)),A=2*Math.PI/T,P=0;if(c.fill){var F=u.hex2rgb(c.fillColor),k=c.fillAlpha,I=F[0]*k,U=F[1]*k,X=F[2]*k,z=d.points,x=d.indices,w=z.length/6;for(x.push(w),P=0;T+1>P;P++)z.push(g,m,I,U,X,k),z.push(g+Math.sin(A*P)*l,m+Math.cos(A*P)*p,I,U,X,k),x.push(w++,w++);x.push(w-1)}if(c.lineWidth){var _=c.points;for(c.points=[],P=0;T+1>P;P++)c.points.push(g+Math.sin(A*P)*l,m+Math.cos(A*P)*p);this.buildLine(c,d),c.points=_}},e.prototype.buildLine=function(c,d){var l=0,p=c.points;if(p.length!==0){var v=new a.Point(p[0],p[1]),g=new a.Point(p[p.length-2],p[p.length-1]);if(v.x===g.x&&v.y===g.y){p=p.slice(),p.pop(),p.pop(),g=new a.Point(p[p.length-2],p[p.length-1]);var m=g.x+.5*(v.x-g.x),T=g.y+.5*(v.y-g.y);p.unshift(m,T),p.push(m,T)}var A,P,F,k,I,U,X,z,x,w,_,M,b,E,S,C,D,O,G,R,H,Q,Z,ee=d.points,ie=d.indices,J=p.length/2,se=p.length,B=ee.length/6,L=c.lineWidth/2,N=u.hex2rgb(c.lineColor),j=c.lineAlpha,Y=N[0]*j,W=N[1]*j,V=N[2]*j;for(F=p[0],k=p[1],I=p[2],U=p[3],x=-(k-U),w=F-I,Z=Math.sqrt(x*x+w*w),x/=Z,w/=Z,x*=L,w*=L,ee.push(F-x,k-w,Y,W,V,j),ee.push(F+x,k+w,Y,W,V,j),l=1;J-1>l;l++)F=p[2*(l-1)],k=p[2*(l-1)+1],I=p[2*l],U=p[2*l+1],X=p[2*(l+1)],z=p[2*(l+1)+1],x=-(k-U),w=F-I,Z=Math.sqrt(x*x+w*w),x/=Z,w/=Z,x*=L,w*=L,_=-(U-z),M=I-X,Z=Math.sqrt(_*_+M*M),_/=Z,M/=Z,_*=L,M*=L,S=-w+k-(-w+U),C=-x+I-(-x+F),D=(-x+F)*(-w+U)-(-x+I)*(-w+k),O=-M+z-(-M+U),G=-_+I-(-_+X),R=(-_+X)*(-M+U)-(-_+I)*(-M+z),H=S*G-O*C,Math.abs(H)<.1?(H+=10.1,ee.push(I-x,U-w,Y,W,V,j),ee.push(I+x,U+w,Y,W,V,j)):(A=(C*R-G*D)/H,P=(O*D-S*R)/H,Q=(A-I)*(A-I)+(P-U)*(P-U),Q>19600?(b=x-_,E=w-M,Z=Math.sqrt(b*b+E*E),b/=Z,E/=Z,b*=L,E*=L,ee.push(I-b,U-E),ee.push(Y,W,V,j),ee.push(I+b,U+E),ee.push(Y,W,V,j),ee.push(I-b,U-E),ee.push(Y,W,V,j),se++):(ee.push(A,P),ee.push(Y,W,V,j),ee.push(I-(A-I),U-(P-U)),ee.push(Y,W,V,j)));for(F=p[2*(J-2)],k=p[2*(J-2)+1],I=p[2*(J-1)],U=p[2*(J-1)+1],x=-(k-U),w=F-I,Z=Math.sqrt(x*x+w*w),x/=Z,w/=Z,x*=L,w*=L,ee.push(I-x,U-w),ee.push(Y,W,V,j),ee.push(I+x,U+w),ee.push(Y,W,V,j),ie.push(B),l=0;se>l;l++)ie.push(B++);ie.push(B-1)}},e.prototype.buildComplexPoly=function(c,d){var l=c.points.slice();if(!(l.length<6)){var p=d.indices;d.points=l,d.alpha=c.fillAlpha,d.color=u.hex2rgb(c.fillColor);for(var v,g,m=1/0,T=-(1/0),A=1/0,P=-(1/0),F=0;F<l.length;F+=2)v=l[F],g=l[F+1],m=m>v?v:m,T=v>T?v:T,A=A>g?g:A,P=g>P?g:P;l.push(m,A,T,A,T,P,m,P);var k=l.length/2;for(F=0;k>F;F++)p.push(F)}},e.prototype.buildPoly=function(c,d){var l=c.points;if(!(l.length<6)){var p=d.points,v=d.indices,g=l.length/2,m=u.hex2rgb(c.fillColor),T=c.fillAlpha,A=m[0]*T,P=m[1]*T,F=m[2]*T,k=o(l,null,2);if(!k)return!1;var I=p.length/6,U=0;for(U=0;U<k.length;U+=3)v.push(k[U]+I),v.push(k[U]+I),v.push(k[U+1]+I),v.push(k[U+2]+I),v.push(k[U+2]+I);for(U=0;g>U;U++)p.push(l[2*U],l[2*U+1],A,P,F,T);return!0}}},{"../../const":22,"../../math":33,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63,"../../utils":77,"./WebGLGraphicsData":28,earcut:9}],28:[function(h,f,y){function e(u){this.gl=u,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=u.createBuffer(),this.indexBuffer=u.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}e.prototype.constructor=e,f.exports=e,e.prototype.reset=function(){this.points.length=0,this.indices.length=0},e.prototype.upload=function(){var u=this.gl;this.glPoints=new Float32Array(this.points),u.bindBuffer(u.ARRAY_BUFFER,this.buffer),u.bufferData(u.ARRAY_BUFFER,this.glPoints,u.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,this.indexBuffer),u.bufferData(u.ELEMENT_ARRAY_BUFFER,this.glIndices,u.STATIC_DRAW),this.dirty=!1},e.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],29:[function(h,f,y){var e=f.exports=Object.assign(h("./const"),h("./math"),{utils:h("./utils"),ticker:h("./ticker"),DisplayObject:h("./display/DisplayObject"),Container:h("./display/Container"),Sprite:h("./sprites/Sprite"),ParticleContainer:h("./particles/ParticleContainer"),SpriteRenderer:h("./sprites/webgl/SpriteRenderer"),ParticleRenderer:h("./particles/webgl/ParticleRenderer"),Text:h("./text/Text"),Graphics:h("./graphics/Graphics"),GraphicsData:h("./graphics/GraphicsData"),GraphicsRenderer:h("./graphics/webgl/GraphicsRenderer"),Texture:h("./textures/Texture"),BaseTexture:h("./textures/BaseTexture"),RenderTexture:h("./textures/RenderTexture"),VideoBaseTexture:h("./textures/VideoBaseTexture"),TextureUvs:h("./textures/TextureUvs"),CanvasRenderer:h("./renderers/canvas/CanvasRenderer"),CanvasGraphics:h("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:h("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:h("./renderers/webgl/WebGLRenderer"),WebGLManager:h("./renderers/webgl/managers/WebGLManager"),ShaderManager:h("./renderers/webgl/managers/ShaderManager"),Shader:h("./renderers/webgl/shaders/Shader"),TextureShader:h("./renderers/webgl/shaders/TextureShader"),PrimitiveShader:h("./renderers/webgl/shaders/PrimitiveShader"),ComplexPrimitiveShader:h("./renderers/webgl/shaders/ComplexPrimitiveShader"),ObjectRenderer:h("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:h("./renderers/webgl/utils/RenderTarget"),AbstractFilter:h("./renderers/webgl/filters/AbstractFilter"),FXAAFilter:h("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:h("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(u,a,n,t){return u=u||800,a=a||600,!t&&e.utils.isWebGLSupported()?new e.WebGLRenderer(u,a,n):new e.CanvasRenderer(u,a,n)}})},{"./const":22,"./display/Container":23,"./display/DisplayObject":24,"./graphics/Graphics":25,"./graphics/GraphicsData":26,"./graphics/webgl/GraphicsRenderer":27,"./math":33,"./particles/ParticleContainer":39,"./particles/webgl/ParticleRenderer":41,"./renderers/canvas/CanvasRenderer":44,"./renderers/canvas/utils/CanvasBuffer":45,"./renderers/canvas/utils/CanvasGraphics":46,"./renderers/webgl/WebGLRenderer":49,"./renderers/webgl/filters/AbstractFilter":50,"./renderers/webgl/filters/FXAAFilter":51,"./renderers/webgl/filters/SpriteMaskFilter":52,"./renderers/webgl/managers/ShaderManager":56,"./renderers/webgl/managers/WebGLManager":58,"./renderers/webgl/shaders/ComplexPrimitiveShader":59,"./renderers/webgl/shaders/PrimitiveShader":60,"./renderers/webgl/shaders/Shader":61,"./renderers/webgl/shaders/TextureShader":62,"./renderers/webgl/utils/ObjectRenderer":63,"./renderers/webgl/utils/RenderTarget":65,"./sprites/Sprite":67,"./sprites/webgl/SpriteRenderer":68,"./text/Text":69,"./textures/BaseTexture":70,"./textures/RenderTexture":71,"./textures/Texture":72,"./textures/TextureUvs":73,"./textures/VideoBaseTexture":74,"./ticker":76,"./utils":77}],30:[function(h,f,y){function e(l){return 0>l?-1:l>0?1:0}function u(){for(var l=0;16>l;l++){var p=[];c.push(p);for(var v=0;16>v;v++)for(var g=e(a[l]*a[v]+t[l]*n[v]),m=e(n[l]*a[v]+i[l]*n[v]),T=e(a[l]*t[v]+t[l]*i[v]),A=e(n[l]*t[v]+i[l]*i[v]),P=0;16>P;P++)if(a[P]===g&&n[P]===m&&t[P]===T&&i[P]===A){p.push(P);break}}for(l=0;16>l;l++){var F=new o;F.set(a[l],n[l],t[l],i[l],0,0),r.push(F)}}var a=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],n=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],t=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],i=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],r=[],o=h("./Matrix"),c=[];u();var d={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(l){return a[l]},uY:function(l){return n[l]},vX:function(l){return t[l]},vY:function(l){return i[l]},inv:function(l){return 8&l?15&l:7&-l},add:function(l,p){return c[l][p]},sub:function(l,p){return c[l][d.inv(p)]},rotate180:function(l){return 4^l},isSwapWidthHeight:function(l){return(3&l)===2},byDirection:function(l,p){return 2*Math.abs(l)<=Math.abs(p)?p>=0?d.S:d.N:2*Math.abs(p)<=Math.abs(l)?l>0?d.E:d.W:p>0?l>0?d.SE:d.SW:l>0?d.NE:d.NW},matrixAppendRotationInv:function(l,p,v,g){var m=r[d.inv(p)];v=v||0,g=g||0,m.tx=v,m.ty=g,l.append(m)}};f.exports=d},{"./Matrix":31}],31:[function(h,f,y){function e(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var u=h("./Point");e.prototype.constructor=e,f.exports=e,e.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},e.prototype.set=function(a,n,t,i,r,o){return this.a=a,this.b=n,this.c=t,this.d=i,this.tx=r,this.ty=o,this},e.prototype.toArray=function(a,n){this.array||(this.array=new Float32Array(9));var t=n||this.array;return a?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty,t[8]=1):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0,t[8]=1),t},e.prototype.apply=function(a,n){n=n||new u;var t=a.x,i=a.y;return n.x=this.a*t+this.c*i+this.tx,n.y=this.b*t+this.d*i+this.ty,n},e.prototype.applyInverse=function(a,n){n=n||new u;var t=1/(this.a*this.d+this.c*-this.b),i=a.x,r=a.y;return n.x=this.d*t*i+-this.c*t*r+(this.ty*this.c-this.tx*this.d)*t,n.y=this.a*t*r+-this.b*t*i+(-this.ty*this.a+this.tx*this.b)*t,n},e.prototype.translate=function(a,n){return this.tx+=a,this.ty+=n,this},e.prototype.scale=function(a,n){return this.a*=a,this.d*=n,this.c*=a,this.b*=n,this.tx*=a,this.ty*=n,this},e.prototype.rotate=function(a){var n=Math.cos(a),t=Math.sin(a),i=this.a,r=this.c,o=this.tx;return this.a=i*n-this.b*t,this.b=i*t+this.b*n,this.c=r*n-this.d*t,this.d=r*t+this.d*n,this.tx=o*n-this.ty*t,this.ty=o*t+this.ty*n,this},e.prototype.append=function(a){var n=this.a,t=this.b,i=this.c,r=this.d;return this.a=a.a*n+a.b*i,this.b=a.a*t+a.b*r,this.c=a.c*n+a.d*i,this.d=a.c*t+a.d*r,this.tx=a.tx*n+a.ty*i+this.tx,this.ty=a.tx*t+a.ty*r+this.ty,this},e.prototype.setTransform=function(a,n,t,i,r,o,c,d,l){var p,v,g,m,T,A,P,F,k,I;return T=Math.sin(c),A=Math.cos(c),P=Math.cos(l),F=Math.sin(l),k=-Math.sin(d),I=Math.cos(d),p=A*r,v=T*r,g=-T*o,m=A*o,this.a=P*p+F*g,this.b=P*v+F*m,this.c=k*p+I*g,this.d=k*v+I*m,this.tx=a+(t*p+i*g),this.ty=n+(t*v+i*m),this},e.prototype.prepend=function(a){var n=this.tx;if(a.a!==1||a.b!==0||a.c!==0||a.d!==1){var t=this.a,i=this.c;this.a=t*a.a+this.b*a.c,this.b=t*a.b+this.b*a.d,this.c=i*a.a+this.d*a.c,this.d=i*a.b+this.d*a.d}return this.tx=n*a.a+this.ty*a.c+a.tx,this.ty=n*a.b+this.ty*a.d+a.ty,this},e.prototype.invert=function(){var a=this.a,n=this.b,t=this.c,i=this.d,r=this.tx,o=a*i-n*t;return this.a=i/o,this.b=-n/o,this.c=-t/o,this.d=a/o,this.tx=(t*this.ty-i*r)/o,this.ty=-(a*this.ty-n*r)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var a=new e;return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},e.prototype.copy=function(a){return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},e.IDENTITY=new e,e.TEMP_MATRIX=new e},{"./Point":32}],32:[function(h,f,y){function e(u,a){this.x=u||0,this.y=a||0}e.prototype.constructor=e,f.exports=e,e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copy=function(u){this.set(u.x,u.y)},e.prototype.equals=function(u){return u.x===this.x&&u.y===this.y},e.prototype.set=function(u,a){this.x=u||0,this.y=a||(a!==0?this.x:0)}},{}],33:[function(h,f,y){f.exports={Point:h("./Point"),Matrix:h("./Matrix"),GroupD8:h("./GroupD8"),Circle:h("./shapes/Circle"),Ellipse:h("./shapes/Ellipse"),Polygon:h("./shapes/Polygon"),Rectangle:h("./shapes/Rectangle"),RoundedRectangle:h("./shapes/RoundedRectangle")}},{"./GroupD8":30,"./Matrix":31,"./Point":32,"./shapes/Circle":34,"./shapes/Ellipse":35,"./shapes/Polygon":36,"./shapes/Rectangle":37,"./shapes/RoundedRectangle":38}],34:[function(h,f,y){function e(n,t,i){this.x=n||0,this.y=t||0,this.radius=i||0,this.type=a.SHAPES.CIRC}var u=h("./Rectangle"),a=h("../../const");e.prototype.constructor=e,f.exports=e,e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(n,t){if(this.radius<=0)return!1;var i=this.x-n,r=this.y-t,o=this.radius*this.radius;return i*=i,r*=r,o>=i+r},e.prototype.getBounds=function(){return new u(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":22,"./Rectangle":37}],35:[function(h,f,y){function e(n,t,i,r){this.x=n||0,this.y=t||0,this.width=i||0,this.height=r||0,this.type=a.SHAPES.ELIP}var u=h("./Rectangle"),a=h("../../const");e.prototype.constructor=e,f.exports=e,e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(n,t){if(this.width<=0||this.height<=0)return!1;var i=(n-this.x)/this.width,r=(t-this.y)/this.height;return i*=i,r*=r,1>=i+r},e.prototype.getBounds=function(){return new u(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":22,"./Rectangle":37}],36:[function(h,f,y){function e(n){var t=n;if(!Array.isArray(t)){t=new Array(arguments.length);for(var i=0;i<t.length;++i)t[i]=arguments[i]}if(t[0]instanceof u){for(var r=[],o=0,c=t.length;c>o;o++)r.push(t[o].x,t[o].y);t=r}this.closed=!0,this.points=t,this.type=a.SHAPES.POLY}var u=h("../Point"),a=h("../../const");e.prototype.constructor=e,f.exports=e,e.prototype.clone=function(){return new e(this.points.slice())},e.prototype.contains=function(n,t){for(var i=!1,r=this.points.length/2,o=0,c=r-1;r>o;c=o++){var d=this.points[2*o],l=this.points[2*o+1],p=this.points[2*c],v=this.points[2*c+1],g=l>t!=v>t&&(p-d)*(t-l)/(v-l)+d>n;g&&(i=!i)}return i}},{"../../const":22,"../Point":32}],37:[function(h,f,y){function e(a,n,t,i){this.x=a||0,this.y=n||0,this.width=t||0,this.height=i||0,this.type=u.SHAPES.RECT}var u=h("../../const");e.prototype.constructor=e,f.exports=e,e.EMPTY=new e(0,0,0,0),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(a,n){return this.width<=0||this.height<=0?!1:a>=this.x&&a<this.x+this.width&&n>=this.y&&n<this.y+this.height}},{"../../const":22}],38:[function(h,f,y){function e(a,n,t,i,r){this.x=a||0,this.y=n||0,this.width=t||0,this.height=i||0,this.radius=r||20,this.type=u.SHAPES.RREC}var u=h("../../const");e.prototype.constructor=e,f.exports=e,e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(a,n){return this.width<=0||this.height<=0?!1:a>=this.x&&a<=this.x+this.width&&n>=this.y&&n<=this.y+this.height}},{"../../const":22}],39:[function(h,f,y){function e(n,t,i){u.call(this),i=i||15e3,n=n||15e3;var r=16384;i>r&&(i=r),i>n&&(i=n),this._properties=[!1,!0,!1,!1,!1],this._maxSize=n,this._batchSize=i,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=a.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(t)}var u=h("../display/Container"),a=h("../const");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.setProperties=function(n){n&&(this._properties[0]="scale"in n?!!n.scale:this._properties[0],this._properties[1]="position"in n?!!n.position:this._properties[1],this._properties[2]="rotation"in n?!!n.rotation:this._properties[2],this._properties[3]="uvs"in n?!!n.uvs:this._properties[3],this._properties[4]="alpha"in n?!!n.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(n){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(n.setObjectRenderer(n.plugins.particle),n.plugins.particle.render(this))},e.prototype.onChildrenChange=function(n){var t=Math.floor(n/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},e.prototype.renderCanvas=function(n){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=n.context,i=this.worldTransform,r=!0,o=0,c=0,d=0,l=0,p=n.blendModes[this.blendMode];p!==t.globalCompositeOperation&&(t.globalCompositeOperation=p),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var v=0;v<this.children.length;++v){var g=this.children[v];if(g.visible){var m=g.texture.frame;if(t.globalAlpha=this.worldAlpha*g.alpha,g.rotation%(2*Math.PI)===0)r&&(t.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),r=!1),o=g.anchor.x*(-m.width*g.scale.x)+g.position.x+.5,c=g.anchor.y*(-m.height*g.scale.y)+g.position.y+.5,d=m.width*g.scale.x,l=m.height*g.scale.y;else{r||(r=!0),g.displayObjectUpdateTransform();var T=g.worldTransform;n.roundPixels?t.setTransform(T.a,T.b,T.c,T.d,0|T.tx,0|T.ty):t.setTransform(T.a,T.b,T.c,T.d,T.tx,T.ty),o=g.anchor.x*-m.width+.5,c=g.anchor.y*-m.height+.5,d=m.width,l=m.height}t.drawImage(g.texture.baseTexture.source,m.x,m.y,m.width,m.height,o,c,d,l)}}}},e.prototype.destroy=function(){if(u.prototype.destroy.apply(this,arguments),this._buffers)for(var n=0;n<this._buffers.length;++n)this._buffers[n].destroy();this._properties=null,this._buffers=null}},{"../const":22,"../display/Container":23}],40:[function(h,f,y){function e(u,a,n,t){this.gl=u,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=t,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<a.length;i++){var r=a[i];n[i]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}e.prototype.constructor=e,f.exports=e,e.prototype.initBuffers=function(){var u,a,n=this.gl,t=0;for(this.dynamicStride=0,u=0;u<this.dynamicProperties.length;u++)a=this.dynamicProperties[u],a.offset=t,t+=a.size,this.dynamicStride+=a.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),n.bufferData(n.ARRAY_BUFFER,this.dynamicData,n.DYNAMIC_DRAW);var i=0;for(this.staticStride=0,u=0;u<this.staticProperties.length;u++)a=this.staticProperties[u],a.offset=i,i+=a.size,this.staticStride+=a.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),n.bufferData(n.ARRAY_BUFFER,this.staticData,n.DYNAMIC_DRAW)},e.prototype.uploadDynamic=function(u,a,n){for(var t=this.gl,i=0;i<this.dynamicProperties.length;i++){var r=this.dynamicProperties[i];r.uploadFunction(u,a,n,this.dynamicData,this.dynamicStride,r.offset)}t.bindBuffer(t.ARRAY_BUFFER,this.dynamicBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.dynamicData)},e.prototype.uploadStatic=function(u,a,n){for(var t=this.gl,i=0;i<this.staticProperties.length;i++){var r=this.staticProperties[i];r.uploadFunction(u,a,n,this.staticData,this.staticStride,r.offset)}t.bindBuffer(t.ARRAY_BUFFER,this.staticBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.staticData)},e.prototype.bind=function(){var u,a,n=this.gl;for(n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),u=0;u<this.dynamicProperties.length;u++)a=this.dynamicProperties[u],n.vertexAttribPointer(a.attribute,a.size,n.FLOAT,!1,4*this.dynamicStride,4*a.offset);for(n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),u=0;u<this.staticProperties.length;u++)a=this.staticProperties[u],n.vertexAttribPointer(a.attribute,a.size,n.FLOAT,!1,4*this.staticStride,4*a.offset)},e.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],41:[function(h,f,y){function e(r){u.call(this,r);var o=98304;this.indices=new Uint16Array(o);for(var c=0,d=0;o>c;c+=6,d+=4)this.indices[c+0]=d+0,this.indices[c+1]=d+1,this.indices[c+2]=d+2,this.indices[c+3]=d+0,this.indices[c+4]=d+2,this.indices[c+5]=d+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new i.Matrix}var u=h("../../renderers/webgl/utils/ObjectRenderer"),a=h("../../renderers/webgl/WebGLRenderer"),n=h("./ParticleShader"),t=h("./ParticleBuffer"),i=h("../../math");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,a.registerPlugin("particle",e),e.prototype.onContextChange=function(){var r=this.renderer.gl;this.shader=new n(this.renderer.shaderManager),this.indexBuffer=r.createBuffer(),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,this.indices,r.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},e.prototype.start=function(){var r=this.renderer.gl;r.activeTexture(r.TEXTURE0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var o=this.shader;this.renderer.shaderManager.setShader(o)},e.prototype.render=function(r){var o=r.children,c=o.length,d=r._maxSize,l=r._batchSize;if(c!==0){c>d&&(c=d),r._buffers||(r._buffers=this.generateBuffers(r)),this.renderer.blendModeManager.setBlendMode(r.blendMode);var p=this.renderer.gl,v=r.worldTransform.copy(this.tempMatrix);v.prepend(this.renderer.currentRenderTarget.projectionMatrix),p.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,v.toArray(!0)),p.uniform1f(this.shader.uniforms.uAlpha._location,r.worldAlpha);var g=o[0]._texture.baseTexture;if(g._glTextures[p.id])p.bindTexture(p.TEXTURE_2D,g._glTextures[p.id]);else{if(!this.renderer.updateTexture(g))return;r._properties[0]&&r._properties[3]||(r._bufferToUpdate=0)}for(var m=0,T=0;c>m;m+=l,T+=1){var A=c-m;A>l&&(A=l);var P=r._buffers[T];P.uploadDynamic(o,m,A),r._bufferToUpdate===T&&(P.uploadStatic(o,m,A),r._bufferToUpdate=T+1),P.bind(this.shader),p.drawElements(p.TRIANGLES,6*A,p.UNSIGNED_SHORT,0),this.renderer.drawCount++}}},e.prototype.generateBuffers=function(r){var o,c=this.renderer.gl,d=[],l=r._maxSize,p=r._batchSize,v=r._properties;for(o=0;l>o;o+=p)d.push(new t(c,this.properties,v,p));return d},e.prototype.uploadVertices=function(r,o,c,d,l,p){for(var v,g,m,T,A,P,F,k,I,U=0;c>U;U++)v=r[o+U],g=v._texture,T=v.scale.x,A=v.scale.y,g.trim?(m=g.trim,F=m.x-v.anchor.x*m.width,P=F+g.crop.width,I=m.y-v.anchor.y*m.height,k=I+g.crop.height):(P=g._frame.width*(1-v.anchor.x),F=g._frame.width*-v.anchor.x,k=g._frame.height*(1-v.anchor.y),I=g._frame.height*-v.anchor.y),d[p]=F*T,d[p+1]=I*A,d[p+l]=P*T,d[p+l+1]=I*A,d[p+2*l]=P*T,d[p+2*l+1]=k*A,d[p+3*l]=F*T,d[p+3*l+1]=k*A,p+=4*l},e.prototype.uploadPosition=function(r,o,c,d,l,p){for(var v=0;c>v;v++){var g=r[o+v].position;d[p]=g.x,d[p+1]=g.y,d[p+l]=g.x,d[p+l+1]=g.y,d[p+2*l]=g.x,d[p+2*l+1]=g.y,d[p+3*l]=g.x,d[p+3*l+1]=g.y,p+=4*l}},e.prototype.uploadRotation=function(r,o,c,d,l,p){for(var v=0;c>v;v++){var g=r[o+v].rotation;d[p]=g,d[p+l]=g,d[p+2*l]=g,d[p+3*l]=g,p+=4*l}},e.prototype.uploadUvs=function(r,o,c,d,l,p){for(var v=0;c>v;v++){var g=r[o+v]._texture._uvs;g?(d[p]=g.x0,d[p+1]=g.y0,d[p+l]=g.x1,d[p+l+1]=g.y1,d[p+2*l]=g.x2,d[p+2*l+1]=g.y2,d[p+3*l]=g.x3,d[p+3*l+1]=g.y3,p+=4*l):(d[p]=0,d[p+1]=0,d[p+l]=0,d[p+l+1]=0,d[p+2*l]=0,d[p+2*l+1]=0,d[p+3*l]=0,d[p+3*l+1]=0,p+=4*l)}},e.prototype.uploadAlpha=function(r,o,c,d,l,p){for(var v=0;c>v;v++){var g=r[o+v].alpha;d[p]=g,d[p+l]=g,d[p+2*l]=g,d[p+3*l]=g,p+=4*l}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),u.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../math":33,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63,"./ParticleBuffer":40,"./ParticleShader":42}],42:[function(h,f,y){function e(a){u.call(this,a,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join(`
`),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join(`
`),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var u=h("../../renderers/webgl/shaders/TextureShader");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e},{"../../renderers/webgl/shaders/TextureShader":62}],43:[function(h,f,y){function e(i,r,o,c){if(t.call(this),u.sayHello(i),c)for(var d in n.DEFAULT_RENDER_OPTIONS)typeof c[d]>"u"&&(c[d]=n.DEFAULT_RENDER_OPTIONS[d]);else c=n.DEFAULT_RENDER_OPTIONS;this.type=n.RENDERER_TYPE.UNKNOWN,this.width=r||800,this.height=o||600,this.view=c.view||document.createElement("canvas"),this.resolution=c.resolution,this.transparent=c.transparent,this.autoResize=c.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=c.preserveDrawingBuffer,this.clearBeforeRender=c.clearBeforeRender,this.roundPixels=c.roundPixels,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=c.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new a.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var u=h("../utils"),a=h("../math"),n=h("../const"),t=h("eventemitter3");e.prototype=Object.create(t.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(i){this._backgroundColor=i,this._backgroundColorString=u.hex2string(i),u.hex2rgb(i,this._backgroundColorRgb)}}}),e.prototype.resize=function(i,r){this.width=i*this.resolution,this.height=r*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},e.prototype.destroy=function(i){i&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=n.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{"../const":22,"../math":33,"../utils":77,eventemitter3:10}],44:[function(h,f,y){function e(r,o,c){c=c||{},u.call(this,"Canvas",r,o,c),this.type=i.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new a,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new t.Matrix,worldAlpha:1},this.resize(r,o)}var u=h("../SystemRenderer"),a=h("./utils/CanvasMaskManager"),n=h("../../utils"),t=h("../../math"),i=h("../../const");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,n.pluginTarget.mixin(e),e.prototype.render=function(r){this.emit("prerender");var o=r.parent;this._lastObjectRendered=r,r.parent=this._tempDisplayObjectParent,r.updateTransform(),r.parent=o,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.context.globalCompositeOperation=this.blendModes[i.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(r,this.context),this.emit("postrender")},e.prototype.destroy=function(r){this.destroyPlugins(),u.prototype.destroy.call(this,r),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.renderDisplayObject=function(r,o){var c=this.context;this.context=o,r.renderCanvas(this),this.context=c},e.prototype.resize=function(r,o){u.prototype.resize.call(this,r,o),this.smoothProperty&&(this.context[this.smoothProperty]=i.SCALE_MODES.DEFAULT===i.SCALE_MODES.LINEAR)},e.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},n.canUseNewCanvasBlendModes()?(this.blendModes[i.BLEND_MODES.NORMAL]="source-over",this.blendModes[i.BLEND_MODES.ADD]="lighter",this.blendModes[i.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[i.BLEND_MODES.SCREEN]="screen",this.blendModes[i.BLEND_MODES.OVERLAY]="overlay",this.blendModes[i.BLEND_MODES.DARKEN]="darken",this.blendModes[i.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[i.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[i.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[i.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[i.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[i.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[i.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[i.BLEND_MODES.HUE]="hue",this.blendModes[i.BLEND_MODES.SATURATION]="saturate",this.blendModes[i.BLEND_MODES.COLOR]="color",this.blendModes[i.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[i.BLEND_MODES.NORMAL]="source-over",this.blendModes[i.BLEND_MODES.ADD]="lighter",this.blendModes[i.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[i.BLEND_MODES.SCREEN]="source-over",this.blendModes[i.BLEND_MODES.OVERLAY]="source-over",this.blendModes[i.BLEND_MODES.DARKEN]="source-over",this.blendModes[i.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[i.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[i.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[i.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[i.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[i.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[i.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[i.BLEND_MODES.HUE]="source-over",this.blendModes[i.BLEND_MODES.SATURATION]="source-over",this.blendModes[i.BLEND_MODES.COLOR]="source-over",this.blendModes[i.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":22,"../../math":33,"../../utils":77,"../SystemRenderer":43,"./utils/CanvasMaskManager":47}],45:[function(h,f,y){function e(u,a){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=u,this.canvas.height=a}e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{width:{get:function(){return this.canvas.width},set:function(u){this.canvas.width=u}},height:{get:function(){return this.canvas.height},set:function(u){this.canvas.height=u}}}),e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(u,a){this.canvas.width=u,this.canvas.height=a},e.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],46:[function(h,f,y){var e=h("../../../const"),u={};f.exports=u,u.renderGraphics=function(a,n){var t=a.worldAlpha;a.dirty&&(this.updateGraphicsTint(a),a.dirty=!1);for(var i=0;i<a.graphicsData.length;i++){var r=a.graphicsData[i],o=r.shape,c=r._fillTint,d=r._lineTint;if(n.lineWidth=r.lineWidth,r.type===e.SHAPES.POLY){n.beginPath();var l=o.points;n.moveTo(l[0],l[1]);for(var p=1;p<l.length/2;p++)n.lineTo(l[2*p],l[2*p+1]);o.closed&&n.lineTo(l[0],l[1]),l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&n.closePath(),r.fill&&(n.globalAlpha=r.fillAlpha*t,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),r.lineWidth&&(n.globalAlpha=r.lineAlpha*t,n.strokeStyle="#"+("00000"+(0|d).toString(16)).substr(-6),n.stroke())}else if(r.type===e.SHAPES.RECT)(r.fillColor||r.fillColor===0)&&(n.globalAlpha=r.fillAlpha*t,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fillRect(o.x,o.y,o.width,o.height)),r.lineWidth&&(n.globalAlpha=r.lineAlpha*t,n.strokeStyle="#"+("00000"+(0|d).toString(16)).substr(-6),n.strokeRect(o.x,o.y,o.width,o.height));else if(r.type===e.SHAPES.CIRC)n.beginPath(),n.arc(o.x,o.y,o.radius,0,2*Math.PI),n.closePath(),r.fill&&(n.globalAlpha=r.fillAlpha*t,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),r.lineWidth&&(n.globalAlpha=r.lineAlpha*t,n.strokeStyle="#"+("00000"+(0|d).toString(16)).substr(-6),n.stroke());else if(r.type===e.SHAPES.ELIP){var v=2*o.width,g=2*o.height,m=o.x-v/2,T=o.y-g/2;n.beginPath();var A=.5522848,P=v/2*A,F=g/2*A,k=m+v,I=T+g,U=m+v/2,X=T+g/2;n.moveTo(m,X),n.bezierCurveTo(m,X-F,U-P,T,U,T),n.bezierCurveTo(U+P,T,k,X-F,k,X),n.bezierCurveTo(k,X+F,U+P,I,U,I),n.bezierCurveTo(U-P,I,m,X+F,m,X),n.closePath(),r.fill&&(n.globalAlpha=r.fillAlpha*t,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),r.lineWidth&&(n.globalAlpha=r.lineAlpha*t,n.strokeStyle="#"+("00000"+(0|d).toString(16)).substr(-6),n.stroke())}else if(r.type===e.SHAPES.RREC){var z=o.x,x=o.y,w=o.width,_=o.height,M=o.radius,b=Math.min(w,_)/2|0;M=M>b?b:M,n.beginPath(),n.moveTo(z,x+M),n.lineTo(z,x+_-M),n.quadraticCurveTo(z,x+_,z+M,x+_),n.lineTo(z+w-M,x+_),n.quadraticCurveTo(z+w,x+_,z+w,x+_-M),n.lineTo(z+w,x+M),n.quadraticCurveTo(z+w,x,z+w-M,x),n.lineTo(z+M,x),n.quadraticCurveTo(z,x,z,x+M),n.closePath(),(r.fillColor||r.fillColor===0)&&(n.globalAlpha=r.fillAlpha*t,n.fillStyle="#"+("00000"+(0|c).toString(16)).substr(-6),n.fill()),r.lineWidth&&(n.globalAlpha=r.lineAlpha*t,n.strokeStyle="#"+("00000"+(0|d).toString(16)).substr(-6),n.stroke())}}},u.renderGraphicsMask=function(a,n){var t=a.graphicsData.length;if(t!==0){n.beginPath();for(var i=0;t>i;i++){var r=a.graphicsData[i],o=r.shape;if(r.type===e.SHAPES.POLY){var c=o.points;n.moveTo(c[0],c[1]);for(var d=1;d<c.length/2;d++)n.lineTo(c[2*d],c[2*d+1]);c[0]===c[c.length-2]&&c[1]===c[c.length-1]&&n.closePath()}else if(r.type===e.SHAPES.RECT)n.rect(o.x,o.y,o.width,o.height),n.closePath();else if(r.type===e.SHAPES.CIRC)n.arc(o.x,o.y,o.radius,0,2*Math.PI),n.closePath();else if(r.type===e.SHAPES.ELIP){var l=2*o.width,p=2*o.height,v=o.x-l/2,g=o.y-p/2,m=.5522848,T=l/2*m,A=p/2*m,P=v+l,F=g+p,k=v+l/2,I=g+p/2;n.moveTo(v,I),n.bezierCurveTo(v,I-A,k-T,g,k,g),n.bezierCurveTo(k+T,g,P,I-A,P,I),n.bezierCurveTo(P,I+A,k+T,F,k,F),n.bezierCurveTo(k-T,F,v,I+A,v,I),n.closePath()}else if(r.type===e.SHAPES.RREC){var U=o.x,X=o.y,z=o.width,x=o.height,w=o.radius,_=Math.min(z,x)/2|0;w=w>_?_:w,n.moveTo(U,X+w),n.lineTo(U,X+x-w),n.quadraticCurveTo(U,X+x,U+w,X+x),n.lineTo(U+z-w,X+x),n.quadraticCurveTo(U+z,X+x,U+z,X+x-w),n.lineTo(U+z,X+w),n.quadraticCurveTo(U+z,X,U+z-w,X),n.lineTo(U+w,X),n.quadraticCurveTo(U,X,U,X+w),n.closePath()}}}},u.updateGraphicsTint=function(a){if(a.tint!==16777215||a._prevTint!==a.tint){a._prevTint=a.tint;for(var n=(a.tint>>16&255)/255,t=(a.tint>>8&255)/255,i=(255&a.tint)/255,r=0;r<a.graphicsData.length;r++){var o=a.graphicsData[r],c=0|o.fillColor,d=0|o.lineColor;o._fillTint=((c>>16&255)/255*n*255<<16)+((c>>8&255)/255*t*255<<8)+(255&c)/255*i*255,o._lineTint=((d>>16&255)/255*n*255<<16)+((d>>8&255)/255*t*255<<8)+(255&d)/255*i*255}}}},{"../../../const":22}],47:[function(h,f,y){function e(){}var u=h("./CanvasGraphics");e.prototype.constructor=e,f.exports=e,e.prototype.pushMask=function(a,n){n.context.save();var t=a.alpha,i=a.worldTransform,r=n.resolution;n.context.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r),a.texture||(u.renderGraphicsMask(a,n.context),n.context.clip()),a.worldAlpha=t},e.prototype.popMask=function(a){a.context.restore()},e.prototype.destroy=function(){}},{"./CanvasGraphics":46}],48:[function(h,f,y){var e=h("../../../utils"),u={};f.exports=u,u.getTintedTexture=function(a,n){var t=a.texture;n=u.roundColor(n);var i="#"+("00000"+(0|n).toString(16)).substr(-6);if(t.tintCache=t.tintCache||{},t.tintCache[i])return t.tintCache[i];var r=u.canvas||document.createElement("canvas");if(u.tintMethod(t,n,r),u.convertTintToImage){var o=new Image;o.src=r.toDataURL(),t.tintCache[i]=o}else t.tintCache[i]=r,u.canvas=null;return r},u.tintWithMultiply=function(a,n,t){var i=t.getContext("2d"),r=a.baseTexture.resolution,o=a.crop.clone();o.x*=r,o.y*=r,o.width*=r,o.height*=r,t.width=o.width,t.height=o.height,i.fillStyle="#"+("00000"+(0|n).toString(16)).substr(-6),i.fillRect(0,0,o.width,o.height),i.globalCompositeOperation="multiply",i.drawImage(a.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),i.globalCompositeOperation="destination-atop",i.drawImage(a.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},u.tintWithOverlay=function(a,n,t){var i=t.getContext("2d"),r=a.baseTexture.resolution,o=a.crop.clone();o.x*=r,o.y*=r,o.width*=r,o.height*=r,t.width=o.width,t.height=o.height,i.globalCompositeOperation="copy",i.fillStyle="#"+("00000"+(0|n).toString(16)).substr(-6),i.fillRect(0,0,o.width,o.height),i.globalCompositeOperation="destination-atop",i.drawImage(a.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height)},u.tintWithPerPixel=function(a,n,t){var i=t.getContext("2d"),r=a.baseTexture.resolution,o=a.crop.clone();o.x*=r,o.y*=r,o.width*=r,o.height*=r,t.width=o.width,t.height=o.height,i.globalCompositeOperation="copy",i.drawImage(a.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var c=e.hex2rgb(n),d=c[0],l=c[1],p=c[2],v=i.getImageData(0,0,o.width,o.height),g=v.data,m=0;m<g.length;m+=4)g[m+0]*=d,g[m+1]*=l,g[m+2]*=p;i.putImageData(v,0,0)},u.roundColor=function(a){var n=u.cacheStepsPerColorChannel,t=e.hex2rgb(a);return t[0]=Math.min(255,t[0]/n*n),t[1]=Math.min(255,t[1]/n*n),t[2]=Math.min(255,t[2]/n*n),e.rgb2hex(t)},u.cacheStepsPerColorChannel=8,u.convertTintToImage=!1,u.canUseMultiply=e.canUseNewCanvasBlendModes(),u.tintMethod=u.canUseMultiply?u.tintWithMultiply:u.tintWithPerPixel},{"../../../utils":77}],49:[function(h,f,y){function e(v,g,m){m=m||{},u.call(this,"WebGL",v,g,m),this.type=p.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!m.forceFXAA&&m.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:m.antialias,premultipliedAlpha:this.transparent&&this.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:m.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new a(this),this.maskManager=new n(this),this.stencilManager=new t(this),this.filterManager=new i(this),this.blendModeManager=new r(this),this.currentRenderTarget=null,this.currentRenderer=new c(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._managedTextures=[],this._renderTargetStack=[]}var u=h("../SystemRenderer"),a=h("./managers/ShaderManager"),n=h("./managers/MaskManager"),t=h("./managers/StencilManager"),i=h("./managers/FilterManager"),r=h("./managers/BlendModeManager"),o=h("./utils/RenderTarget"),c=h("./utils/ObjectRenderer"),d=h("./filters/FXAAFilter"),l=h("../../utils"),p=h("../../const");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,l.pluginTarget.mixin(e),e.glContextId=0,e.prototype._createContext=function(){var v=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=v,!v)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=e.glContextId++,v.id=this.glContextId,v.renderer=this},e.prototype._initContext=function(){var v=this.gl;v.disable(v.DEPTH_TEST),v.disable(v.CULL_FACE),v.enable(v.BLEND),this.renderTarget=new o(v,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",v),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!v.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new d])},e.prototype.render=function(v){if(this.emit("prerender"),!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=v,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,v.filterArea=this.renderTarget.size,v.filters=this._FXAAFilter);var g=v.parent;v.parent=this._tempDisplayObjectParent,v.updateTransform(),v.parent=g;var m=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?m.clearColor(0,0,0,0):m.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),m.clear(m.COLOR_BUFFER_BIT)),this.renderDisplayObject(v,this.renderTarget),this.emit("postrender")}},e.prototype.renderDisplayObject=function(v,g,m){this.setRenderTarget(g),m&&g.clear(),this.filterManager.setFilterStack(g.filterStack),v.renderWebGL(this),this.currentRenderer.flush()},e.prototype.setObjectRenderer=function(v){this.currentRenderer!==v&&(this.currentRenderer.stop(),this.currentRenderer=v,this.currentRenderer.start())},e.prototype.setRenderTarget=function(v){this.currentRenderTarget!==v&&(this.currentRenderTarget=v,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(v.stencilMaskStack))},e.prototype.resize=function(v,g){u.prototype.resize.call(this,v,g),this.filterManager.resize(v,g),this.renderTarget.resize(v,g),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},e.prototype.updateTexture=function(v){if(v=v.baseTexture||v,v.hasLoaded){var g=this.gl;return v._glTextures[g.id]||(v._glTextures[g.id]=g.createTexture(),v.on("update",this.updateTexture,this),v.on("dispose",this.destroyTexture,this),this._managedTextures.push(v)),g.bindTexture(g.TEXTURE_2D,v._glTextures[g.id]),g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,v.premultipliedAlpha),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,v.source),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,v.scaleMode===p.SCALE_MODES.LINEAR?g.LINEAR:g.NEAREST),v.mipmap&&v.isPowerOfTwo?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,v.scaleMode===p.SCALE_MODES.LINEAR?g.LINEAR_MIPMAP_LINEAR:g.NEAREST_MIPMAP_NEAREST),g.generateMipmap(g.TEXTURE_2D)):g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,v.scaleMode===p.SCALE_MODES.LINEAR?g.LINEAR:g.NEAREST),v.isPowerOfTwo?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE)),v._glTextures[g.id]}},e.prototype.destroyTexture=function(v,g){if(v=v.baseTexture||v,v.hasLoaded&&v._glTextures[this.gl.id]&&(this.gl.deleteTexture(v._glTextures[this.gl.id]),delete v._glTextures[this.gl.id],!g)){var m=this._managedTextures.indexOf(v);m!==-1&&l.removeItems(this._managedTextures,m,1)}},e.prototype.handleContextLost=function(v){v.preventDefault()},e.prototype.handleContextRestored=function(){this._initContext();for(var v=0;v<this._managedTextures.length;++v){var g=this._managedTextures[v];g._glTextures[this.gl.id]&&delete g._glTextures[this.gl.id]}},e.prototype.destroy=function(v){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var g=0;g<this._managedTextures.length;++g){var m=this._managedTextures[g];this.destroyTexture(m,!0),m.off("update",this.updateTexture,this),m.off("dispose",this.destroyTexture,this)}u.prototype.destroy.call(this,v),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.blendModeManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this._managedTextures=null,this.drawCount=0,this.gl.useProgram(null),this.gl.flush(),this.gl=null},e.prototype._mapGlModes=function(){var v=this.gl;this.blendModes||(this.blendModes={},this.blendModes[p.BLEND_MODES.NORMAL]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.ADD]=[v.ONE,v.DST_ALPHA],this.blendModes[p.BLEND_MODES.MULTIPLY]=[v.DST_COLOR,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.SCREEN]=[v.ONE,v.ONE_MINUS_SRC_COLOR],this.blendModes[p.BLEND_MODES.OVERLAY]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.DARKEN]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.LIGHTEN]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.COLOR_DODGE]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.COLOR_BURN]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.HARD_LIGHT]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.SOFT_LIGHT]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.DIFFERENCE]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.EXCLUSION]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.HUE]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.SATURATION]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.COLOR]=[v.ONE,v.ONE_MINUS_SRC_ALPHA],this.blendModes[p.BLEND_MODES.LUMINOSITY]=[v.ONE,v.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[p.DRAW_MODES.POINTS]=v.POINTS,this.drawModes[p.DRAW_MODES.LINES]=v.LINES,this.drawModes[p.DRAW_MODES.LINE_LOOP]=v.LINE_LOOP,this.drawModes[p.DRAW_MODES.LINE_STRIP]=v.LINE_STRIP,this.drawModes[p.DRAW_MODES.TRIANGLES]=v.TRIANGLES,this.drawModes[p.DRAW_MODES.TRIANGLE_STRIP]=v.TRIANGLE_STRIP,this.drawModes[p.DRAW_MODES.TRIANGLE_FAN]=v.TRIANGLE_FAN)}},{"../../const":22,"../../utils":77,"../SystemRenderer":43,"./filters/FXAAFilter":51,"./managers/BlendModeManager":53,"./managers/FilterManager":54,"./managers/MaskManager":55,"./managers/ShaderManager":56,"./managers/StencilManager":57,"./utils/ObjectRenderer":63,"./utils/RenderTarget":65}],50:[function(h,f,y){function e(a,n,t){this.shaders=[],this.padding=0,this.uniforms=t||{},this.vertexSrc=a||u.defaultVertexSrc,this.fragmentSrc=n||u.defaultFragmentSrc}var u=h("../shaders/TextureShader");e.prototype.constructor=e,f.exports=e,e.prototype.getShader=function(a){var n=a.gl,t=this.shaders[n.id];return t||(t=new u(a.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[n.id]=t),t},e.prototype.applyFilter=function(a,n,t,i){var r=this.getShader(a);a.filterManager.applyFilter(r,n,t,i)},e.prototype.syncUniform=function(a){for(var n=0,t=this.shaders.length;t>n;++n)this.shaders[n].syncUniform(a)}},{"../shaders/TextureShader":62}],51:[function(h,f,y){function e(){u.call(this,`
precision mediump float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

uniform mat3 projectionMatrix;
uniform vec2 resolution;

varying vec2 vTextureCoord;
varying vec4 vColor;

varying vec2 vResolution;

//texcoords computed in vertex step
//to avoid dependent texture reads
varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;


void texcoords(vec2 fragCoord, vec2 resolution,
            out vec2 v_rgbNW, out vec2 v_rgbNE,
            out vec2 v_rgbSW, out vec2 v_rgbSE,
            out vec2 v_rgbM) {
    vec2 inverseVP = 1.0 / resolution.xy;
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
   vColor = vec4(aColor.rgb * aColor.a, aColor.a);
   vResolution = resolution;

   //compute the texture coords and send them to varyings
   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,`precision lowp float;


/**
Basic FXAA implementation based on the code on geeks3d.com with the
modification that the texture2DLod stuff was removed since it's
unsupported by WebGL.

--

From:
https://github.com/mitsuhiko/webgl-meincraft

Copyright (c) 2011 by Armin Ronacher.

Some rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.

    * Redistributions in binary form must reproduce the above
      copyright notice, this list of conditions and the following
      disclaimer in the documentation and/or other materials provided
      with the distribution.

    * The names of the contributors may not be used to endorse or
      promote products derived from this software without specific
      prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

#ifndef FXAA_REDUCE_MIN
    #define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
    #define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
    #define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,
            vec2 v_rgbNW, vec2 v_rgbNE,
            vec2 v_rgbSW, vec2 v_rgbSE,
            vec2 v_rgbM) {
    vec4 color;
    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
              dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}


varying vec2 vTextureCoord;
varying vec4 vColor;
varying vec2 vResolution;

//texcoords computed in vertex step
//to avoid dependent texture reads
varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

uniform sampler2D uSampler;


void main(void){

    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

}
`,{resolution:{type:"v2",value:{x:1,y:1}}})}var u=h("./AbstractFilter");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.applyFilter=function(a,n,t){var i=a.filterManager,r=this.getShader(a);i.applyFilter(r,n,t)}},{"./AbstractFilter":50}],52:[function(h,f,y){function e(n){var t=new a.Matrix;u.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a);
}
`,`precision lowp float;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;
uniform float alpha;
uniform sampler2D mask;

void main(void)
{
    // check clip! this will stop the mask bleeding out from the edges
    vec2 text = abs( vMaskCoord - 0.5 );
    text = step(0.5, text);
    float clip = 1.0 - max(text.y, text.x);
    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    original *= (masky.r * masky.a * alpha * clip);
    gl_FragColor = original;
}
`,{mask:{type:"sampler2D",value:n._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:t.toArray(!0)}}),this.maskSprite=n,this.maskMatrix=t}var u=h("./AbstractFilter"),a=h("../../../math");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.applyFilter=function(n,t,i){var r=n.filterManager;this.uniforms.mask.value=this.maskSprite._texture,r.calculateMappedMatrix(t.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var o=this.getShader(n);r.applyFilter(o,t,i)},Object.defineProperties(e.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(n){this.uniforms.mask.value=n}},offset:{get:function(){return this.uniforms.offset.value},set:function(n){this.uniforms.offset.value=n}}})},{"../../../math":33,"./AbstractFilter":50}],53:[function(h,f,y){function e(a){u.call(this,a),this.currentBlendMode=99999}var u=h("./WebGLManager");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.setBlendMode=function(a){if(this.currentBlendMode===a)return!1;this.currentBlendMode=a;var n=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(n[0],n[1]),!0}},{"./WebGLManager":58}],54:[function(h,f,y){function e(r){u.call(this,r),this.filterStack=[],this.filterStack.push({renderTarget:r.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new i.Rectangle(0,0,r.width,r.height),this.currentFrame=null}var u=h("./WebGLManager"),a=h("../utils/RenderTarget"),n=h("../../../const"),t=h("../utils/Quad"),i=h("../../../math");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.onContextChange=function(){this.texturePool.length=0;var r=this.renderer.gl;this.quad=new t(r)},e.prototype.setFilterStack=function(r){this.filterStack=r},e.prototype.pushFilter=function(r,o){var c=r.filterArea?r.filterArea.clone():r.getBounds();c.x=0|c.x,c.y=0|c.y,c.width=0|c.width,c.height=0|c.height;var d=0|o[0].padding;if(c.x-=d,c.y-=d,c.width+=2*d,c.height+=2*d,this.renderer.currentRenderTarget.transform){var l=this.renderer.currentRenderTarget.transform;c.x+=l.tx,c.y+=l.ty,this.capFilterArea(c),c.x-=l.tx,c.y-=l.ty}else this.capFilterArea(c);if(c.width>0&&c.height>0){this.currentFrame=c;var p=this.getRenderTarget();this.renderer.setRenderTarget(p),p.clear(),this.filterStack.push({renderTarget:p,filter:o})}else this.filterStack.push({renderTarget:null,filter:o})},e.prototype.popFilter=function(){var r=this.filterStack.pop(),o=this.filterStack[this.filterStack.length-1],c=r.renderTarget;if(r.renderTarget){var d=o.renderTarget,l=this.renderer.gl;this.currentFrame=c.frame,this.quad.map(this.textureSize,c.frame),l.bindBuffer(l.ARRAY_BUFFER,this.quad.vertexBuffer),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var p=r.filter;if(l.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,l.FLOAT,!1,0,0),l.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,l.FLOAT,!1,0,32),l.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,l.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(n.BLEND_MODES.NORMAL),p.length===1)p[0].uniforms.dimensions&&(p[0].uniforms.dimensions.value[0]=this.renderer.width,p[0].uniforms.dimensions.value[1]=this.renderer.height,p[0].uniforms.dimensions.value[2]=this.quad.vertices[0],p[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),p[0].applyFilter(this.renderer,c,d),this.returnRenderTarget(c);else{for(var v=c,g=this.getRenderTarget(!0),m=0;m<p.length-1;m++){var T=p[m];T.uniforms.dimensions&&(T.uniforms.dimensions.value[0]=this.renderer.width,T.uniforms.dimensions.value[1]=this.renderer.height,T.uniforms.dimensions.value[2]=this.quad.vertices[0],T.uniforms.dimensions.value[3]=this.quad.vertices[5]),T.applyFilter(this.renderer,v,g);var A=v;v=g,g=A}p[p.length-1].applyFilter(this.renderer,v,d),this.returnRenderTarget(v),this.returnRenderTarget(g)}return r.filter}},e.prototype.getRenderTarget=function(r){var o=this.texturePool.pop()||new a(this.renderer.gl,this.textureSize.width,this.textureSize.height,n.SCALE_MODES.LINEAR,this.renderer.resolution*n.FILTER_RESOLUTION);return o.frame=this.currentFrame,r&&o.clear(!0),o},e.prototype.returnRenderTarget=function(r){this.texturePool.push(r)},e.prototype.applyFilter=function(r,o,c,d){var l=this.renderer.gl;this.renderer.setRenderTarget(c),d&&c.clear(),this.renderer.shaderManager.setShader(r),r.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),r.syncUniforms(),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,o.texture),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0),this.renderer.drawCount++},e.prototype.calculateMappedMatrix=function(r,o,c){var d=o.worldTransform.copy(i.Matrix.TEMP_MATRIX),l=o._texture.baseTexture,p=c.identity(),v=this.textureSize.height/this.textureSize.width;p.translate(r.x/this.textureSize.width,r.y/this.textureSize.height),p.scale(1,v);var g=this.textureSize.width/l.width,m=this.textureSize.height/l.height;return d.tx/=l.width*g,d.ty/=l.width*g,d.invert(),p.prepend(d),p.scale(1,1/v),p.scale(g,m),p.translate(o.anchor.x,o.anchor.y),p},e.prototype.capFilterArea=function(r){r.x<0&&(r.width+=r.x,r.x=0),r.y<0&&(r.height+=r.y,r.y=0),r.x+r.width>this.textureSize.width&&(r.width=this.textureSize.width-r.x),r.y+r.height>this.textureSize.height&&(r.height=this.textureSize.height-r.y)},e.prototype.resize=function(r,o){this.textureSize.width=r,this.textureSize.height=o;for(var c=0;c<this.texturePool.length;c++)this.texturePool[c].resize(r,o)},e.prototype.destroy=function(){this.quad.destroy(),u.prototype.destroy.call(this),this.filterStack=null,this.offsetY=0;for(var r=0;r<this.texturePool.length;r++)this.texturePool[r].destroy();this.texturePool=null}},{"../../../const":22,"../../../math":33,"../utils/Quad":64,"../utils/RenderTarget":65,"./WebGLManager":58}],55:[function(h,f,y){function e(n){u.call(this,n),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var u=h("./WebGLManager"),a=h("../filters/SpriteMaskFilter");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.pushMask=function(n,t){t.texture?this.pushSpriteMask(n,t):this.pushStencilMask(n,t)},e.prototype.popMask=function(n,t){t.texture?this.popSpriteMask(n,t):this.popStencilMask(n,t)},e.prototype.pushSpriteMask=function(n,t){var i=this.alphaMaskPool.pop();i||(i=[new a(t)]),i[0].maskSprite=t,this.renderer.filterManager.pushFilter(n,i)},e.prototype.popSpriteMask=function(){var n=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(n)},e.prototype.pushStencilMask=function(n,t){this.renderer.stencilManager.pushMask(t)},e.prototype.popStencilMask=function(n,t){this.renderer.stencilManager.popMask(t)}},{"../filters/SpriteMaskFilter":52,"./WebGLManager":58}],56:[function(h,f,y){function e(r){u.call(this,r),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var o=0;o<this.maxAttibs;o++)this.attribState[o]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var u=h("./WebGLManager"),a=h("../shaders/TextureShader"),n=h("../shaders/ComplexPrimitiveShader"),t=h("../shaders/PrimitiveShader"),i=h("../../../utils");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,i.pluginTarget.mixin(e),f.exports=e,e.prototype.onContextChange=function(){this.initPlugins();var r=this.renderer.gl;this.maxAttibs=r.getParameter(r.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var o=0;o<this.maxAttibs;o++)this.attribState[o]=!1;this.defaultShader=new a(this),this.primitiveShader=new t(this),this.complexPrimitiveShader=new n(this)},e.prototype.setAttribs=function(r){var o;for(o=0;o<this.tempAttribState.length;o++)this.tempAttribState[o]=!1;for(var c in r)this.tempAttribState[r[c]]=!0;var d=this.renderer.gl;for(o=0;o<this.attribState.length;o++)this.attribState[o]!==this.tempAttribState[o]&&(this.attribState[o]=this.tempAttribState[o],this.attribState[o]?d.enableVertexAttribArray(o):d.disableVertexAttribArray(o))},e.prototype.setShader=function(r){return this._currentId===r.uid?!1:(this._currentId=r.uid,this.currentShader=r,this.renderer.gl.useProgram(r.program),this.setAttribs(r.attributes),!0)},e.prototype.destroy=function(){this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),u.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{"../../../utils":77,"../shaders/ComplexPrimitiveShader":59,"../shaders/PrimitiveShader":60,"../shaders/TextureShader":62,"./WebGLManager":58}],57:[function(h,f,y){function e(n){u.call(this,n),this.stencilMaskStack=null}var u=h("./WebGLManager"),a=h("../../../utils");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.setMaskStack=function(n){this.stencilMaskStack=n;var t=this.renderer.gl;n.stencilStack.length===0?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},e.prototype.pushStencil=function(n,t){this.renderer.currentRenderTarget.attachStencilBuffer();var i=this.renderer.gl,r=this.stencilMaskStack;this.bindGraphics(n,t),r.stencilStack.length===0&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),r.reverse=!0,r.count=0),r.stencilStack.push(t);var o=r.count;i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),t.mode===1?(i.drawElements(i.TRIANGLE_FAN,t.indices.length-4,i.UNSIGNED_SHORT,0),r.reverse?(i.stencilFunc(i.EQUAL,255-o,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,o,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(t.indices.length-4)),r.reverse?i.stencilFunc(i.EQUAL,255-(o+1),255):i.stencilFunc(i.EQUAL,o+1,255),r.reverse=!r.reverse):(r.reverse?(i.stencilFunc(i.EQUAL,o,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,255-o,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_STRIP,t.indices.length,i.UNSIGNED_SHORT,0),r.reverse?i.stencilFunc(i.EQUAL,o+1,255):i.stencilFunc(i.EQUAL,255-(o+1),255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),r.count++},e.prototype.bindGraphics=function(n,t){var i,r=this.renderer.gl;t.mode===1?(i=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(i),r.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,n.worldTransform.toArray(!0)),r.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(i.uniforms.tint._location,a.hex2rgb(n.tint)),r.uniform3fv(i.uniforms.color._location,t.color),r.uniform1f(i.uniforms.alpha._location,n.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.vertexAttribPointer(i.attributes.aVertexPosition,2,r.FLOAT,!1,8,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer)):(i=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(i),r.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,n.worldTransform.toArray(!0)),r.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),r.uniform3fv(i.uniforms.tint._location,a.hex2rgb(n.tint)),r.uniform1f(i.uniforms.alpha._location,n.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.vertexAttribPointer(i.attributes.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(i.attributes.aColor,4,r.FLOAT,!1,24,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer))},e.prototype.popStencil=function(n,t){var i=this.renderer.gl,r=this.stencilMaskStack;if(r.stencilStack.pop(),r.count--,r.stencilStack.length===0)i.disable(i.STENCIL_TEST);else{var o=r.count;this.bindGraphics(n,t),i.colorMask(!1,!1,!1,!1),t.mode===1?(r.reverse=!r.reverse,r.reverse?(i.stencilFunc(i.EQUAL,255-(o+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,o+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(t.indices.length-4)),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),i.drawElements(i.TRIANGLE_FAN,t.indices.length-4,i.UNSIGNED_SHORT,0),this.renderer.drawCount+=2,r.reverse?i.stencilFunc(i.EQUAL,o,255):i.stencilFunc(i.EQUAL,255-o,255)):(r.reverse?(i.stencilFunc(i.EQUAL,o+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,255-(o+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_STRIP,t.indices.length,i.UNSIGNED_SHORT,0),this.renderer.drawCount++,r.reverse?i.stencilFunc(i.EQUAL,o,255):i.stencilFunc(i.EQUAL,255-o,255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}},e.prototype.destroy=function(){u.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e.prototype.pushMask=function(n){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),n.dirty&&this.renderer.plugins.graphics.updateGraphics(n,this.renderer.gl),n._webGL[this.renderer.gl.id].data.length&&this.pushStencil(n,n._webGL[this.renderer.gl.id].data[0])},e.prototype.popMask=function(n){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(n,n._webGL[this.renderer.gl.id].data[0])}},{"../../../utils":77,"./WebGLManager":58}],58:[function(h,f,y){function e(u){this.renderer=u,this.renderer.on("context",this.onContextChange,this)}e.prototype.constructor=e,f.exports=e,e.prototype.onContextChange=function(){},e.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],59:[function(h,f,y){function e(a){u.call(this,a,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join(`
`),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join(`
`),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var u=h("./Shader");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e},{"./Shader":61}],60:[function(h,f,y){function e(a){u.call(this,a,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join(`
`),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join(`
`),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var u=h("./Shader");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e},{"./Shader":61}],61:[function(h,f,y){function e(a,n,t,i,r){if(!n||!t)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=u.uid(),this.gl=a.renderer.gl,this.shaderManager=a,this.program=null,this.uniforms=i||{},this.attributes=r||{},this.textureCount=1,this.vertexSrc=n,this.fragmentSrc=t,this.init()}var u=h("../../../utils");e.prototype.constructor=e,f.exports=e,e.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},e.prototype.cacheUniformLocations=function(a){for(var n=0;n<a.length;++n)this.uniforms[a[n]]._location=this.gl.getUniformLocation(this.program,a[n])},e.prototype.cacheAttributeLocations=function(a){for(var n=0;n<a.length;++n)this.attributes[a[n]]=this.gl.getAttribLocation(this.program,a[n])},e.prototype.compile=function(){var a=this.gl,n=this._glCompile(a.VERTEX_SHADER,this.vertexSrc),t=this._glCompile(a.FRAGMENT_SHADER,this.fragmentSrc),i=a.createProgram();return a.attachShader(i,n),a.attachShader(i,t),a.linkProgram(i),a.getProgramParameter(i,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",a.getProgramParameter(i,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),a.getProgramInfoLog(i)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(i)),a.deleteProgram(i),i=null),a.deleteShader(n),a.deleteShader(t),this.program=i},e.prototype.syncUniform=function(a){var n,t,i=a._location,r=a.value,o=this.gl;switch(a.type){case"b":case"bool":case"boolean":o.uniform1i(i,r?1:0);break;case"i":case"1i":o.uniform1i(i,r);break;case"f":case"1f":o.uniform1f(i,r);break;case"2f":o.uniform2f(i,r[0],r[1]);break;case"3f":o.uniform3f(i,r[0],r[1],r[2]);break;case"4f":o.uniform4f(i,r[0],r[1],r[2],r[3]);break;case"v2":o.uniform2f(i,r.x,r.y);break;case"v3":o.uniform3f(i,r.x,r.y,r.z);break;case"v4":o.uniform4f(i,r.x,r.y,r.z,r.w);break;case"1iv":o.uniform1iv(i,r);break;case"2iv":o.uniform2iv(i,r);break;case"3iv":o.uniform3iv(i,r);break;case"4iv":o.uniform4iv(i,r);break;case"1fv":o.uniform1fv(i,r);break;case"2fv":o.uniform2fv(i,r);break;case"3fv":o.uniform3fv(i,r);break;case"4fv":o.uniform4fv(i,r);break;case"m2":case"mat2":case"Matrix2fv":o.uniformMatrix2fv(i,a.transpose,r);break;case"m3":case"mat3":case"Matrix3fv":o.uniformMatrix3fv(i,a.transpose,r);break;case"m4":case"mat4":case"Matrix4fv":o.uniformMatrix4fv(i,a.transpose,r);break;case"c":typeof r=="number"&&(r=u.hex2rgb(r)),o.uniform3f(i,r[0],r[1],r[2]);break;case"iv1":o.uniform1iv(i,r);break;case"iv":o.uniform3iv(i,r);break;case"fv1":o.uniform1fv(i,r);break;case"fv":o.uniform3fv(i,r);break;case"v2v":for(a._array||(a._array=new Float32Array(2*r.length)),n=0,t=r.length;t>n;++n)a._array[2*n]=r[n].x,a._array[2*n+1]=r[n].y;o.uniform2fv(i,a._array);break;case"v3v":for(a._array||(a._array=new Float32Array(3*r.length)),n=0,t=r.length;t>n;++n)a._array[3*n]=r[n].x,a._array[3*n+1]=r[n].y,a._array[3*n+2]=r[n].z;o.uniform3fv(i,a._array);break;case"v4v":for(a._array||(a._array=new Float32Array(4*r.length)),n=0,t=r.length;t>n;++n)a._array[4*n]=r[n].x,a._array[4*n+1]=r[n].y,a._array[4*n+2]=r[n].z,a._array[4*n+3]=r[n].w;o.uniform4fv(i,a._array);break;case"t":case"sampler2D":if(!a.value||!a.value.baseTexture.hasLoaded)break;o.activeTexture(o["TEXTURE"+this.textureCount]);var c=a.value.baseTexture._glTextures[o.id];c||(this.initSampler2D(a),c=a.value.baseTexture._glTextures[o.id]),o.bindTexture(o.TEXTURE_2D,c),o.uniform1i(a._location,this.textureCount),this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+a.type)}},e.prototype.syncUniforms=function(){this.textureCount=1;for(var a in this.uniforms)this.syncUniform(this.uniforms[a])},e.prototype.initSampler2D=function(a){var n=this.gl,t=a.value.baseTexture;if(t.hasLoaded)if(a.textureData){var i=a.textureData;t._glTextures[n.id]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,t._glTextures[n.id]),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),n.texImage2D(n.TEXTURE_2D,0,i.luminance?n.LUMINANCE:n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t.source),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,i.magFilter?i.magFilter:n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i.wrapS?i.wrapS:n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,i.wrapS?i.wrapS:n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,i.wrapT?i.wrapT:n.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(t)},e.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},e.prototype._glCompile=function(a,n){var t=this.gl.createShader(a);return this.gl.shaderSource(t,n),this.gl.compileShader(t),this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS)?t:(console.log(this.gl.getShaderInfoLog(t)),null)}},{"../../../utils":77}],62:[function(h,f,y){function e(a,n,t,i,r){var o={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(i)for(var c in i)o[c]=i[c];var d={aVertexPosition:0,aTextureCoord:0,aColor:0};if(r)for(var l in r)d[l]=r[l];n=n||e.defaultVertexSrc,t=t||e.defaultFragmentSrc,u.call(this,a,n,t,o,d)}var u=h("./Shader");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join(`
`),e.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join(`
`)},{"./Shader":61}],63:[function(h,f,y){function e(a){u.call(this,a)}var u=h("../managers/WebGLManager");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(a){}},{"../managers/WebGLManager":58}],64:[function(h,f,y){function e(u){this.gl=u,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=u.createBuffer(),this.indexBuffer=u.createBuffer(),u.bindBuffer(u.ARRAY_BUFFER,this.vertexBuffer),u.bufferData(u.ARRAY_BUFFER,128,u.DYNAMIC_DRAW),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,this.indexBuffer),u.bufferData(u.ELEMENT_ARRAY_BUFFER,this.indices,u.STATIC_DRAW),this.upload()}e.prototype.constructor=e,e.prototype.map=function(u,a){var n=0,t=0;this.uvs[0]=n,this.uvs[1]=t,this.uvs[2]=n+a.width/u.width,this.uvs[3]=t,this.uvs[4]=n+a.width/u.width,this.uvs[5]=t+a.height/u.height,this.uvs[6]=n,this.uvs[7]=t+a.height/u.height,n=a.x,t=a.y,this.vertices[0]=n,this.vertices[1]=t,this.vertices[2]=n+a.width,this.vertices[3]=t,this.vertices[4]=n+a.width,this.vertices[5]=t+a.height,this.vertices[6]=n,this.vertices[7]=t+a.height,this.upload()},e.prototype.upload=function(){var u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,this.vertexBuffer),u.bufferSubData(u.ARRAY_BUFFER,0,this.vertices),u.bufferSubData(u.ARRAY_BUFFER,32,this.uvs),u.bufferSubData(u.ARRAY_BUFFER,64,this.colors)},e.prototype.destroy=function(){var u=this.gl;u.deleteBuffer(this.vertexBuffer),u.deleteBuffer(this.indexBuffer)},f.exports=e},{}],65:[function(h,f,y){var e=h("../../../math"),u=h("../../../utils"),a=h("../../../const"),n=h("./StencilMaskStack"),t=function(i,r,o,c,d,l){if(this.gl=i,this.frameBuffer=null,this.texture=null,this.size=new e.Rectangle(0,0,1,1),this.resolution=d||a.RESOLUTION,this.projectionMatrix=new e.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new n,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=c||a.SCALE_MODES.DEFAULT,this.root=l,!this.root){this.frameBuffer=i.createFramebuffer(),this.texture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,c===a.SCALE_MODES.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,c===a.SCALE_MODES.LINEAR?i.LINEAR:i.NEAREST);var p=u.isPowerOfTwo(r,o);p?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE)),i.bindFramebuffer(i.FRAMEBUFFER,this.frameBuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,this.texture,0)}this.resize(r,o)};t.prototype.constructor=t,f.exports=t,t.prototype.clear=function(i){var r=this.gl;i&&r.bindFramebuffer(r.FRAMEBUFFER,this.frameBuffer),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)},t.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var i=this.gl;this.stencilBuffer=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.stencilBuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,this.stencilBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},t.prototype.activate=function(){var i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,this.frameBuffer);var r=this.frame||this.size;this.calculateProjection(r),this.transform&&this.projectionMatrix.append(this.transform),i.viewport(0,0,r.width*this.resolution,r.height*this.resolution)},t.prototype.calculateProjection=function(i){var r=this.projectionMatrix;r.identity(),this.root?(r.a=1/i.width*2,r.d=-1/i.height*2,r.tx=-1-i.x*r.a,r.ty=1-i.y*r.d):(r.a=1/i.width*2,r.d=1/i.height*2,r.tx=-1-i.x*r.a,r.ty=-1-i.y*r.d)},t.prototype.resize=function(i,r){if(i=0|i,r=0|r,this.size.width!==i||this.size.height!==r){if(this.size.width=i,this.size.height=r,!this.root){var o=this.gl;o.bindTexture(o.TEXTURE_2D,this.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,i*this.resolution,r*this.resolution,0,o.RGBA,o.UNSIGNED_BYTE,null),this.stencilBuffer&&(o.bindRenderbuffer(o.RENDERBUFFER,this.stencilBuffer),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,i*this.resolution,r*this.resolution))}var c=this.frame||this.size;this.calculateProjection(c)}},t.prototype.destroy=function(){var i=this.gl;i.deleteRenderbuffer(this.stencilBuffer),i.deleteFramebuffer(this.frameBuffer),i.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{"../../../const":22,"../../../math":33,"../../../utils":77,"./StencilMaskStack":66}],66:[function(h,f,y){function e(){this.stencilStack=[],this.reverse=!0,this.count=0}e.prototype.constructor=e,f.exports=e},{}],67:[function(h,f,y){function e(l){n.call(this),this.anchor=new u.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=r.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=l||a.EMPTY}var u=h("../math"),a=h("../textures/Texture"),n=h("../display/Container"),t=h("../renderers/canvas/utils/CanvasTinter"),i=h("../utils"),r=h("../const"),o=new u.Point,c=u.GroupD8,d=new u.Matrix;e.prototype=Object.create(n.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(l){var p=i.sign(this.scale.x)||1;this.scale.x=p*l/this.texture._frame.width,this._width=l}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(l){var p=i.sign(this.scale.y)||1;this.scale.y=p*l/this.texture._frame.height,this._height=l}},texture:{get:function(){return this._texture},set:function(l){this._texture!==l&&(this._texture=l,this.cachedTint=16777215,l&&(l.baseTexture.hasLoaded?this._onTextureUpdate():l.once("update",this._onTextureUpdate,this)))}}}),e.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=i.sign(this.scale.x)*this._width/this.texture.frame.width),this._height&&(this.scale.y=i.sign(this.scale.y)*this._height/this.texture.frame.height)},e.prototype._renderWebGL=function(l){l.setObjectRenderer(l.plugins.sprite),l.plugins.sprite.render(this)},e.prototype.getBounds=function(l){if(!this._currentBounds){var p,v,g,m,T=this._texture._frame.width,A=this._texture._frame.height,P=T*(1-this.anchor.x),F=T*-this.anchor.x,k=A*(1-this.anchor.y),I=A*-this.anchor.y,U=l||this.worldTransform,X=U.a,z=U.b,x=U.c,w=U.d,_=U.tx,M=U.ty,b=X*F+x*I+_,E=w*I+z*F+M,S=X*P+x*I+_,C=w*I+z*P+M,D=X*P+x*k+_,O=w*k+z*P+M,G=X*F+x*k+_,R=w*k+z*F+M;if(p=b,p=p>S?S:p,p=p>D?D:p,p=p>G?G:p,g=E,g=g>C?C:g,g=g>O?O:g,g=g>R?R:g,v=b,v=S>v?S:v,v=D>v?D:v,v=G>v?G:v,m=E,m=C>m?C:m,m=O>m?O:m,m=R>m?R:m,this.children.length){var H=this.containerGetBounds();P=H.x,F=H.x+H.width,k=H.y,I=H.y+H.height,p=P>p?p:P,g=k>g?g:k,v=v>F?v:F,m=m>I?m:I}var Q=this._bounds;Q.x=p,Q.width=v-p,Q.y=g,Q.height=m-g,this._currentBounds=Q}return this._currentBounds},e.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},e.prototype.containsPoint=function(l){this.worldTransform.applyInverse(l,o);var p,v=this._texture._frame.width,g=this._texture._frame.height,m=-v*this.anchor.x;return o.x>m&&o.x<m+v&&(p=-g*this.anchor.y,o.y>p&&o.y<p+g)},e.prototype._renderCanvas=function(l){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)){var p=l.blendModes[this.blendMode];if(p!==l.context.globalCompositeOperation&&(l.context.globalCompositeOperation=p),this.texture.valid){var v,g,m=this._texture,T=this.worldTransform,A=m.crop.width,P=m.crop.height;l.context.globalAlpha=this.worldAlpha;var F=m.baseTexture.scaleMode===r.SCALE_MODES.LINEAR;l.smoothProperty&&l.context[l.smoothProperty]!==F&&(l.context[l.smoothProperty]=F),(3&m.rotate)===2&&(A=m.crop.height,P=m.crop.width),m.trim?(v=m.crop.width/2+m.trim.x-this.anchor.x*m.trim.width,g=m.crop.height/2+m.trim.y-this.anchor.y*m.trim.height):(v=(.5-this.anchor.x)*m._frame.width,g=(.5-this.anchor.y)*m._frame.height),m.rotate&&(T.copy(d),T=d,c.matrixAppendRotationInv(T,m.rotate,v,g),v=0,g=0),v-=A/2,g-=P/2,l.roundPixels?(l.context.setTransform(T.a,T.b,T.c,T.d,T.tx*l.resolution|0,T.ty*l.resolution|0),v=0|v,g=0|g):l.context.setTransform(T.a,T.b,T.c,T.d,T.tx*l.resolution,T.ty*l.resolution);var k=m.baseTexture.resolution;this.tint!==16777215?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=t.getTintedTexture(this,this.tint)),l.context.drawImage(this.tintedTexture,0,0,A*k,P*k,v*l.resolution,g*l.resolution,A*l.resolution,P*l.resolution)):l.context.drawImage(m.baseTexture.source,m.crop.x*k,m.crop.y*k,A*k,P*k,v*l.resolution,g*l.resolution,A*l.resolution,P*l.resolution)}}},e.prototype.destroy=function(l,p){n.prototype.destroy.call(this),this.anchor=null,l&&this._texture.destroy(p),this._texture=null,this.shader=null},e.fromFrame=function(l){var p=i.TextureCache[l];if(!p)throw new Error('The frameId "'+l+'" does not exist in the texture cache');return new e(p)},e.fromImage=function(l,p,v){return new e(a.fromImage(l,p,v))}},{"../const":22,"../display/Container":23,"../math":33,"../renderers/canvas/utils/CanvasTinter":48,"../textures/Texture":72,"../utils":77}],68:[function(h,f,y){function e(t){u.call(this,t),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=n.SPRITE_BATCH_SIZE;var i=4*this.size*this.vertByteSize,r=6*this.size;this.vertices=new ArrayBuffer(i),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(r);for(var o=0,c=0;r>o;o+=6,c+=4)this.indices[o+0]=c+0,this.indices[o+1]=c+1,this.indices[o+2]=c+2,this.indices[o+3]=c+0,this.indices[o+4]=c+2,this.indices[o+5]=c+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var u=h("../../renderers/webgl/utils/ObjectRenderer"),a=h("../../renderers/webgl/WebGLRenderer"),n=h("../../const");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,a.registerPlugin("sprite",e),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},e.prototype.render=function(t){var i=t._texture;this.currentBatchSize>=this.size&&this.flush();var r=i._uvs;if(r){var o,c,d,l,p=t.anchor.x,v=t.anchor.y;if(i.trim&&t.tileScale===void 0){var g=i.trim;c=g.x-p*g.width,o=c+i.crop.width,l=g.y-v*g.height,d=l+i.crop.height}else o=i._frame.width*(1-p),c=i._frame.width*-p,d=i._frame.height*(1-v),l=i._frame.height*-v;var m=this.currentBatchSize*this.vertByteSize,T=t.worldTransform,A=T.a,P=T.b,F=T.c,k=T.d,I=T.tx,U=T.ty,X=this.colors,z=this.positions;if(this.renderer.roundPixels){var x=this.renderer.resolution;z[m]=((A*c+F*l+I)*x|0)/x,z[m+1]=((k*l+P*c+U)*x|0)/x,z[m+5]=((A*o+F*l+I)*x|0)/x,z[m+6]=((k*l+P*o+U)*x|0)/x,z[m+10]=((A*o+F*d+I)*x|0)/x,z[m+11]=((k*d+P*o+U)*x|0)/x,z[m+15]=((A*c+F*d+I)*x|0)/x,z[m+16]=((k*d+P*c+U)*x|0)/x}else z[m]=A*c+F*l+I,z[m+1]=k*l+P*c+U,z[m+5]=A*o+F*l+I,z[m+6]=k*l+P*o+U,z[m+10]=A*o+F*d+I,z[m+11]=k*d+P*o+U,z[m+15]=A*c+F*d+I,z[m+16]=k*d+P*c+U;z[m+2]=r.x0,z[m+3]=r.y0,z[m+7]=r.x1,z[m+8]=r.y1,z[m+12]=r.x2,z[m+13]=r.y2,z[m+17]=r.x3,z[m+18]=r.y3;var w=t.tint;X[m+4]=X[m+9]=X[m+14]=X[m+19]=(w>>16)+(65280&w)+((255&w)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},e.prototype.flush=function(){if(this.currentBatchSize!==0){var t,i=this.renderer.gl;if(this.currentBatchSize>.5*this.size)i.bufferSubData(i.ARRAY_BUFFER,0,this.vertices);else{var r=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);i.bufferSubData(i.ARRAY_BUFFER,0,r)}for(var o,c,d,l,p=0,v=0,g=null,m=this.renderer.blendModeManager.currentBlendMode,T=null,A=!1,P=!1,F=0,k=this.currentBatchSize;k>F;F++)l=this.sprites[F],o=l._texture.baseTexture,c=l.blendMode,d=l.shader||this.shader,A=m!==c,P=T!==d,(g!==o||A||P)&&(this.renderBatch(g,p,v),v=F,p=0,g=o,A&&(m=c,this.renderer.blendModeManager.setBlendMode(m)),P&&(T=d,t=T.shaders?T.shaders[i.id]:T,t||(t=T.getShader(this.renderer)),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),i.activeTexture(i.TEXTURE0))),p++;this.renderBatch(g,p,v),this.currentBatchSize=0}},e.prototype.renderBatch=function(t,i,r){if(i!==0){var o=this.renderer.gl;t._glTextures[o.id]?o.bindTexture(o.TEXTURE_2D,t._glTextures[o.id]):this.renderer.updateTexture(t),o.drawElements(o.TRIANGLES,6*i,o.UNSIGNED_SHORT,6*r*2),this.renderer.drawCount++}},e.prototype.start=function(){var t=this.renderer.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var i=this.vertByteSize;t.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(this.shader.attributes.aColor,4,t.UNSIGNED_BYTE,!0,i,16)},e.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),u.prototype.destroy.call(this),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},{"../../const":22,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63}],69:[function(h,f,y){function e(r,o,c){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=c||i.RESOLUTION,this._text=null,this._style=null;var d=a.fromCanvas(this.canvas);d.trim=new n.Rectangle,u.call(this,d),this.text=r,this.style=o}var u=h("../sprites/Sprite"),a=h("../textures/Texture"),n=h("../math"),t=h("../utils"),i=h("../const");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.fontPropertiesCache={},e.fontPropertiesCanvas=document.createElement("canvas"),e.fontPropertiesContext=e.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(e.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(r){this.scale.x=r/this._texture._frame.width,this._width=r}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(r){this.scale.y=r/this._texture._frame.height,this._height=r}},style:{get:function(){return this._style},set:function(r){r=r||{},typeof r.fill=="number"&&(r.fill=t.hex2string(r.fill)),typeof r.stroke=="number"&&(r.stroke=t.hex2string(r.stroke)),typeof r.dropShadowColor=="number"&&(r.dropShadowColor=t.hex2string(r.dropShadowColor)),r.font=r.font||"bold 20pt Arial",r.fill=r.fill||"black",r.align=r.align||"left",r.stroke=r.stroke||"black",r.strokeThickness=r.strokeThickness||0,r.wordWrap=r.wordWrap||!1,r.wordWrapWidth=r.wordWrapWidth||100,r.breakWords=r.breakWords||!1,r.letterSpacing=r.letterSpacing||0,r.dropShadow=r.dropShadow||!1,r.dropShadowColor=r.dropShadowColor||"#000000",r.dropShadowAngle=r.dropShadowAngle!==void 0?r.dropShadowAngle:Math.PI/6,r.dropShadowDistance=r.dropShadowDistance!==void 0?r.dropShadowDistance:5,r.dropShadowBlur=r.dropShadowBlur!==void 0?r.dropShadowBlur:0,r.padding=r.padding||0,r.textBaseline=r.textBaseline||"alphabetic",r.lineJoin=r.lineJoin||"miter",r.miterLimit=r.miterLimit||10,this._style=r,this.dirty=!0}},text:{get:function(){return this._text},set:function(r){r=r.toString()||" ",this._text!==r&&(this._text=r,this.dirty=!0)}}}),e.prototype.updateText=function(){var r=this._style;this.context.font=r.font;for(var o=r.wordWrap?this.wordWrap(this._text):this._text,c=o.split(/(?:\r\n|\r|\n)/),d=new Array(c.length),l=0,p=this.determineFontProperties(r.font),v=0;v<c.length;v++){var g=this.context.measureText(c[v]).width+(c[v].length-1)*r.letterSpacing;d[v]=g,l=Math.max(l,g)}var m=l+r.strokeThickness;r.dropShadow&&(m+=r.dropShadowDistance),this.canvas.width=Math.ceil((m+this.context.lineWidth)*this.resolution);var T=this.style.lineHeight||p.fontSize+r.strokeThickness,A=T*c.length;r.dropShadow&&(A+=r.dropShadowDistance),this.canvas.height=Math.ceil((A+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=r.font,this.context.strokeStyle=r.stroke,this.context.lineWidth=r.strokeThickness,this.context.textBaseline=r.textBaseline,this.context.lineJoin=r.lineJoin,this.context.miterLimit=r.miterLimit;var P,F;if(r.dropShadow){r.dropShadowBlur>0?(this.context.shadowColor=r.dropShadowColor,this.context.shadowBlur=r.dropShadowBlur):this.context.fillStyle=r.dropShadowColor;var k=Math.cos(r.dropShadowAngle)*r.dropShadowDistance,I=Math.sin(r.dropShadowAngle)*r.dropShadowDistance;for(v=0;v<c.length;v++)P=r.strokeThickness/2,F=r.strokeThickness/2+v*T+p.ascent,r.align==="right"?P+=l-d[v]:r.align==="center"&&(P+=(l-d[v])/2),r.fill&&this.drawLetterSpacing(c[v],P+k,F+I+r.padding)}for(this.context.fillStyle=r.fill,v=0;v<c.length;v++)P=r.strokeThickness/2,F=r.strokeThickness/2+v*T+p.ascent,r.align==="right"?P+=l-d[v]:r.align==="center"&&(P+=(l-d[v])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(c[v],P,F+r.padding,!0),r.fill&&this.drawLetterSpacing(c[v],P,F+r.padding);this.updateTexture()},e.prototype.drawLetterSpacing=function(r,o,c,d){var l=this._style,p=l.letterSpacing;if(p===0)return void(d?this.context.strokeText(r,o,c):this.context.fillText(r,o,c));for(var v,g=String.prototype.split.call(r,""),m=0,T=o;m<r.length;)v=g[m++],d?this.context.strokeText(v,T,c):this.context.fillText(v,T,c),T+=this.context.measureText(v).width+p},e.prototype.updateTexture=function(){var r=this._texture,o=this._style;r.baseTexture.hasLoaded=!0,r.baseTexture.resolution=this.resolution,r.baseTexture.width=this.canvas.width/this.resolution,r.baseTexture.height=this.canvas.height/this.resolution,r.crop.width=r._frame.width=this.canvas.width/this.resolution,r.crop.height=r._frame.height=this.canvas.height/this.resolution,r.trim.x=0,r.trim.y=-o.padding,r.trim.width=r._frame.width,r.trim.height=r._frame.height-2*o.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,r.baseTexture.emit("update",r.baseTexture),this.dirty=!1},e.prototype.renderWebGL=function(r){this.dirty&&this.updateText(),u.prototype.renderWebGL.call(this,r)},e.prototype._renderCanvas=function(r){this.dirty&&this.updateText(),u.prototype._renderCanvas.call(this,r)},e.prototype.determineFontProperties=function(r){var o=e.fontPropertiesCache[r];if(!o){o={};var c=e.fontPropertiesCanvas,d=e.fontPropertiesContext;d.font=r;var l=Math.ceil(d.measureText("|MÉq").width),p=Math.ceil(d.measureText("M").width),v=2*p;p=1.4*p|0,c.width=l,c.height=v,d.fillStyle="#f00",d.fillRect(0,0,l,v),d.font=r,d.textBaseline="alphabetic",d.fillStyle="#000",d.fillText("|MÉq",0,p);var g,m,T=d.getImageData(0,0,l,v).data,A=T.length,P=4*l,F=0,k=!1;for(g=0;p>g;g++){for(m=0;P>m;m+=4)if(T[F+m]!==255){k=!0;break}if(k)break;F+=P}for(o.ascent=p-g,F=A-P,k=!1,g=v;g>p;g--){for(m=0;P>m;m+=4)if(T[F+m]!==255){k=!0;break}if(k)break;F-=P}o.descent=g-p,o.fontSize=o.ascent+o.descent,e.fontPropertiesCache[r]=o}return o},e.prototype.wordWrap=function(r){for(var o="",c=r.split(`
`),d=this._style.wordWrapWidth,l=0;l<c.length;l++){for(var p=d,v=c[l].split(" "),g=0;g<v.length;g++){var m=this.context.measureText(v[g]).width;if(this._style.breakWords&&m>d)for(var T=v[g].split(""),A=0;A<T.length;A++){var P=this.context.measureText(T[A]).width;P>p?(o+=`
`+T[A],p=d-P):(A===0&&(o+=" "),o+=T[A],p-=P)}else{var F=m+this.context.measureText(" ").width;g===0||F>p?(g>0&&(o+=`
`),o+=v[g],p=d-m):(p-=F,o+=" "+v[g])}}l<c.length-1&&(o+=`
`)}return o},e.prototype.getBounds=function(r){return this.dirty&&this.updateText(),u.prototype.getBounds.call(this,r)},e.prototype.destroy=function(r){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(r===void 0?!0:r)}},{"../const":22,"../math":33,"../sprites/Sprite":67,"../textures/Texture":72,"../utils":77}],70:[function(h,f,y){function e(t,i,r){n.call(this),this.uid=u.uid(),this.resolution=r||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=i||a.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures={},t&&this.loadSource(t)}var u=h("../utils"),a=h("../const"),n=h("eventemitter3");e.prototype=Object.create(n.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=u.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},e.prototype.loadSource=function(t){var i=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,i&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=t,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!t.getContext){this.isLoading=!0;var r=this;t.onload=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),r.emit("loaded",r))},t.onerror=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},t.complete&&t.src&&(this.isLoading=!1,t.onload=null,t.onerror=null,t.width&&t.height?(this._sourceLoaded(),i&&this.emit("loaded",this)):i&&this.emit("error",this))}},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl?(delete u.BaseTextureCache[this.imageUrl],delete u.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete u.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,r){var o=u.BaseTextureCache[t];if(i===void 0&&t.indexOf("data:")!==0&&(i=!0),!o){var c=new Image;i&&(c.crossOrigin=""),o=new e(c,r),o.imageUrl=t,c.src=t,u.BaseTextureCache[t]=o,o.resolution=u.getResolutionOfUrl(t)}return o},e.fromCanvas=function(t,i){t._pixiId||(t._pixiId="canvas_"+u.uid());var r=u.BaseTextureCache[t._pixiId];return r||(r=new e(t,i),u.BaseTextureCache[t._pixiId]=r),r}},{"../const":22,"../utils":77,eventemitter3:10}],71:[function(h,f,y){function e(d,l,p,v,g){if(!d)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");l=l||100,p=p||100,g=g||o.RESOLUTION;var m=new u;if(m.width=l,m.height=p,m.resolution=g,m.scaleMode=v||o.SCALE_MODES.DEFAULT,m.hasLoaded=!0,a.call(this,m,new r.Rectangle(0,0,l,p)),this.width=l,this.height=p,this.resolution=g,this.render=null,this.renderer=d,this.renderer.type===o.RENDERER_TYPE.WEBGL){var T=this.renderer.gl;this.textureBuffer=new n(T,this.width,this.height,m.scaleMode,this.resolution),this.baseTexture._glTextures[T.id]=this.textureBuffer.texture,this.filterManager=new t(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(l,p),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new i(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var u=h("./BaseTexture"),a=h("./Texture"),n=h("../renderers/webgl/utils/RenderTarget"),t=h("../renderers/webgl/managers/FilterManager"),i=h("../renderers/canvas/utils/CanvasBuffer"),r=h("../math"),o=h("../const"),c=new r.Matrix;e.prototype=Object.create(a.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.resize=function(d,l,p){d===this.width&&l===this.height||(this.valid=d>0&&l>0,this.width=this._frame.width=this.crop.width=d,this.height=this._frame.height=this.crop.height=l,p&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},e.prototype.clear=function(){this.valid&&(this.renderer.type===o.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},e.prototype.renderWebGL=function(d,l,p,v){if(this.valid){if(v=v!==void 0?v:!0,this.textureBuffer.transform=l,this.textureBuffer.activate(),d.worldAlpha=1,v){d.worldTransform.identity(),d.currentBounds=null;var g,m,T=d.children;for(g=0,m=T.length;m>g;++g)T[g].updateTransform()}var A=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(d,this.textureBuffer,p),this.renderer.filterManager=A}},e.prototype.renderCanvas=function(d,l,p,v){if(this.valid){var g=c;g.identity(),l&&g.append(l);var m=d.worldTransform;d.worldTransform=g,d.worldAlpha=1;var T,A,P=d.children;for(T=0,A=P.length;A>T;++T)P[T].updateTransform();p&&this.textureBuffer.clear();var F=this.textureBuffer.context,k=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(d,F),this.renderer.resolution=k,d.worldTransform===g&&(d.worldTransform=m)}},e.prototype.destroy=function(){a.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},e.prototype.getImage=function(){var d=new Image;return d.src=this.getBase64(),d},e.prototype.getBase64=function(){return this.getCanvas().toDataURL()},e.prototype.getCanvas=function(){if(this.renderer.type===o.RENDERER_TYPE.WEBGL){var d=this.renderer.gl,l=this.textureBuffer.size.width,p=this.textureBuffer.size.height,v=new Uint8Array(4*l*p);d.bindFramebuffer(d.FRAMEBUFFER,this.textureBuffer.frameBuffer),d.readPixels(0,0,l,p,d.RGBA,d.UNSIGNED_BYTE,v),d.bindFramebuffer(d.FRAMEBUFFER,null);var g=new i(l,p),m=g.context.getImageData(0,0,l,p);return m.data.set(v),g.context.putImageData(m,0,0),g.canvas}return this.textureBuffer.canvas},e.prototype.getPixels=function(){var d,l;if(this.renderer.type===o.RENDERER_TYPE.WEBGL){var p=this.renderer.gl;d=this.textureBuffer.size.width,l=this.textureBuffer.size.height;var v=new Uint8Array(4*d*l);return p.bindFramebuffer(p.FRAMEBUFFER,this.textureBuffer.frameBuffer),p.readPixels(0,0,d,l,p.RGBA,p.UNSIGNED_BYTE,v),p.bindFramebuffer(p.FRAMEBUFFER,null),v}return d=this.textureBuffer.canvas.width,l=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,d,l).data},e.prototype.getPixel=function(d,l){if(this.renderer.type===o.RENDERER_TYPE.WEBGL){var p=this.renderer.gl,v=new Uint8Array(4);return p.bindFramebuffer(p.FRAMEBUFFER,this.textureBuffer.frameBuffer),p.readPixels(d,l,1,1,p.RGBA,p.UNSIGNED_BYTE,v),p.bindFramebuffer(p.FRAMEBUFFER,null),v}return this.textureBuffer.canvas.getContext("2d").getImageData(d,l,1,1).data}},{"../const":22,"../math":33,"../renderers/canvas/utils/CanvasBuffer":45,"../renderers/webgl/managers/FilterManager":54,"../renderers/webgl/utils/RenderTarget":65,"./BaseTexture":70,"./Texture":72}],72:[function(h,f,y){function e(o,c,d,l,p){if(t.call(this),this.noFrame=!1,c||(this.noFrame=!0,c=new i.Rectangle(0,0,1,1)),o instanceof e&&(o=o.baseTexture),this.baseTexture=o,this._frame=c,this.trim=l,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=d||c,this._rotate=+(p||0),p===!0)this._rotate=2;else if(this._rotate%2!==0)throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually";o.hasLoaded?(this.noFrame&&(c=new i.Rectangle(0,0,o.width,o.height),o.on("update",this.onBaseTextureUpdated,this)),this.frame=c):o.once("loaded",this.onBaseTextureLoaded,this)}var u=h("./BaseTexture"),a=h("./VideoBaseTexture"),n=h("./TextureUvs"),t=h("eventemitter3"),i=h("../math"),r=h("../utils");e.prototype=Object.create(t.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{frame:{get:function(){return this._frame},set:function(o){if(this._frame=o,this.noFrame=!1,this.width=o.width,this.height=o.height,!this.trim&&!this.rotate&&(o.x+o.width>this.baseTexture.width||o.y+o.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=o&&o.width&&o.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=o,this.valid&&this._updateUvs()}},rotate:{get:function(){return this._rotate},set:function(o){this._rotate=o,this.valid&&this._updateUvs()}}}),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(o){this.noFrame?this.frame=new i.Rectangle(0,0,o.width,o.height):this.frame=this._frame,this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(o){this._frame.width=o.width,this._frame.height=o.height,this.emit("update",this)},e.prototype.destroy=function(o){this.baseTexture&&(o&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new n),this._uvs.set(this.crop,this.baseTexture,this.rotate)},e.fromImage=function(o,c,d){var l=r.TextureCache[o];return l||(l=new e(u.fromImage(o,c,d)),r.TextureCache[o]=l),l},e.fromFrame=function(o){var c=r.TextureCache[o];if(!c)throw new Error('The frameId "'+o+'" does not exist in the texture cache');return c},e.fromCanvas=function(o,c){return new e(u.fromCanvas(o,c))},e.fromVideo=function(o,c){return typeof o=="string"?e.fromVideoUrl(o,c):new e(a.fromVideo(o,c))},e.fromVideoUrl=function(o,c){return new e(a.fromUrl(o,c))},e.addTextureToCache=function(o,c){r.TextureCache[c]=o},e.removeTextureFromCache=function(o){var c=r.TextureCache[o];return delete r.TextureCache[o],delete r.BaseTextureCache[o],c},e.EMPTY=new e(new u)},{"../math":33,"../utils":77,"./BaseTexture":70,"./TextureUvs":73,"./VideoBaseTexture":74,eventemitter3:10}],73:[function(h,f,y){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}f.exports=e;var u=h("../math/GroupD8");e.prototype.set=function(a,n,t){var i=n.width,r=n.height;if(t){var o=u.isSwapWidthHeight(t),c=(o?a.height:a.width)/2/i,d=(o?a.width:a.height)/2/r,l=a.x/i+c,p=a.y/r+d;t=u.add(t,u.NW),this.x0=l+c*u.uX(t),this.y0=p+d*u.uY(t),t=u.add(t,2),this.x1=l+c*u.uX(t),this.y1=p+d*u.uY(t),t=u.add(t,2),this.x2=l+c*u.uX(t),this.y2=p+d*u.uY(t),t=u.add(t,2),this.x3=l+c*u.uX(t),this.y3=p+d*u.uY(t)}else this.x0=a.x/i,this.y0=a.y/r,this.x1=(a.x+a.width)/i,this.y1=a.y/r,this.x2=(a.x+a.width)/i,this.y2=(a.y+a.height)/r,this.x3=a.x/i,this.y3=(a.y+a.height)/r}},{"../math/GroupD8":30}],74:[function(h,f,y){function e(t,i){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),a.call(this,t,i),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),t.complete||(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function u(t,i){i||(i="video/"+t.substr(t.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=t,r.type=i,r}var a=h("./BaseTexture"),n=h("../utils");e.prototype=Object.create(a.prototype),e.prototype.constructor=e,f.exports=e,e.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},e.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},e.prototype._onPlayStop=function(){this.autoUpdate=!1},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},e.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete n.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),a.prototype.destroy.call(this)},e.fromVideo=function(t,i){t._pixiId||(t._pixiId="video_"+n.uid());var r=n.BaseTextureCache[t._pixiId];return r||(r=new e(t,i),n.BaseTextureCache[t._pixiId]=r),r},e.fromUrl=function(t,i){var r=document.createElement("video");if(Array.isArray(t))for(var o=0;o<t.length;++o)r.appendChild(u(t[o].src||t[o],t[o].mime));else r.appendChild(u(t.src||t,t.mime));return r.load(),r.play(),e.fromVideo(r,i)},e.fromUrls=e.fromUrl},{"../utils":77,"./BaseTexture":70}],75:[function(h,f,y){function e(){var t=this;this._tick=function(i){t._requestId=null,t.started&&(t.update(i),t.started&&t._requestId===null&&t._emitter.listeners(n,!0)&&(t._requestId=requestAnimationFrame(t._tick)))},this._emitter=new a,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/u.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var u=h("../const"),a=h("eventemitter3"),n="tick";Object.defineProperties(e.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var i=Math.min(Math.max(0,t)/1e3,u.TARGET_FPMS);this._maxElapsedMS=1/i}}}),e.prototype._requestIfNeeded=function(){this._requestId===null&&this._emitter.listeners(n,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(t,i){return this._emitter.on(n,t,i),this._startIfPossible(),this},e.prototype.addOnce=function(t,i){return this._emitter.once(n,t,i),this._startIfPossible(),this},e.prototype.remove=function(t,i){return this._emitter.off(n,t,i),this._emitter.listeners(n,!0)||this._cancelIfNeeded(),this},e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.update=function(t){var i;t=t||performance.now(),i=this.elapsedMS=t-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),this.deltaTime=i*u.TARGET_FPMS*this.speed,this._emitter.emit(n,this.deltaTime),this.lastTime=t},f.exports=e},{"../const":22,eventemitter3:10}],76:[function(h,f,y){var e=h("./Ticker"),u=new e;u.autoStart=!0,f.exports={shared:u,Ticker:e}},{"./Ticker":75}],77:[function(h,f,y){var e=h("../const"),u=f.exports={_uid:0,_saidHello:!1,EventEmitter:h("eventemitter3"),pluginTarget:h("./pluginTarget"),async:h("async"),uid:function(){return++u._uid},hex2rgb:function(a,n){return n=n||[],n[0]=(a>>16&255)/255,n[1]=(a>>8&255)/255,n[2]=(255&a)/255,n},hex2string:function(a){return a=a.toString(16),a="000000".substr(0,6-a.length)+a,"#"+a},rgb2hex:function(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]},canUseNewCanvasBlendModes:function(){if(typeof document>"u")return!1;var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",t=new Image;t.src=a+"AP804Oa6"+n;var i=new Image;i.src=a+"/wCKxvRF"+n;var r=document.createElement("canvas");r.width=6,r.height=1;var o=r.getContext("2d");o.globalCompositeOperation="multiply",o.drawImage(t,0,0),o.drawImage(i,2,0);var c=o.getImageData(2,0,1,1).data;return c[0]===255&&c[1]===0&&c[2]===0},getNextPowerOfTwo:function(a){if(a>0&&!(a&a-1))return a;for(var n=1;a>n;)n<<=1;return n},isPowerOfTwo:function(a,n){return a>0&&(a&a-1)===0&&n>0&&(n&n-1)===0},getResolutionOfUrl:function(a){var n=e.RETINA_PREFIX.exec(a);return n?parseFloat(n[1]):1},sayHello:function(a){if(!u._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=[`
 %c %c %c Pixi.js `+e.VERSION+" - ✰ "+a+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,n)}else window.console&&window.console.log("Pixi.js "+e.VERSION+" - "+a+" - http://www.pixijs.com/");u._saidHello=!0}},isWebGLSupported:function(){var a={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var n=document.createElement("canvas"),t=n.getContext("webgl",a)||n.getContext("experimental-webgl",a);return!(!t||!t.getContextAttributes().stencil)}catch{return!1}},sign:function(a){return a?0>a?-1:1:0},removeItems:function(a,n,t){var i=a.length;if(!(n>=i||t===0)){t=n+t>i?i-n:t;for(var r=n,o=i-t;o>r;++r)a[r]=a[r+t];a.length=o}},TextureCache:{},BaseTextureCache:{}}},{"../const":22,"./pluginTarget":78,async:1,eventemitter3:10}],78:[function(h,f,y){function e(u){u.__plugins={},u.registerPlugin=function(a,n){u.__plugins[a]=n},u.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var a in u.__plugins)this.plugins[a]=new u.__plugins[a](this)},u.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),this.plugins[a]=null;this.plugins=null}}f.exports={mixin:function(u){e(u)}}},{}],79:[function(h,f,y){var e=h("./core"),u=h("./mesh"),a=h("./extras"),n=h("./filters");e.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},e.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(e,{Stage:{get:function(){return console.warn("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),u.Mesh}},Rope:{get:function(){return console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),u.Rope}},MovieClip:{get:function(){return console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),a.MovieClip}},TilingSprite:{get:function(){return console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),a.TilingSprite}},BitmapText:{get:function(){return console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),a.BitmapText}},blendModes:{get:function(){return console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return console.warn("The math namespace is deprecated, please access members already accessible on PIXI."),e}}}),e.Sprite.prototype.setTexture=function(t){this.texture=t,console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},a.BitmapText.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},e.Text.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.prototype.setStyle=function(t){this.style=t,console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Texture.prototype.setFrame=function(t){this.frame=t,console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")},Object.defineProperties(n,{AbstractFilter:{get:function(){return console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on."),e.AbstractFilter}},FXAAFilter:{get:function(){return console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on."),e.FXAAFilter}},SpriteMaskFilter:{get:function(){return console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}}}),e.utils.uuid=function(){return console.warn("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()}},{"./core":29,"./extras":86,"./filters":103,"./mesh":128}],80:[function(h,f,y){function e(a,n){u.Container.call(this),n=n||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:n.tint!==void 0?n.tint:16777215,align:n.align||"left",name:null,size:0},this.font=n.font,this._text=a,this.maxWidth=0,this.maxLineHeight=0,this.dirty=!1,this.updateText()}var u=h("../core");e.prototype=Object.create(u.Container.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{tint:{get:function(){return this._font.tint},set:function(a){this._font.tint=typeof a=="number"&&a>=0?a:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(a){this._font.align=a||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(a){a&&(typeof a=="string"?(a=a.split(" "),this._font.name=a.length===1?a[0]:a.slice(1).join(" "),this._font.size=a.length>=2?parseInt(a[0],10):e.fonts[this._font.name].size):(this._font.name=a.name,this._font.size=typeof a.size=="number"?a.size:parseInt(a.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(a){a=a.toString()||" ",this._text!==a&&(this._text=a,this.dirty=!0)}}}),e.prototype.updateText=function(){for(var a=e.fonts[this._font.name],n=new u.Point,t=null,i=[],r=0,o=0,c=[],d=0,l=this._font.size/a.size,p=-1,v=0,g=0;g<this.text.length;g++){var m=this.text.charCodeAt(g);if(p=/(\s)/.test(this.text.charAt(g))?g:p,/(?:\r\n|\r|\n)/.test(this.text.charAt(g)))c.push(r),o=Math.max(o,r),d++,n.x=0,n.y+=a.lineHeight,t=null;else if(p!==-1&&this.maxWidth>0&&n.x*l>this.maxWidth)u.utils.removeItems(i,p,g-p),g=p,p=-1,c.push(r),o=Math.max(o,r),d++,n.x=0,n.y+=a.lineHeight,t=null;else{var T=a.chars[m];T&&(t&&T.kerning[t]&&(n.x+=T.kerning[t]),i.push({texture:T.texture,line:d,charCode:m,position:new u.Point(n.x+T.xOffset,n.y+T.yOffset)}),r=n.x+(T.texture.width+T.xOffset),n.x+=T.xAdvance,v=Math.max(v,T.yOffset+T.texture.height),t=m)}}c.push(r),o=Math.max(o,r);var A=[];for(g=0;d>=g;g++){var P=0;this._font.align==="right"?P=o-c[g]:this._font.align==="center"&&(P=(o-c[g])/2),A.push(P)}var F=i.length,k=this.tint;for(g=0;F>g;g++){var I=this._glyphs[g];I?I.texture=i[g].texture:(I=new u.Sprite(i[g].texture),this._glyphs.push(I)),I.position.x=(i[g].position.x+A[i[g].line])*l,I.position.y=i[g].position.y*l,I.scale.x=I.scale.y=l,I.tint=k,I.parent||this.addChild(I)}for(g=F;g<this._glyphs.length;++g)this.removeChild(this._glyphs[g]);this.textWidth=o*l,this.textHeight=(n.y+a.lineHeight)*l,this.maxLineHeight=v*l},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),u.Container.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.fonts={}},{"../core":29}],81:[function(h,f,y){function e(a){u.Sprite.call(this,a[0]instanceof u.Texture?a[0]:a[0].texture),this._textures=null,this._durations=null,this.textures=a,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var u=h("../core");e.prototype=Object.create(u.Sprite.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(a){if(a[0]instanceof u.Texture)this._textures=a,this._durations=null;else{this._textures=[],this._durations=[];for(var n=0;n<a.length;n++)this._textures.push(a[n].texture),this._durations.push(a[n].time)}}},currentFrame:{get:function(){var a=Math.floor(this._currentTime)%this._textures.length;return 0>a&&(a+=this._textures.length),a}}}),e.prototype.stop=function(){this.playing&&(this.playing=!1,u.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,u.ticker.shared.add(this.update,this))},e.prototype.gotoAndStop=function(a){this.stop(),this._currentTime=a,this._texture=this._textures[this.currentFrame]},e.prototype.gotoAndPlay=function(a){this._currentTime=a,this.play()},e.prototype.update=function(a){var n=this.animationSpeed*a;if(this._durations!==null){var t=this._currentTime%1*this._durations[this.currentFrame];for(t+=n/60*1e3;0>t;)this._currentTime--,t+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);t>=this._durations[this.currentFrame];)t-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=t/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):this._texture=this._textures[this.currentFrame]},e.prototype.destroy=function(){this.stop(),u.Sprite.prototype.destroy.call(this)},e.fromFrames=function(a){for(var n=[],t=0;t<a.length;++t)n.push(new u.Texture.fromFrame(a[t]));return new e(n)},e.fromImages=function(a){for(var n=[],t=0;t<a.length;++t)n.push(new u.Texture.fromImage(a[t]));return new e(n)}},{"../core":29}],82:[function(h,f,y){function e(t,i,r){u.Sprite.call(this,t),this.tileScale=new u.Point(1,1),this.tilePosition=new u.Point(0,0),this._width=i||100,this._height=r||100,this._uvs=new u.TextureUvs,this._canvasPattern=null,this.shader=new u.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join(`
`),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join(`
`),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var u=h("../core"),a=new u.Point,n=h("../core/renderers/canvas/utils/CanvasTinter");e.prototype=Object.create(u.Sprite.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t}},height:{get:function(){return this._height},set:function(t){this._height=t}}}),e.prototype._onTextureUpdate=function(){},e.prototype._renderWebGL=function(t){var i=this._texture;if(i&&i._uvs){var r=i._uvs,o=i._frame.width,c=i._frame.height,d=i.baseTexture.width,l=i.baseTexture.height;i._uvs=this._uvs,i._frame.width=this.width,i._frame.height=this.height,this.shader.uniforms.uPixelSize.value[0]=1/d,this.shader.uniforms.uPixelSize.value[1]=1/l,this.shader.uniforms.uFrame.value[0]=r.x0,this.shader.uniforms.uFrame.value[1]=r.y0,this.shader.uniforms.uFrame.value[2]=r.x1-r.x0,this.shader.uniforms.uFrame.value[3]=r.y2-r.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(o*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(c*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=d/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=l/this._height*this.tileScale.y,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this),i._uvs=r,i._frame.width=o,i._frame.height=c}},e.prototype._renderCanvas=function(t){var i=this._texture;if(i.baseTexture.hasLoaded){var r=t.context,o=this.worldTransform,c=t.resolution,d=i.baseTexture,l=this.tilePosition.x/this.tileScale.x%i._frame.width,p=this.tilePosition.y/this.tileScale.y%i._frame.height;if(!this._canvasPattern){var v=new u.CanvasBuffer(i._frame.width*c,i._frame.height*c);this.tint!==16777215?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=n.getTintedTexture(this,this.tint)),v.context.drawImage(this.tintedTexture,0,0)):v.context.drawImage(d.source,-i._frame.x*c,-i._frame.y*c),this._canvasPattern=v.context.createPattern(v.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(o.a*c,o.b*c,o.c*c,o.d*c,o.tx*c,o.ty*c),r.scale(this.tileScale.x/c,this.tileScale.y/c),r.translate(l+this.anchor.x*-this._width,p+this.anchor.y*-this._height);var g=t.blendModes[this.blendMode];g!==t.context.globalCompositeOperation&&(r.globalCompositeOperation=g),r.fillStyle=this._canvasPattern,r.fillRect(-l,-p,this._width*c/this.tileScale.x,this._height*c/this.tileScale.y)}},e.prototype.getBounds=function(){var t,i,r,o,c=this._width,d=this._height,l=c*(1-this.anchor.x),p=c*-this.anchor.x,v=d*(1-this.anchor.y),g=d*-this.anchor.y,m=this.worldTransform,T=m.a,A=m.b,P=m.c,F=m.d,k=m.tx,I=m.ty,U=T*p+P*g+k,X=F*g+A*p+I,z=T*l+P*g+k,x=F*g+A*l+I,w=T*l+P*v+k,_=F*v+A*l+I,M=T*p+P*v+k,b=F*v+A*p+I;t=U,t=t>z?z:t,t=t>w?w:t,t=t>M?M:t,r=X,r=r>x?x:r,r=r>_?_:r,r=r>b?b:r,i=U,i=z>i?z:i,i=w>i?w:i,i=M>i?M:i,o=X,o=x>o?x:o,o=_>o?_:o,o=b>o?b:o;var E=this._bounds;return E.x=t,E.width=i-t,E.y=r,E.height=o-r,this._currentBounds=E,E},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,a);var i,r=this._width,o=this._height,c=-r*this.anchor.x;return a.x>c&&a.x<c+r&&(i=-o*this.anchor.y,a.y>i&&a.y<i+o)},e.prototype.destroy=function(){u.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},e.fromFrame=function(t,i,r){var o=u.utils.TextureCache[t];if(!o)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(o,i,r)},e.fromImage=function(t,i,r,o,c){return new e(u.Texture.fromImage(t,o,c),i,r)}},{"../core":29,"../core/renderers/canvas/utils/CanvasTinter":48}],83:[function(h,f,y){var e=h("../core"),u=e.DisplayObject,a=new e.Matrix;u.prototype._cacheAsBitmap=!1,u.prototype._originalRenderWebGL=null,u.prototype._originalRenderCanvas=null,u.prototype._originalUpdateTransform=null,u.prototype._originalHitTest=null,u.prototype._originalDestroy=null,u.prototype._cachedSprite=null,Object.defineProperties(u.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(n){this._cacheAsBitmap!==n&&(this._cacheAsBitmap=n,n?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),u.prototype._renderCachedWebGL=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(n),this._cachedSprite.worldAlpha=this.worldAlpha,n.setObjectRenderer(n.plugins.sprite),n.plugins.sprite.render(this._cachedSprite))},u.prototype._initCachedDisplayObject=function(n){if(!this._cachedSprite){n.currentRenderer.flush();var t=this.getLocalBounds().clone();if(this._filters){var i=this._filters[0].padding;t.x-=i,t.y-=i,t.width+=2*i,t.height+=2*i}var r=n.currentRenderTarget,o=n.filterManager.filterStack,c=new e.RenderTexture(n,0|t.width,0|t.height),d=a;d.tx=-t.x,d.ty=-t.y,this.renderWebGL=this._originalRenderWebGL,c.render(this,d,!0,!0),n.setRenderTarget(r),n.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new e.Sprite(c),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},u.prototype._renderCachedCanvas=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(n),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(n))},u.prototype._initCachedDisplayObjectCanvas=function(n){if(!this._cachedSprite){var t=this.getLocalBounds(),i=n.context,r=new e.RenderTexture(n,0|t.width,0|t.height),o=a;o.tx=-t.x,o.ty=-t.y,this.renderCanvas=this._originalRenderCanvas,r.render(this,o,!0),n.context=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new e.Sprite(r),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},u.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},u.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},u.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},{"../core":29}],84:[function(h,f,y){var e=h("../core");e.DisplayObject.prototype.name=null,e.Container.prototype.getChildByName=function(u){for(var a=0;a<this.children.length;a++)if(this.children[a].name===u)return this.children[a];return null}},{"../core":29}],85:[function(h,f,y){var e=h("../core");e.DisplayObject.prototype.getGlobalPosition=function(u){return u=u||new e.Point,this.parent?(this.displayObjectUpdateTransform(),u.x=this.worldTransform.tx,u.y=this.worldTransform.ty):(u.x=this.position.x,u.y=this.position.y),u}},{"../core":29}],86:[function(h,f,y){h("./cacheAsBitmap"),h("./getChildByName"),h("./getGlobalPosition"),f.exports={MovieClip:h("./MovieClip"),TilingSprite:h("./TilingSprite"),BitmapText:h("./BitmapText")}},{"./BitmapText":80,"./MovieClip":81,"./TilingSprite":82,"./cacheAsBitmap":83,"./getChildByName":84,"./getGlobalPosition":85}],87:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

uniform vec4 dimensions;
uniform float pixelSize;
uniform sampler2D uSampler;

float character(float n, vec2 p)
{
    p = floor(p*vec2(4.0, -4.0) + 2.5);
    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)
    {
        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;
    }
    return 0.0;
}

void main()
{
    vec2 uv = gl_FragCoord.xy;

    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;

    float gray = (col.r + col.g + col.b) / 3.0;

    float n =  65536.0;             // .
    if (gray > 0.2) n = 65600.0;    // :
    if (gray > 0.3) n = 332772.0;   // *
    if (gray > 0.4) n = 15255086.0; // o
    if (gray > 0.5) n = 23385164.0; // &
    if (gray > 0.6) n = 15252014.0; // 8
    if (gray > 0.7) n = 13199452.0; // @
    if (gray > 0.8) n = 11512810.0; // #

    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);
    col = col * character(n, p);

    gl_FragColor = vec4(col, 1.0);
}
`,{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(a){this.uniforms.pixelSize.value=a}}})},{"../../core":29}],88:[function(h,f,y){function e(){u.AbstractFilter.call(this),this.blurXFilter=new a,this.blurYFilter=new n,this.defaultFilter=new u.AbstractFilter}var u=h("../../core"),a=h("../blur/BlurXFilter"),n=h("../blur/BlurYFilter");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.applyFilter=function(t,i,r){var o=t.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(t,i,r),this.blurXFilter.applyFilter(t,i,o),t.blendModeManager.setBlendMode(u.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(t,o,r),t.blendModeManager.setBlendMode(u.BLEND_MODES.NORMAL),t.filterManager.returnRenderTarget(o)},Object.defineProperties(e.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":29,"../blur/BlurXFilter":91,"../blur/BlurYFilter":92}],89:[function(h,f,y){function e(a,n){u.AbstractFilter.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

uniform float strength;
uniform float dirX;
uniform float dirY;
uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying vec2 vBlurTexCoords[3];

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;

    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );
    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );
    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );

    vColor = vec4(aColor.rgb * aColor.a, aColor.a);
}
`,`precision lowp float;

varying vec2 vTextureCoord;
varying vec2 vBlurTexCoords[3];
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = vec4(0.0);

    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;
}
`,{strength:{type:"1f",value:1},dirX:{type:"1f",value:a||0},dirY:{type:"1f",value:n||0}}),this.defaultFilter=new u.AbstractFilter,this.passes=1,this.dirX=a||0,this.dirY=n||0,this.strength=4}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.applyFilter=function(a,n,t,i){var r=this.getShader(a);if(this.uniforms.strength.value=this.strength/4/this.passes*(n.frame.width/n.size.width),this.passes===1)a.filterManager.applyFilter(r,n,t,i);else{var o=a.filterManager.getRenderTarget(!0);a.filterManager.applyFilter(r,n,o,i);for(var c=0;c<this.passes-2;c++)a.filterManager.applyFilter(r,o,o,i);a.filterManager.applyFilter(r,o,t,i),a.filterManager.returnRenderTarget(o)}},Object.defineProperties(e.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=.5*a,this.strength=a}},dirX:{get:function(){return this.dirX},set:function(a){this.uniforms.dirX.value=a}},dirY:{get:function(){return this.dirY},set:function(a){this.uniforms.dirY.value=a}}})},{"../../core":29}],90:[function(h,f,y){function e(){u.AbstractFilter.call(this),this.blurXFilter=new a,this.blurYFilter=new n}var u=h("../../core"),a=h("./BlurXFilter"),n=h("./BlurYFilter");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.applyFilter=function(t,i,r){var o=t.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(t,i,o),this.blurYFilter.applyFilter(t,o,r),t.filterManager.returnRenderTarget(o)},Object.defineProperties(e.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.padding=.5*Math.abs(t),this.blurXFilter.blur=this.blurYFilter.blur=t}},passes:{get:function(){return this.blurXFilter.passes},set:function(t){this.blurXFilter.passes=this.blurYFilter.passes=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":29,"./BlurXFilter":91,"./BlurYFilter":92}],91:[function(h,f,y){function e(){u.AbstractFilter.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

uniform float strength;
uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying vec2 vBlurTexCoords[6];

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;

    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);
    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);
    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);
    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);
    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);
    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);

    vColor = vec4(aColor.rgb * aColor.a, aColor.a);
}
`,`precision lowp float;

varying vec2 vTextureCoord;
varying vec2 vBlurTexCoords[6];
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = vec4(0.0);

    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;
    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;
}
`,{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.applyFilter=function(a,n,t,i){var r=this.getShader(a);if(this.uniforms.strength.value=this.strength/4/this.passes*(n.frame.width/n.size.width),this.passes===1)a.filterManager.applyFilter(r,n,t,i);else{for(var o=a.filterManager.getRenderTarget(!0),c=n,d=o,l=0;l<this.passes-1;l++){a.filterManager.applyFilter(r,c,d,!0);var p=d;d=c,c=p}a.filterManager.applyFilter(r,c,t,i),a.filterManager.returnRenderTarget(o)}},Object.defineProperties(e.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=.5*Math.abs(a),this.strength=a}}})},{"../../core":29}],92:[function(h,f,y){function e(){u.AbstractFilter.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

uniform float strength;
uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying vec2 vBlurTexCoords[6];

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;

    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);
    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);
    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);
    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);
    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);
    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);

   vColor = vec4(aColor.rgb * aColor.a, aColor.a);
}
`,`precision lowp float;

varying vec2 vTextureCoord;
varying vec2 vBlurTexCoords[6];
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = vec4(0.0);

    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;
    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;
    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;
}
`,{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.applyFilter=function(a,n,t,i){var r=this.getShader(a);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(n.frame.height/n.size.height),this.passes===1)a.filterManager.applyFilter(r,n,t,i);else{for(var o=a.filterManager.getRenderTarget(!0),c=n,d=o,l=0;l<this.passes-1;l++){a.filterManager.applyFilter(r,c,d,!0);var p=d;d=c,c=p}a.filterManager.applyFilter(r,c,t,i),a.filterManager.returnRenderTarget(o)}},Object.defineProperties(e.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=.5*Math.abs(a),this.strength=a}}})},{"../../core":29}],93:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec2 delta;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    gl_FragColor = color / total;
    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;
}
`,{delta:{type:"v2",value:{x:.1,y:0}}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e},{"../../core":29}],94:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[25];

void main(void)
{

    vec4 c = texture2D(uSampler, vTextureCoord);

    gl_FragColor.r = (m[0] * c.r);
        gl_FragColor.r += (m[1] * c.g);
        gl_FragColor.r += (m[2] * c.b);
        gl_FragColor.r += (m[3] * c.a);
        gl_FragColor.r += m[4] * c.a;

    gl_FragColor.g = (m[5] * c.r);
        gl_FragColor.g += (m[6] * c.g);
        gl_FragColor.g += (m[7] * c.b);
        gl_FragColor.g += (m[8] * c.a);
        gl_FragColor.g += m[9] * c.a;

     gl_FragColor.b = (m[10] * c.r);
        gl_FragColor.b += (m[11] * c.g);
        gl_FragColor.b += (m[12] * c.b);
        gl_FragColor.b += (m[13] * c.a);
        gl_FragColor.b += m[14] * c.a;

     gl_FragColor.a = (m[15] * c.r);
        gl_FragColor.a += (m[16] * c.g);
        gl_FragColor.a += (m[17] * c.b);
        gl_FragColor.a += (m[18] * c.a);
        gl_FragColor.a += m[19] * c.a;

}
`,{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,e.prototype._loadMatrix=function(a,n){n=!!n;var t=a;n&&(this._multiply(t,this.uniforms.m.value,a),t=this._colorMatrix(t)),this.uniforms.m.value=t},e.prototype._multiply=function(a,n,t){return a[0]=n[0]*t[0]+n[1]*t[5]+n[2]*t[10]+n[3]*t[15],a[1]=n[0]*t[1]+n[1]*t[6]+n[2]*t[11]+n[3]*t[16],a[2]=n[0]*t[2]+n[1]*t[7]+n[2]*t[12]+n[3]*t[17],a[3]=n[0]*t[3]+n[1]*t[8]+n[2]*t[13]+n[3]*t[18],a[4]=n[0]*t[4]+n[1]*t[9]+n[2]*t[14]+n[3]*t[19],a[5]=n[5]*t[0]+n[6]*t[5]+n[7]*t[10]+n[8]*t[15],a[6]=n[5]*t[1]+n[6]*t[6]+n[7]*t[11]+n[8]*t[16],a[7]=n[5]*t[2]+n[6]*t[7]+n[7]*t[12]+n[8]*t[17],a[8]=n[5]*t[3]+n[6]*t[8]+n[7]*t[13]+n[8]*t[18],a[9]=n[5]*t[4]+n[6]*t[9]+n[7]*t[14]+n[8]*t[19],a[10]=n[10]*t[0]+n[11]*t[5]+n[12]*t[10]+n[13]*t[15],a[11]=n[10]*t[1]+n[11]*t[6]+n[12]*t[11]+n[13]*t[16],a[12]=n[10]*t[2]+n[11]*t[7]+n[12]*t[12]+n[13]*t[17],a[13]=n[10]*t[3]+n[11]*t[8]+n[12]*t[13]+n[13]*t[18],a[14]=n[10]*t[4]+n[11]*t[9]+n[12]*t[14]+n[13]*t[19],a[15]=n[15]*t[0]+n[16]*t[5]+n[17]*t[10]+n[18]*t[15],a[16]=n[15]*t[1]+n[16]*t[6]+n[17]*t[11]+n[18]*t[16],a[17]=n[15]*t[2]+n[16]*t[7]+n[17]*t[12]+n[18]*t[17],a[18]=n[15]*t[3]+n[16]*t[8]+n[17]*t[13]+n[18]*t[18],a[19]=n[15]*t[4]+n[16]*t[9]+n[17]*t[14]+n[18]*t[19],a},e.prototype._colorMatrix=function(a){var n=new Float32Array(a);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n},e.prototype.brightness=function(a,n){var t=[a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.greyscale=function(a,n){var t=[a,a,a,0,0,a,a,a,0,0,a,a,a,0,0,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.grayscale=e.prototype.greyscale,e.prototype.blackAndWhite=function(a){var n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,a)},e.prototype.hue=function(a,n){a=(a||0)/180*Math.PI;var t=Math.cos(a),i=Math.sin(a),r=.213,o=.715,c=.072,d=[r+t*(1-r)+i*-r,o+t*-o+i*-o,c+t*-c+i*(1-c),0,0,r+t*-r+.143*i,o+t*(1-o)+.14*i,c+t*-c+i*-.283,0,0,r+t*-r+i*-(1-r),o+t*-o+i*o,c+t*(1-c)+i*c,0,0,0,0,0,1,0];this._loadMatrix(d,n)},e.prototype.contrast=function(a,n){var t=(a||0)+1,i=-128*(t-1),r=[t,0,0,0,i,0,t,0,0,i,0,0,t,0,i,0,0,0,1,0];this._loadMatrix(r,n)},e.prototype.saturate=function(a,n){var t=2*(a||0)/3+1,i=(t-1)*-.5,r=[t,i,i,0,0,i,t,i,0,0,i,i,t,0,0,0,0,0,1,0];this._loadMatrix(r,n)},e.prototype.desaturate=function(a){this.saturate(-1)},e.prototype.negative=function(a){var n=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(n,a)},e.prototype.sepia=function(a){var n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,a)},e.prototype.technicolor=function(a){var n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,a)},e.prototype.polaroid=function(a){var n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,a)},e.prototype.toBGR=function(a){var n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,a)},e.prototype.kodachrome=function(a){var n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,a)},e.prototype.browni=function(a){var n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,a)},e.prototype.vintage=function(a){var n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,a)},e.prototype.colorTone=function(a,n,t,i,r){a=a||.2,n=n||.15,t=t||16770432,i=i||3375104;var o=(t>>16&255)/255,c=(t>>8&255)/255,d=(255&t)/255,l=(i>>16&255)/255,p=(i>>8&255)/255,v=(255&i)/255,g=[.3,.59,.11,0,0,o,c,d,a,0,l,p,v,n,0,o-l,c-p,d-v,0,0];this._loadMatrix(g,r)},e.prototype.night=function(a,n){a=a||.1;var t=[-2*a,-a,0,0,0,-a,0,a,0,0,0,a,2*a,0,0,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.predator=function(a,n){var t=[11.224130630493164*a,-4.794486999511719*a,-2.8746118545532227*a,0*a,.40342438220977783*a,-3.6330697536468506*a,9.193157196044922*a,-2.951810836791992*a,0*a,-1.316135048866272*a,-3.2184197902679443*a,-4.2375030517578125*a,7.476448059082031*a,0*a,.8044459223747253*a,0,0,0,1,0];this._loadMatrix(t,n)},e.prototype.lsd=function(a){var n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,a)},e.prototype.reset=function(){var a=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(a,!1)},Object.defineProperties(e.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(a){this.uniforms.m.value=a}}})},{"../../core":29}],95:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float step;

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    color = floor(color * step) / step;

    gl_FragColor = color;
}
`,{step:{type:"1f",value:5}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(a){this.uniforms.step.value=a}}})},{"../../core":29}],96:[function(h,f,y){function e(a,n,t){u.AbstractFilter.call(this,null,`precision mediump float;

varying mediump vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec2 texelSize;
uniform float matrix[9];

void main(void)
{
   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left
   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center
   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right

   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left
   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center
   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right

   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left
   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center
   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right

   gl_FragColor =
       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +
       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +
       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];

   gl_FragColor.a = c22.a;
}
`,{matrix:{type:"1fv",value:new Float32Array(a)},texelSize:{type:"v2",value:{x:1/n,y:1/t}}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(a){this.uniforms.matrix.value=new Float32Array(a)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(a){this.uniforms.texelSize.value.x=1/a}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(a){this.uniforms.texelSize.value.y=1/a}}})},{"../../core":29}],97:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void)
{
    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);

    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);

    if (lum < 1.00)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.75)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.50)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.3)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }
}
`)}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e},{"../../core":29}],98:[function(h,f,y){function e(a,n){var t=new u.Matrix;a.renderable=!1,u.AbstractFilter.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMapCoord;
varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void)
{
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
   vColor = vec4(aColor.rgb * aColor.a, aColor.a);
}
`,`precision mediump float;

varying vec2 vMapCoord;
varying vec2 vTextureCoord;
varying vec4 vColor;

uniform vec2 scale;

uniform sampler2D uSampler;
uniform sampler2D mapSampler;

void main(void)
{
   vec4 map =  texture2D(mapSampler, vMapCoord);

   map -= 0.5;
   map.xy *= scale;

   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));
}
`,{mapSampler:{type:"sampler2D",value:a.texture},otherMatrix:{type:"mat3",value:t.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=a,this.maskMatrix=t,n!=null||(n=20),this.scale=new u.Point(n,n)}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.applyFilter=function(a,n,t){var i=a.filterManager;i.calculateMappedMatrix(n.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/n.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/n.frame.height);var r=this.getShader(a);i.applyFilter(r,n,t)},Object.defineProperties(e.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(a){this.uniforms.mapSampler.value=a}}})},{"../../core":29}],99:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform vec4 dimensions;
uniform sampler2D uSampler;

uniform float angle;
uniform float scale;

float pattern()
{
   float s = sin(angle), c = cos(angle);
   vec2 tex = vTextureCoord * dimensions.xy;
   vec2 point = vec2(
       c * tex.x - s * tex.y,
       s * tex.x + c * tex.y
   ) * scale;
   return (sin(point.x) * sin(point.y)) * 4.0;
}

void main()
{
   vec4 color = texture2D(uSampler, vTextureCoord);
   float average = (color.r + color.g + color.b) / 3.0;
   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);
}
`,{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(a){this.uniforms.scale.value=a}},angle:{get:function(){return this.uniforms.angle.value},set:function(a){this.uniforms.angle.value=a}}})},{"../../core":29}],100:[function(h,f,y){function e(){u.AbstractFilter.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

uniform float strength;
uniform vec2 offset;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying vec2 vBlurTexCoords[6];

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;

    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);
    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);
    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);
    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);
    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);
    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);

   vColor = vec4(aColor.rgb * aColor.a, aColor.a);
}
`,`precision lowp float;

varying vec2 vTextureCoord;
varying vec2 vBlurTexCoords[6];
varying vec4 vColor;

uniform vec3 color;
uniform float alpha;

uniform sampler2D uSampler;

void main(void)
{
    vec4 sum = vec4(0.0);

    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;
    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;
    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;
    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;
    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;
    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;
    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;

    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );
}
`,{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.applyFilter=function(a,n,t,i){var r=this.getShader(a);if(this.uniforms.strength.value=this.strength/4/this.passes*(n.frame.height/n.size.height),this.passes===1)a.filterManager.applyFilter(r,n,t,i);else{for(var o=a.filterManager.getRenderTarget(!0),c=n,d=o,l=0;l<this.passes-1;l++){a.filterManager.applyFilter(r,c,d,i);var p=d;d=c,c=p}a.filterManager.applyFilter(r,c,t,i),a.filterManager.returnRenderTarget(o)}},Object.defineProperties(e.prototype,{blur:{get:function(){return this.strength},set:function(a){this.padding=.5*a,this.strength=a}}})},{"../../core":29}],101:[function(h,f,y){function e(){u.AbstractFilter.call(this),this.blurXFilter=new a,this.blurYTintFilter=new n,this.defaultFilter=new u.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=u.BLEND_MODES.MULTIPLY}var u=h("../../core"),a=h("../blur/BlurXFilter"),n=h("./BlurYTintFilter");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.applyFilter=function(t,i,r){var o=t.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(t,i,o),t.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(t,o,r),t.blendModeManager.setBlendMode(u.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(t,i,r),t.filterManager.returnRenderTarget(o)},Object.defineProperties(e.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYTintFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(t){this.blurYTintFilter.blur=t}},color:{get:function(){return u.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(t){this.blurYTintFilter.uniforms.color.value=u.utils.hex2rgb(t)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(t){this.blurYTintFilter.uniforms.alpha.value=t}},distance:{get:function(){return this._distance},set:function(t){this._dirtyPosition=!0,this._distance=t}},angle:{get:function(){return this._angle},set:function(t){this._dirtyPosition=!0,this._angle=t}}})},{"../../core":29,"../blur/BlurXFilter":91,"./BlurYTintFilter":100}],102:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;
uniform float gray;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord);
   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);
}
`,{gray:{type:"1f",value:1}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(a){this.uniforms.gray.value=a}}})},{"../../core":29}],103:[function(h,f,y){f.exports={AsciiFilter:h("./ascii/AsciiFilter"),BloomFilter:h("./bloom/BloomFilter"),BlurFilter:h("./blur/BlurFilter"),BlurXFilter:h("./blur/BlurXFilter"),BlurYFilter:h("./blur/BlurYFilter"),BlurDirFilter:h("./blur/BlurDirFilter"),ColorMatrixFilter:h("./color/ColorMatrixFilter"),ColorStepFilter:h("./color/ColorStepFilter"),ConvolutionFilter:h("./convolution/ConvolutionFilter"),CrossHatchFilter:h("./crosshatch/CrossHatchFilter"),DisplacementFilter:h("./displacement/DisplacementFilter"),DotScreenFilter:h("./dot/DotScreenFilter"),GrayFilter:h("./gray/GrayFilter"),DropShadowFilter:h("./dropshadow/DropShadowFilter"),InvertFilter:h("./invert/InvertFilter"),NoiseFilter:h("./noise/NoiseFilter"),PixelateFilter:h("./pixelate/PixelateFilter"),RGBSplitFilter:h("./rgb/RGBSplitFilter"),ShockwaveFilter:h("./shockwave/ShockwaveFilter"),SepiaFilter:h("./sepia/SepiaFilter"),SmartBlurFilter:h("./blur/SmartBlurFilter"),TiltShiftFilter:h("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:h("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:h("./tiltshift/TiltShiftYFilter"),TwistFilter:h("./twist/TwistFilter")}},{"./ascii/AsciiFilter":87,"./bloom/BloomFilter":88,"./blur/BlurDirFilter":89,"./blur/BlurFilter":90,"./blur/BlurXFilter":91,"./blur/BlurYFilter":92,"./blur/SmartBlurFilter":93,"./color/ColorMatrixFilter":94,"./color/ColorStepFilter":95,"./convolution/ConvolutionFilter":96,"./crosshatch/CrossHatchFilter":97,"./displacement/DisplacementFilter":98,"./dot/DotScreenFilter":99,"./dropshadow/DropShadowFilter":101,"./gray/GrayFilter":102,"./invert/InvertFilter":104,"./noise/NoiseFilter":105,"./pixelate/PixelateFilter":106,"./rgb/RGBSplitFilter":107,"./sepia/SepiaFilter":108,"./shockwave/ShockwaveFilter":109,"./tiltshift/TiltShiftFilter":111,"./tiltshift/TiltShiftXFilter":112,"./tiltshift/TiltShiftYFilter":113,"./twist/TwistFilter":114}],104:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

varying vec2 vTextureCoord;

uniform float invert;
uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);

    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);
}
`,{invert:{type:"1f",value:1}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(a){this.uniforms.invert.value=a}}})},{"../../core":29}],105:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float noise;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    float diff = (rand(vTextureCoord) - 0.5) * noise;

    color.r += diff;
    color.g += diff;
    color.b += diff;

    gl_FragColor = color;
}
`,{noise:{type:"1f",value:.5}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(a){this.uniforms.noise.value=a}}})},{"../../core":29}],106:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

varying vec2 vTextureCoord;

uniform vec4 dimensions;
uniform vec2 pixelSize;
uniform sampler2D uSampler;

void main(void)
{
    vec2 coord = vTextureCoord;

    vec2 size = dimensions.xy / pixelSize;

    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;

    gl_FragColor = texture2D(uSampler, color);
}
`,{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(a){this.uniforms.pixelSize.value=a}}})},{"../../core":29}],107:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 dimensions;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

void main(void)
{
   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;
   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;
   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;
   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;
}
`,{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(a){this.uniforms.red.value=a}},green:{get:function(){return this.uniforms.green.value},set:function(a){this.uniforms.green.value=a}},blue:{get:function(){return this.uniforms.blue.value},set:function(a){this.uniforms.blue.value=a}}})},{"../../core":29}],108:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float sepia;

const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord);
   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);
}
`,{sepia:{type:"1f",value:1}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(a){this.uniforms.sepia.value=a}}})},{"../../core":29}],109:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

uniform vec2 center;
uniform vec3 params; // 10.0, 0.8, 0.1
uniform float time;

void main()
{
    vec2 uv = vTextureCoord;
    vec2 texCoord = uv;

    float dist = distance(uv, center);

    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )
    {
        float diff = (dist - time);
        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);

        float diffTime = diff  * powDiff;
        vec2 diffUV = normalize(uv - center);
        texCoord = uv + (diffUV * diffTime);
    }

    gl_FragColor = texture2D(uSampler, texCoord);
}
`,{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(a){this.uniforms.center.value=a}},params:{get:function(){return this.uniforms.params.value},set:function(a){this.uniforms.params.value=a}},time:{get:function(){return this.uniforms.time.value},set:function(a){this.uniforms.time.value=a}}})},{"../../core":29}],110:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    gl_FragColor = color / total;
    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;
}
`,{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(e.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(a){this.uniforms.blur.value=a}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(a){this.uniforms.gradientBlur.value=a}},start:{get:function(){return this.uniforms.start.value},set:function(a){this.uniforms.start.value=a,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(a){this.uniforms.end.value=a,this.updateDelta()}}})},{"../../core":29}],111:[function(h,f,y){function e(){u.AbstractFilter.call(this),this.tiltShiftXFilter=new a,this.tiltShiftYFilter=new n}var u=h("../../core"),a=h("./TiltShiftXFilter"),n=h("./TiltShiftYFilter");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.applyFilter=function(t,i,r){var o=t.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(t,i,o),this.tiltShiftYFilter.applyFilter(t,o,r),t.filterManager.returnRenderTarget(o)},Object.defineProperties(e.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t}}})},{"../../core":29,"./TiltShiftXFilter":112,"./TiltShiftYFilter":113}],112:[function(h,f,y){function e(){u.call(this)}var u=h("./TiltShiftAxisFilter");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.updateDelta=function(){var a=this.uniforms.end.value.x-this.uniforms.start.value.x,n=this.uniforms.end.value.y-this.uniforms.start.value.y,t=Math.sqrt(a*a+n*n);this.uniforms.delta.value.x=a/t,this.uniforms.delta.value.y=n/t}},{"./TiltShiftAxisFilter":110}],113:[function(h,f,y){function e(){u.call(this)}var u=h("./TiltShiftAxisFilter");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.updateDelta=function(){var a=this.uniforms.end.value.x-this.uniforms.start.value.x,n=this.uniforms.end.value.y-this.uniforms.start.value.y,t=Math.sqrt(a*a+n*n);this.uniforms.delta.value.x=-n/t,this.uniforms.delta.value.y=a/t}},{"./TiltShiftAxisFilter":110}],114:[function(h,f,y){function e(){u.AbstractFilter.call(this,null,`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;

void main(void)
{
   vec2 coord = vTextureCoord - offset;
   float dist = length(coord);

   if (dist < radius)
   {
       float ratio = (radius - dist) / radius;
       float angleMod = ratio * ratio * angle;
       float s = sin(angleMod);
       float c = cos(angleMod);
       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
   }

   gl_FragColor = texture2D(uSampler, coord+offset);
}
`,{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var u=h("../../core");e.prototype=Object.create(u.AbstractFilter.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(a){this.uniforms.offset.value=a}},radius:{get:function(){return this.uniforms.radius.value},set:function(a){this.uniforms.radius.value=a}},angle:{get:function(){return this.uniforms.angle.value},set:function(a){this.uniforms.angle.value=a}}})},{"../../core":29}],115:[function(h,f,y){(function(e){h("./polyfill");var u=f.exports=h("./core");u.extras=h("./extras"),u.filters=h("./filters"),u.interaction=h("./interaction"),u.loaders=h("./loaders"),u.mesh=h("./mesh"),u.accessibility=h("./accessibility"),u.loader=new u.loaders.Loader,Object.assign(u,h("./deprecation")),e.PIXI=u}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./accessibility":21,"./core":29,"./deprecation":79,"./extras":86,"./filters":103,"./interaction":118,"./loaders":121,"./mesh":128,"./polyfill":133}],116:[function(h,f,y){function e(){this.global=new u.Point,this.target=null,this.originalEvent=null}var u=h("../core");e.prototype.constructor=e,f.exports=e,e.prototype.getLocalPosition=function(a,n,t){return a.worldTransform.applyInverse(t||this.global,n)}},{"../core":29}],117:[function(h,f,y){function e(n,t){t=t||{},this.renderer=n,this.autoPreventDefault=t.autoPreventDefault!==void 0?t.autoPreventDefault:!0,this.interactionFrequency=t.interactionFrequency||10,this.mouse=new a,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this._tempPoint=new u.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var u=h("../core"),a=h("./InteractionData");Object.assign(u.DisplayObject.prototype,h("./interactiveTarget")),e.prototype.constructor=e,f.exports=e,e.prototype.setTargetElement=function(n,t){this.removeEvents(),this.interactionDOMElement=n,this.resolution=t||1,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(u.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(u.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},e.prototype.update=function(n){if(this._deltaTime+=n,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},e.prototype.dispatchEvent=function(n,t,i){i.stopped||(i.target=n,i.type=t,n.emit(t,i),n[t]&&n[t](i))},e.prototype.mapPositionToPoint=function(n,t,i){var r=this.interactionDOMElement.getBoundingClientRect();n.x=(t-r.left)*(this.interactionDOMElement.width/r.width)/this.resolution,n.y=(i-r.top)*(this.interactionDOMElement.height/r.height)/this.resolution},e.prototype.processInteractive=function(n,t,i,r,o){if(!t||!t.visible)return!1;var c=!1,d=o=t.interactive||o;if(t.hitArea&&(d=!1),t.interactiveChildren)for(var l=t.children,p=l.length-1;p>=0;p--){var v=l[p];if(this.processInteractive(n,v,i,r,d)){if(!v.parent)continue;c=!0,d=!1,r=!1}}return o&&(r&&!c&&(t.hitArea?(t.worldTransform.applyInverse(n,this._tempPoint),c=t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):t.containsPoint&&(c=t.containsPoint(n))),t.interactive&&i(t,c)),c},e.prototype.onMouseDown=function(n){this.mouse.originalEvent=n,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,n.clientX,n.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},e.prototype.processMouseDown=function(n,t){var i=this.mouse.originalEvent,r=i.button===2||i.which===3;t&&(n[r?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(n,r?"rightdown":"mousedown",this.eventData))},e.prototype.onMouseUp=function(n){this.mouse.originalEvent=n,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,n.clientX,n.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},e.prototype.processMouseUp=function(n,t){var i=this.mouse.originalEvent,r=i.button===2||i.which===3,o=r?"_isRightDown":"_isLeftDown";t?(this.dispatchEvent(n,r?"rightup":"mouseup",this.eventData),n[o]&&(n[o]=!1,this.dispatchEvent(n,r?"rightclick":"click",this.eventData))):n[o]&&(n[o]=!1,this.dispatchEvent(n,r?"rightupoutside":"mouseupoutside",this.eventData))},e.prototype.onMouseMove=function(n){this.mouse.originalEvent=n,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,n.clientX,n.clientY),this.didMove=!0,this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},e.prototype.processMouseMove=function(n,t){this.processMouseOverOut(n,t),this.moveWhenInside&&!t||this.dispatchEvent(n,"mousemove",this.eventData)},e.prototype.onMouseOut=function(n){this.mouse.originalEvent=n,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,n.clientX,n.clientY),this.interactionDOMElement.style.cursor="inherit",this.mapPositionToPoint(this.mouse.global,n.clientX,n.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)},e.prototype.processMouseOverOut=function(n,t){t?(n._over||(n._over=!0,this.dispatchEvent(n,"mouseover",this.eventData)),n.buttonMode&&(this.cursor=n.defaultCursor)):n._over&&(n._over=!1,this.dispatchEvent(n,"mouseout",this.eventData))},e.prototype.onTouchStart=function(n){this.autoPreventDefault&&n.preventDefault();for(var t=n.changedTouches,i=t.length,r=0;i>r;r++){var o=t[r],c=this.getTouchData(o);c.originalEvent=n,this.eventData.data=c,this.eventData.stopped=!1,this.processInteractive(c.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(c)}},e.prototype.processTouchStart=function(n,t){t&&(n._touchDown=!0,this.dispatchEvent(n,"touchstart",this.eventData))},e.prototype.onTouchEnd=function(n){this.autoPreventDefault&&n.preventDefault();for(var t=n.changedTouches,i=t.length,r=0;i>r;r++){var o=t[r],c=this.getTouchData(o);c.originalEvent=n,this.eventData.data=c,this.eventData.stopped=!1,this.processInteractive(c.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(c)}},e.prototype.processTouchEnd=function(n,t){t?(this.dispatchEvent(n,"touchend",this.eventData),n._touchDown&&(n._touchDown=!1,this.dispatchEvent(n,"tap",this.eventData))):n._touchDown&&(n._touchDown=!1,this.dispatchEvent(n,"touchendoutside",this.eventData))},e.prototype.onTouchMove=function(n){this.autoPreventDefault&&n.preventDefault();for(var t=n.changedTouches,i=t.length,r=0;i>r;r++){var o=t[r],c=this.getTouchData(o);c.originalEvent=n,this.eventData.data=c,this.eventData.stopped=!1,this.processInteractive(c.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside),this.returnTouchData(c)}},e.prototype.processTouchMove=function(n,t){this.moveWhenInside&&!t||this.dispatchEvent(n,"touchmove",this.eventData)},e.prototype.getTouchData=function(n){var t=this.interactiveDataPool.pop();return t||(t=new a),t.identifier=n.identifier,this.mapPositionToPoint(t.global,n.clientX,n.clientY),navigator.isCocoonJS&&(t.global.x=t.global.x/this.resolution,t.global.y=t.global.y/this.resolution),n.globalX=t.global.x,n.globalY=t.global.y,t},e.prototype.returnTouchData=function(n){this.interactiveDataPool.push(n)},e.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},u.WebGLRenderer.registerPlugin("interaction",e),u.CanvasRenderer.registerPlugin("interaction",e)},{"../core":29,"./InteractionData":116,"./interactiveTarget":119}],118:[function(h,f,y){f.exports={InteractionData:h("./InteractionData"),InteractionManager:h("./InteractionManager"),interactiveTarget:h("./interactiveTarget")}},{"./InteractionData":116,"./InteractionManager":117,"./interactiveTarget":119}],119:[function(h,f,y){var e={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1};f.exports=e},{}],120:[function(h,f,y){function e(i,r){var o={},c=i.data.getElementsByTagName("info")[0],d=i.data.getElementsByTagName("common")[0];o.font=c.getAttribute("face"),o.size=parseInt(c.getAttribute("size"),10),o.lineHeight=parseInt(d.getAttribute("lineHeight"),10),o.chars={};for(var l=i.data.getElementsByTagName("char"),p=0;p<l.length;p++){var v=parseInt(l[p].getAttribute("id"),10),g=new a.Rectangle(parseInt(l[p].getAttribute("x"),10)+r.frame.x,parseInt(l[p].getAttribute("y"),10)+r.frame.y,parseInt(l[p].getAttribute("width"),10),parseInt(l[p].getAttribute("height"),10));o.chars[v]={xOffset:parseInt(l[p].getAttribute("xoffset"),10),yOffset:parseInt(l[p].getAttribute("yoffset"),10),xAdvance:parseInt(l[p].getAttribute("xadvance"),10),kerning:{},texture:new a.Texture(r.baseTexture,g)}}var m=i.data.getElementsByTagName("kerning");for(p=0;p<m.length;p++){var T=parseInt(m[p].getAttribute("first"),10),A=parseInt(m[p].getAttribute("second"),10),P=parseInt(m[p].getAttribute("amount"),10);o.chars[A]&&(o.chars[A].kerning[T]=P)}i.bitmapFont=o,n.BitmapText.fonts[o.font]=o}var u=h("resource-loader").Resource,a=h("../core"),n=h("../extras"),t=h("path");f.exports=function(){return function(i,r){if(!i.data||!i.isXml||i.data.getElementsByTagName("page").length===0||i.data.getElementsByTagName("info").length===0||i.data.getElementsByTagName("info")[0].getAttribute("face")===null)return r();var o=t.dirname(i.url);o==="."&&(o=""),this.baseUrl&&o&&(this.baseUrl.charAt(this.baseUrl.length-1)==="/"&&(o+="/"),o=o.replace(this.baseUrl,"")),o&&o.charAt(o.length-1)!=="/"&&(o+="/");var c=o+i.data.getElementsByTagName("page")[0].getAttribute("file");if(a.utils.TextureCache[c])e(i,a.utils.TextureCache[c]),r();else{var d={crossOrigin:i.crossOrigin,loadType:u.LOAD_TYPE.IMAGE,metadata:i.metadata.imageMetadata};this.add(i.name+"_image",c,d,function(l){e(i,l.texture),r()})}}}},{"../core":29,"../extras":86,path:2,"resource-loader":16}],121:[function(h,f,y){f.exports={Loader:h("./loader"),bitmapFontParser:h("./bitmapFontParser"),spritesheetParser:h("./spritesheetParser"),textureParser:h("./textureParser"),Resource:h("resource-loader").Resource}},{"./bitmapFontParser":120,"./loader":122,"./spritesheetParser":123,"./textureParser":124,"resource-loader":16}],122:[function(h,f,y){function e(r,o){u.call(this,r,o);for(var c=0;c<e._pixiMiddleware.length;++c)this.use(e._pixiMiddleware[c]())}var u=h("resource-loader"),a=h("./textureParser"),n=h("./spritesheetParser"),t=h("./bitmapFontParser");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e._pixiMiddleware=[u.middleware.parsing.blob,a,n,t],e.addPixiMiddleware=function(r){e._pixiMiddleware.push(r)};var i=u.Resource;i.setExtensionXhrType("fnt",i.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":120,"./spritesheetParser":123,"./textureParser":124,"resource-loader":16}],123:[function(h,f,y){var e=h("resource-loader").Resource,u=h("path"),a=h("../core"),n=h("async"),t=1e3;f.exports=function(){return function(i,r){var o=i.name+"_image";if(!i.data||!i.isJson||!i.data.frames||this.resources[o])return r();var c={crossOrigin:i.crossOrigin,loadType:e.LOAD_TYPE.IMAGE,metadata:i.metadata.imageMetadata},d=u.dirname(i.url.replace(this.baseUrl,""));this.add(o,d+"/"+i.data.meta.image,c,function(l){function p(F,k){for(var I=F;k>I-F&&I<T.length;){var U=m[T[I]],X=U.frame;if(X){var z=null,x=null;if(z=U.rotated?new a.Rectangle(X.x,X.y,X.h,X.w):new a.Rectangle(X.x,X.y,X.w,X.h),U.trimmed&&(x=new a.Rectangle(U.spriteSourceSize.x/A,U.spriteSourceSize.y/A,U.sourceSize.w/A,U.sourceSize.h/A)),U.rotated){var w=z.width;z.width=z.height,z.height=w}z.x/=A,z.y/=A,z.width/=A,z.height/=A,i.textures[T[I]]=new a.Texture(l.texture.baseTexture,z,z.clone(),x,U.rotated),a.utils.TextureCache[T[I]]=i.textures[T[I]]}I++}}function v(){return P*t<T.length}function g(F){p(P*t,t),P++,setTimeout(F,0)}i.textures={};var m=i.data.frames,T=Object.keys(m),A=a.utils.getResolutionOfUrl(i.url),P=0;T.length<=t?(p(0,t),r()):n.whilst(v,g,r)})}}},{"../core":29,async:1,path:2,"resource-loader":16}],124:[function(h,f,y){var e=h("../core");f.exports=function(){return function(u,a){if(u.data&&u.isImage){var n=new e.BaseTexture(u.data,null,e.utils.getResolutionOfUrl(u.url));n.imageUrl=u.url,u.texture=new e.Texture(n),e.utils.BaseTextureCache[u.url]=n,e.utils.TextureCache[u.url]=u.texture}a()}}},{"../core":29}],125:[function(h,f,y){function e(t,i,r,o,c){u.Container.call(this),this._texture=null,this.uvs=r||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=i||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=o||new Uint16Array([0,1,3,2]),this.dirty=!0,this.blendMode=u.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=c||e.DRAW_MODES.TRIANGLE_MESH,this.texture=t,this.shader=null}var u=h("../core"),a=new u.Point,n=new u.Polygon;e.prototype=Object.create(u.Container.prototype),e.prototype.constructor=e,f.exports=e,Object.defineProperties(e.prototype,{texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),e.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.mesh),t.plugins.mesh.render(this)},e.prototype._renderCanvas=function(t){var i=t.context,r=this.worldTransform,o=t.resolution;t.roundPixels?i.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o|0,r.ty*o|0):i.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),this.drawMode===e.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(i):this._renderCanvasTriangles(i)},e.prototype._renderCanvasTriangleMesh=function(t){for(var i=this.vertices,r=this.uvs,o=i.length/2,c=0;o-2>c;c++){var d=2*c;this._renderCanvasDrawTriangle(t,i,r,d,d+2,d+4)}},e.prototype._renderCanvasTriangles=function(t){for(var i=this.vertices,r=this.uvs,o=this.indices,c=o.length,d=0;c>d;d+=3){var l=2*o[d],p=2*o[d+1],v=2*o[d+2];this._renderCanvasDrawTriangle(t,i,r,l,p,v)}},e.prototype._renderCanvasDrawTriangle=function(t,i,r,o,c,d){var l=this._texture.baseTexture,p=l.source,v=l.width,g=l.height,m=i[o],T=i[c],A=i[d],P=i[o+1],F=i[c+1],k=i[d+1],I=r[o]*l.width,U=r[c]*l.width,X=r[d]*l.width,z=r[o+1]*l.height,x=r[c+1]*l.height,w=r[d+1]*l.height;if(this.canvasPadding>0){var _=this.canvasPadding/this.worldTransform.a,M=this.canvasPadding/this.worldTransform.d,b=(m+T+A)/3,E=(P+F+k)/3,S=m-b,C=P-E,D=Math.sqrt(S*S+C*C);m=b+S/D*(D+_),P=E+C/D*(D+M),S=T-b,C=F-E,D=Math.sqrt(S*S+C*C),T=b+S/D*(D+_),F=E+C/D*(D+M),S=A-b,C=k-E,D=Math.sqrt(S*S+C*C),A=b+S/D*(D+_),k=E+C/D*(D+M)}t.save(),t.beginPath(),t.moveTo(m,P),t.lineTo(T,F),t.lineTo(A,k),t.closePath(),t.clip();var O=I*x+z*X+U*w-x*X-z*U-I*w,G=m*x+z*A+T*w-x*A-z*T-m*w,R=I*T+m*X+U*A-T*X-m*U-I*A,H=I*x*A+z*T*X+m*U*w-m*x*X-z*U*A-I*T*w,Q=P*x+z*k+F*w-x*k-z*F-P*w,Z=I*F+P*X+U*k-F*X-P*U-I*k,ee=I*x*k+z*F*X+P*U*w-P*x*X-z*U*k-I*F*w;t.transform(G/O,Q/O,R/O,Z/O,H/O,ee/O),t.drawImage(p,0,0,v*l.resolution,g*l.resolution,0,0,v,g),t.restore()},e.prototype.renderMeshFlat=function(t){var i=this.context,r=t.vertices,o=r.length/2;i.beginPath();for(var c=1;o-2>c;c++){var d=2*c,l=r[d],p=r[d+2],v=r[d+4],g=r[d+1],m=r[d+3],T=r[d+5];i.moveTo(l,g),i.lineTo(p,m),i.lineTo(v,T)}i.fillStyle="#FF0000",i.fill(),i.closePath()},e.prototype._onTextureUpdate=function(){this.updateFrame=!0},e.prototype.getBounds=function(t){if(!this._currentBounds){for(var i=t||this.worldTransform,r=i.a,o=i.b,c=i.c,d=i.d,l=i.tx,p=i.ty,v=-(1/0),g=-(1/0),m=1/0,T=1/0,A=this.vertices,P=0,F=A.length;F>P;P+=2){var k=A[P],I=A[P+1],U=r*k+c*I+l,X=d*I+o*k+p;m=m>U?U:m,T=T>X?X:T,v=U>v?U:v,g=X>g?X:g}if(m===-(1/0)||g===1/0)return u.Rectangle.EMPTY;var z=this._bounds;z.x=m,z.width=v-m,z.y=T,z.height=g-T,this._currentBounds=z}return this._currentBounds},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,a);var i,r,o=this.vertices,c=n.points;if(this.drawMode===e.DRAW_MODES.TRIANGLES){var d=this.indices;for(r=this.indices.length,i=0;r>i;i+=3){var l=2*d[i],p=2*d[i+1],v=2*d[i+2];if(c[0]=o[l],c[1]=o[l+1],c[2]=o[p],c[3]=o[p+1],c[4]=o[v],c[5]=o[v+1],n.contains(a.x,a.y))return!0}}else for(r=o.length,i=0;r>i;i+=6)if(c[0]=o[i],c[1]=o[i+1],c[2]=o[i+2],c[3]=o[i+3],c[4]=o[i+4],c[5]=o[i+5],n.contains(a.x,a.y))return!0;return!1},e.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":29}],126:[function(h,f,y){function e(a,n,t){u.call(this,a),this._ready=!0,this.segmentsX=n||10,this.segmentsY=t||10,this.drawMode=u.DRAW_MODES.TRIANGLES,this.refresh()}var u=h("./Mesh");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.refresh=function(){var a=this.segmentsX*this.segmentsY,n=[],t=[],i=[],r=[],o=this.texture,c=this.segmentsX-1,d=this.segmentsY-1,l=0,p=o.width/c,v=o.height/d;for(l=0;a>l;l++){var g=l%this.segmentsX,m=l/this.segmentsX|0;n.push(g*p,m*v),i.push(o._uvs.x0+(o._uvs.x1-o._uvs.x0)*(g/(this.segmentsX-1)),o._uvs.y0+(o._uvs.y3-o._uvs.y0)*(m/(this.segmentsY-1)))}var T=c*d;for(l=0;T>l;l++){var A=l%c,P=l/c|0,F=P*this.segmentsX+A,k=P*this.segmentsX+A+1,I=(P+1)*this.segmentsX+A,U=(P+1)*this.segmentsX+A+1;r.push(F,k,I),r.push(k,U,I)}this.vertices=new Float32Array(n),this.uvs=new Float32Array(i),this.colors=new Float32Array(t),this.indices=new Uint16Array(r)},e.prototype._onTextureUpdate=function(){u.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},{"./Mesh":125}],127:[function(h,f,y){function e(n,t){u.call(this,n),this.points=t,this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length),this._ready=!0,this.refresh()}var u=h("./Mesh"),a=h("../core");e.prototype=Object.create(u.prototype),e.prototype.constructor=e,f.exports=e,e.prototype.refresh=function(){var n=this.points;if(!(n.length<1)&&this._texture._uvs){var t=this.uvs,i=this.indices,r=this.colors,o=this._texture._uvs,c=new a.Point(o.x0,o.y0),d=new a.Point(o.x2-o.x0,o.y2-o.y0);t[0]=0+c.x,t[1]=0+c.y,t[2]=0+c.x,t[3]=1*d.y+c.y,r[0]=1,r[1]=1,i[0]=0,i[1]=1;for(var l,p,v,g=n.length,m=1;g>m;m++)l=n[m],p=4*m,v=m/(g-1),t[p]=v*d.x+c.x,t[p+1]=0+c.y,t[p+2]=v*d.x+c.x,t[p+3]=1*d.y+c.y,p=2*m,r[p]=1,r[p+1]=1,p=2*m,i[p]=p,i[p+1]=p+1;this.dirty=!0}},e.prototype._onTextureUpdate=function(){u.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e.prototype.updateTransform=function(){var n=this.points;if(!(n.length<1)){for(var t,i,r,o,c,d,l=n[0],p=0,v=0,g=this.vertices,m=n.length,T=0;m>T;T++)i=n[T],r=4*T,t=T<n.length-1?n[T+1]:i,v=-(t.x-l.x),p=t.y-l.y,o=10*(1-T/(m-1)),o>1&&(o=1),c=Math.sqrt(p*p+v*v),d=this._texture.height/2,p/=c,v/=c,p*=d,v*=d,g[r]=i.x+p,g[r+1]=i.y+v,g[r+2]=i.x-p,g[r+3]=i.y-v,l=i;this.containerUpdateTransform()}}},{"../core":29,"./Mesh":125}],128:[function(h,f,y){f.exports={Mesh:h("./Mesh"),Plane:h("./Plane"),Rope:h("./Rope"),MeshRenderer:h("./webgl/MeshRenderer"),MeshShader:h("./webgl/MeshShader")}},{"./Mesh":125,"./Plane":126,"./Rope":127,"./webgl/MeshRenderer":129,"./webgl/MeshShader":130}],129:[function(h,f,y){function e(n){u.ObjectRenderer.call(this,n),this.indices=new Uint16Array(15e3);for(var t=0,i=0;15e3>t;t+=6,i+=4)this.indices[t+0]=i+0,this.indices[t+1]=i+1,this.indices[t+2]=i+2,this.indices[t+3]=i+0,this.indices[t+4]=i+2,this.indices[t+5]=i+3;this.currentShader=null}var u=h("../../core"),a=h("../Mesh");e.prototype=Object.create(u.ObjectRenderer.prototype),e.prototype.constructor=e,f.exports=e,u.WebGLRenderer.registerPlugin("mesh",e),e.prototype.onContextChange=function(){},e.prototype.render=function(n){n._vertexBuffer||this._initWebGL(n);var t=this.renderer,i=t.gl,r=n._texture.baseTexture,o=n.shader,c=n.drawMode===a.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;t.blendModeManager.setBlendMode(n.blendMode),o=o?o.shaders[i.id]||o.getShader(t):t.shaderManager.plugins.meshShader,this.renderer.shaderManager.setShader(o),o.uniforms.translationMatrix.value=n.worldTransform.toArray(!0),o.uniforms.projectionMatrix.value=t.currentRenderTarget.projectionMatrix.toArray(!0),o.uniforms.alpha.value=n.worldAlpha,o.syncUniforms(),n.dirty?(n.dirty=!1,i.bindBuffer(i.ARRAY_BUFFER,n._vertexBuffer),i.bufferData(i.ARRAY_BUFFER,n.vertices,i.STATIC_DRAW),i.vertexAttribPointer(o.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,n._uvBuffer),i.bufferData(i.ARRAY_BUFFER,n.uvs,i.STATIC_DRAW),i.vertexAttribPointer(o.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),r._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,r._glTextures[i.id]):this.renderer.updateTexture(r),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n._indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n.indices,i.STATIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,n._vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,n.vertices),i.vertexAttribPointer(o.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,n._uvBuffer),i.vertexAttribPointer(o.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),r._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,r._glTextures[i.id]):this.renderer.updateTexture(r),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n._indexBuffer),i.bufferSubData(i.ELEMENT_ARRAY_BUFFER,0,n.indices)),i.drawElements(c,n.indices.length,i.UNSIGNED_SHORT,0)},e.prototype._initWebGL=function(n){var t=this.renderer.gl;n._vertexBuffer=t.createBuffer(),n._indexBuffer=t.createBuffer(),n._uvBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,n._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,n.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,n._uvBuffer),t.bufferData(t.ARRAY_BUFFER,n.uvs,t.STATIC_DRAW),n.colors&&(n._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,n._colorBuffer),t.bufferData(t.ARRAY_BUFFER,n.colors,t.STATIC_DRAW)),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n.indices,t.STATIC_DRAW)},e.prototype.flush=function(){},e.prototype.start=function(){this.currentShader=null},e.prototype.destroy=function(){u.ObjectRenderer.prototype.destroy.call(this)}},{"../../core":29,"../Mesh":125}],130:[function(h,f,y){function e(a){u.Shader.call(this,a,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join(`
`),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join(`
`),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var u=h("../../core");e.prototype=Object.create(u.Shader.prototype),e.prototype.constructor=e,f.exports=e,u.ShaderManager.registerPlugin("meshShader",e)},{"../../core":29}],131:[function(h,f,y){Math.sign||(Math.sign=function(e){return e=+e,e===0||isNaN(e)?e:e>0?1:-1})},{}],132:[function(h,f,y){Object.assign||(Object.assign=h("object-assign"))},{"object-assign":11}],133:[function(h,f,y){h("./Object.assign"),h("./requestAnimationFrame"),h("./Math.sign")},{"./Math.sign":131,"./Object.assign":132,"./requestAnimationFrame":134}],134:[function(h,f,y){(function(e){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!e.performance||!e.performance.now){var u=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-u}}for(var a=Date.now(),n=["ms","moz","webkit","o"],t=0;t<n.length&&!e.requestAnimationFrame;++t)e.requestAnimationFrame=e[n[t]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[t]+"CancelAnimationFrame"]||e[n[t]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(i){if(typeof i!="function")throw new TypeError(i+"is not a function");var r=Date.now(),o=16+a-r;return 0>o&&(o=0),a=r,setTimeout(function(){a=Date.now(),i(performance.now())},o)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(i){clearTimeout(i)})}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[115])(115)});const Wo="/assets/Star-c1c9fd74.png";window.onresize=function(){Ye=window.innerWidth,ke=window.innerHeight,Wi=new Date,ur||(ur=!0,document.getElementById("stars-bg").style.opacity=0,setTimeout(Xi,1500))};function Xi(){new Date-Wi<1500?setTimeout(Xi,100):(ur=!1,Yi())}function Gi(){Et.render(Rr),setTimeout(Gi,40)}function Yi(){delete window.renderer,Et=PIXI.autoDetectRenderer(Ye,ke,{transparent:!0}),document.getElementById("stars-bg").innerHTML="",document.getElementById("stars-bg").appendChild(Et.view),Et.view.position="fixed",Rr=new PIXI.Container,Ho(),document.getElementById("stars-bg").style.opacity=1}function Ho(){Zr=[];for(var s=Math.sqrt(ke*Ye)*2,h=0;h<s;h++)Zr.push(new Vo)}function Vo(){var s={star:new PIXI.Sprite(qo),xPos:Math.random()*Ye,yPos:Math.random()*ke,size:Math.random()*(ke/30),xMov:Math.random()-.5,yMov:Math.random()-.5};s.star.anchor.x=.5,s.star.anchor.y=.5,s.star.position.x=s.xPos,s.star.position.y=s.yPos,s.star.height=s.size,s.star.width=s.size,Rr.addChild(s.star),h();function h(){s.xPos=s.xPos+s.xMov,s.yPos=s.yPos+s.yMov,s.star.position.x=s.xPos,s.star.position.y=s.yPos,s.xPos>Ye+10?s.xPos=-10:s.xPos<-10&&(s.xPos=Ye+10),s.yPos>ke+10?s.yPos=-10:s.yPos<-10&&(s.yPos=ke+10),setTimeout(h,100)}this.getProp=function(){return s}}var Wi,ur=!1,Ye=window.innerWidth,ke=window.innerHeight,Et,Rr,Zr,qo=PIXI.Texture.fromImage(Wo);const $o=()=>{Yi(),setTimeout(Gi,100)};let Qo=5;function Ko(){const s=rn("shooting-stars-container");for(let h=1;h<=Qo;h++)s.innerHTML+=`<div class="meteor-${h}"></div>`}const Zo=s=>te.createElement("svg",{id:"noun-rocket-1011569",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 800 1000",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",...s},te.createElement("g",{id:"noun-rocket-1011569-u-wings",transform:"translate(.000161 0)"},te.createElement("g",{id:"noun-rocket-1011569-u-left-beam"},te.createElement("path",{id:"noun-rocket-1011569-s-path1",d:"M43.428,639.902c-5.119,0-10.236-1.951-14.143-5.857-7.811-7.811-7.811-20.475,0-28.285L144.933,490.114c7.811-7.811,20.475-7.809,28.284,0c7.811,7.811,7.811,20.475,0,28.285L57.57,634.045c-3.905,3.904-9.025,5.857-14.142,5.857Z"})),te.createElement("g",{id:"noun-rocket-1011569-u-center-beam"},te.createElement("path",{id:"noun-rocket-1011569-s-path2",d:"M69.286,750.715c-5.118,0-10.237-1.953-14.142-5.857-7.811-7.811-7.811-20.475,0-28.285L175.683,596.034c7.812-7.811,20.475-7.811,28.284,0c7.811,7.811,7.811,20.475,0,28.285L83.428,744.857c-3.905,3.905-9.024,5.858-14.142,5.858Z"})),te.createElement("path",{id:"noun-rocket-1011569-u-rocket-body",d:"M770.715,29.287c-4.539-4.539-10.977-6.626-17.318-5.604-2.322.374-57.754,9.48-133.296,38.342-44.315,16.931-86.421,37.205-125.146,60.262-48.6,28.936-92.004,62.368-129.006,99.369-62.441,62.441-113.465,141.185-151.653,234.041-3.069,7.465-1.353,16.043,4.354,21.75l37.81,37.811l85.412-85.412c7.813-7.811,20.475-7.811,28.285,0s7.811,20.475,0,28.285l-85.412,85.412l37.809,37.811c3.826,3.824,8.941,5.857,14.146,5.857c2.561,0,5.143-.492,7.604-1.504c92.862-38.191,171.604-89.215,234.042-151.652c37-37.002,70.434-80.406,99.369-129.006c23.057-38.726,43.332-80.83,60.262-125.146c28.861-75.543,37.969-130.974,38.342-133.297c1.019-6.339-1.065-12.781-5.604-17.319ZM590.644,309.921c-13.431,13.432-31.286,20.829-50.278,20.829-.002,0-.004,0-.006,0-18.994-.002-36.852-7.398-50.281-20.828-13.43-13.432-20.826-31.289-20.826-50.283s7.396-36.852,20.828-50.281c13.43-13.432,31.289-20.829,50.283-20.829s36.85,7.396,50.28,20.827c27.725,27.726,27.725,72.839,0,100.565Z"}),te.createElement("g",{id:"noun-rocket-1011569-u-right-beam"},te.createElement("path",{id:"noun-rocket-1011569-s-path3",d:"M180.098,776.572c-5.119,0-10.237-1.951-14.143-5.857-7.811-7.811-7.811-20.475,0-28.285L281.603,626.782c7.811-7.809,20.473-7.811,28.283,0s7.811,20.475,0,28.285L194.239,770.715c-3.905,3.904-9.023,5.857-14.141,5.857Z"})),te.createElement("path",{id:"noun-rocket-1011569-u-left-wing",d:"M317.792,229.131L217.314,248.692c-3.898.758-7.483,2.662-10.297,5.466L70.177,390.559c-6.233,6.213-7.673,15.769-3.546,23.542c3.516,6.621,10.365,10.623,17.66,10.623c1.266,0,2.549-.121,3.826-.369l117.368-22.85c30.956-65.159,68.569-122.881,112.307-172.374Z"}),te.createElement("path",{id:"noun-rocket-1011569-u-right-wing",d:"M398.494,594.516L375.646,711.883c-1.682,8.639,2.48,17.361,10.254,21.486c2.961,1.572,6.178,2.336,9.371,2.336c5.193,0,10.325-2.021,14.172-5.881L545.842,592.98c2.805-2.813,4.707-6.398,5.467-10.297L570.87,482.208c-49.491,43.737-107.214,81.349-172.376,112.308Z"}))),Jo=Ae.div`
    z-index:-10;
    width:100%;
    text-align: left;
`,es=Ae(Zo)`
transform:translateX(100%) rotate(-45deg);

width:30%;
max-width:250px;
#noun-rocket-1011569-u-wings{
    fill:red;
}

#noun-rocket-1011569-u-rocket-body{
    fill:white;
}
#noun-rocket-1011569-u-left-beam,#noun-rocket-1011569-u-center-beam,#noun-rocket-1011569-u-right-beam{
    fill:orange;
    filter: drop-shadow(0px 0px 40px rgb(255 204 51 / 0.5));
}
`;function ts(){return ae.jsx(Jo,{id:"rocket-svg-container",children:ae.jsx(es,{})})}function os(){return Ki(),te.useEffect(()=>{$o(),Ko()},[]),ae.jsxs(No,{children:[ae.jsx("div",{id:"stars-bg"}),ae.jsx("div",{id:"shooting-stars-container"}),ae.jsxs(Oo,{pages:3,className:"parallax",children:[ae.jsx(we,{speed:1,children:ae.jsx(Lo,{})}),ae.jsx(we,{offset:1,speed:4,children:ae.jsx(ts,{})}),ae.jsx(Io,{offset:1,speed:.5}),ae.jsx(Yo,{})]})]})}export{os as default};
